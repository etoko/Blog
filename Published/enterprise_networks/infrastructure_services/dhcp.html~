<h1>Introduction and Overview</h1>
<p>
Dynamic Host Configuration Protocol (DHCP) is an IP protocol used by hosts on a 
TCP/IP network to receive IP configuration parameters such as IP address, default 
gateway, DNS server addresses, domain name among others. 
DHCP is used to assign IP configuration information to the clients automatically. 
It works at layer 4 and is a client-server protocol.  DHCP messages from the 
<b>client use UDP port 68 as the source port number and 67 as destination 
port number</b> which is used by the server. DHCP is based on the BootP protocol.
</p>
<p>
The DHCP server can be local within the same subnet as the clients or in a remote 
network. 
In many networks, it is common for the network's default gateway to be the DHCP
server.
</p>
<p>
Components of DHCP:
<ul>
  <li><b>DHCP server:</b> devices assign IP configuration information to requesting 
  clients. These may be dedicated such as Windows/Linux servers, or configured switches/routers.
  Routers and some switches can be configured as DHCP servers. 
  </li>
  <li><b>DHCP client:</b> devices that request for IP addresses and other network services 
  such as DNS server addresses.</li>
  <li><b>IP address pool:</b> Range of IP addresses to be assigned to clients.</li>
  <li><b>Lease:</b> length of time that a client can use an assigned IP address.</li>
  <li><b>DHCP relay:</b> used to forward DHCP requests from clients to servers when the 
  server is located in a remote network. Device listens to broadcasts from the 
  clients and forwards them to the server. This is common in networks with
  centralised DHCP servers.</li>
</ul>
</p>
<p>
DHCP is used to send IP configuration information to clients. Some of the IP 
configuration information that is issued by DHCP includes the following: 
<ul>
  <li>IP address</li>
  <li>Subnet mask</li>
  <li>Default gateway IP address</li>
  <li>DNS server IP address</li>
  <li>Domain name</li>
  <li>TFTP server address</li>
  <li>Many other IP services</li>
</ul>
</p>
<p>
DHCP supports three mechanisms for IP address allocation:
<ol type="a">
  <li><b>Automatic Allocation:</b> DHCP assigns a permanent IP address to a client.
  Addresses for new clients are assigned from the address pool and, then mapped.</li>
  <li><b>Dynamic Allocation:</b> DHCP assigns an IP address to a client for a 
  limited period of time. The IP address is then returned to the pool when the 
  lease is not renewed.</li>
  <li><b>Manual allocation:</b> network administrator assigns an IP address to a 
  client and DHCP is used simply to convey the assigned address to the client.
  This address is permanently assigned to the host.
  </li>
</ol>
</p>

<h2>Address Lease</h2>
<p>
The lease period must be renewed if a device wants to continue using the assigned 
IP configuration information. An infinite lease has the time set to (2 <sup>32</sup>) 
seconds or 4294967295 seconds which is equivalent to 136 years. 
The lease period must be renewed while it is still valid. Once a lease 
expires, the address issued is returned to the address pool. 
</p>
To ensure that the lease on the issued IP address does not expire, when a client 
is still using the address, DHCP has a process in which the client requests for 
a renewal of a lease, if the still is still in need of the IP address. The first attempt 
to renew the lease period is at half the lease time with the client sending a 
DHCP Request message containing the requested IP address in option 50. 
When the DHCP server receives the DHCP Request message for the lease to be renewed, 
it resets the lease timer on the address to the configured duration and responds 
with a DHCP ACK message to the client containing the requested IP address and other 
IP configuration parameters. If a client does not receive confirmation of a renewed 
lease on the address, it sends a second DHCP Request message to renew the lease. 
The second attempt is sent at half the remaining lease time i.e., at 3/4 of the original lease time.
</p>
<p>
A lease on an IP address can be terminated by the client or server:
<ul>
  <li><b>Client:</b> with the DHCPRELEASE message.</li>
  <li><b>Server:</b> with the DHCPFORCERENEW and DHCPNACK messages.</li>
</ul>
</p>
<p>
In corporate networks, the lease should be made longer, say 24 hours or longer, as 
these users connect to the network frequently and routinely. For guest networks, the lease 
should be made short as guests users are likely to be connected for a shorter time period. 
</p>
<p>
However, if the address pool is not large and clients typically connect to the 
network for short periods of time, it may be recommended to configure a shorter 
lease period e.g. one hour. This ensures that leased addresses are not reserved for much 
longer after a client has disconnected from the network and the addresses are 
returned to the pool. 
</p>

<h1>IP Configuration Allocation by DHCP</h1>
<p>
DHCP uses a four stage process for servers to allocate IP configuration 
parameters to clients. These stages are: DHCPDISCOVER, DHCPOFFER, DHCPREQUEST, 
DHCPACK. These four stages are usually abbreviated as DORA. Most of the server 
DHCP messages are sent in unicast while clients send broadcasts.
</p>

<h2>Discover</h2>
<p>
Devices that would like to receive addresses through DHCP should be configured 
as clients. End-user devices, by default, are configured to request for 
DHCP services automatically. On IOS, interfaces are configured as 
DHCP clients using the command <code><b>ip address dhcp</b></code>.
</p>
<p>
 Network devices and servers, should be configured with static IP addresses or 
 should receive their IP addresses through DHCP manual allocation.
</p>
<p>
A client sends a broadcast DHCPDISCOVER message onto the network using source port UDP port 68 
and destination UDP port 67. Any DHCP servers on the local network will respond 
to the DHCPDISCOVER with an offer message. DHCP relays will receive the DHCP Discover message 
and forward it to the remote DHCP server. 
<ul>
  <li><b>Source IP:</b> 0.0.0.0</li>
  <li><b>Source MAC:</b> client's interface MAC address</li>
  <li><b>Destination IP:</b> 255.255.255.255</li>
  <li><b>Destination MAC:</b> FFFF.FFFF.FFFF</li>
</ul>
</p>
<p>
If a response to the DHCPDISCOVER message is not received in a specified period 
of time, the client broadcasts another DHCPDISCOVER message.

The following is a Wireshark packet capture of a DHCPDISCOVER message:
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
Frame 321: 333 bytes on wire (2664 bits), 333 bytes captured (2664 bits) on interface -, id 0  <br>
Ethernet II, Src: ca:07:06:8d:00:08 (ca:07:06:8d:00:08), Dst: Broadcast (ff:ff:ff:ff:ff:ff)    <br>
Internet Protocol Version 4, Src: 0.0.0.0, Dst: 255.255.255.255                                <br>
User Datagram Protocol, Src Port: 68, Dst Port: 67                                             <br>
Dynamic Host Configuration Protocol (Discover)                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;Message type: Boot Request (1)                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hardware type: Ethernet (0x01)                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hardware address length: 6                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hops: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;Transaction ID: 0x000026e0                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;Seconds elapsed: 7                                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;Bootp flags: 0x8000, Broadcast flag (Broadcast)                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1... .... .... .... = Broadcast flag: Broadcast                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0000 0000 = Reserved flags: 0x0000                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client IP address: 0.0.0.0                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;Your (client) IP address: 0.0.0.0                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;Next server IP address: 0.0.0.0                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;Relay agent IP address: 0.0.0.0                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client MAC address: ca:07:06:8d:00:08 (ca:07:06:8d:00:08)                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client hardware address padding: 00000000000000000000                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;Server host name not given                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;Boot file name not given                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;Magic cookie: DHCP                                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (53) DHCP Message Type (Discover)                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DHCP: Discover (1)                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (57) Maximum DHCP Message Size                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Maximum DHCP Message Size: 1200                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (61) Client identifier                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 27&nbsp;&nbsp;&nbsp;&nbsp;                                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Client Identifier: cisco-ca07.068d.0008-Gi0/0                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (12) Host Name                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Host Name: R7&nbsp;&nbsp;                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (55) Parameter Request List                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (1) Subnet Mask                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (6) Domain Name Server                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (15) Domain Name                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (44) NetBIOS over TCP/IP Name Server                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (3) Router                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (33) Static Route                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (150) TFTP Server Address                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (43) Vendor-Specific Information                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (255) End&nbsp;&nbsp;                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Option End: 255
</code></div>
</p>
<p>
If clients are not in the same subnet as the server, the DHCPDISCOVER message will 
have a non-zero value for <code><b>giaddr</b></code> field. If the client is in 
the same subnet as the DHCP server, the DHCPDISCOVER packet will have a value 
of zero.
</p>

<h2>Offer</h2>
<p>
A DHCP server that receives a DHCP Discover message will reply to the Discover 
message with an offer message. The server reserves an IP address for this client 
and sends the reserved IP address along with other IP configuration information 
to the client. The offer is sent to the broadcast address 
255.255.255.255. Clients will identify the DHCPOFFER is intended for them because 
the DHCP server includes the client MAC address that was in the DHCPDISCOVER 
message received from the client. Additionally, this client MAC address is 
contained in the "Client MAC address" field of the DHCP Offer message.
</p>
<p>
For DHCPDISCOVER messages received from a DHCP relay, the appropriate address 
pool is determined using the value of the <code><b>giaddr</b></code> field. 
For a DHCPDISCOVER message received from a local subnet, the IP address of the interface 
through which the message was received determines the pool to be used for assigning 
the address.
</p>

<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
Frame 37: 365 bytes on wire (2920 bits), 365 bytes captured (2920 bits) on interface -, id 0 <br>
Ethernet II, Src: ca:01:05:ca:00:08 (ca:01:05:ca:00:08), Dst: Broadcast (ff:ff:ff:ff:ff:ff)  <br>
Internet Protocol Version 4, Src: 172.30.1.1, Dst: 255.255.255.255                           <br>
User Datagram Protocol, Src Port: 67, Dst Port: 68                                           <br>
Dynamic Host Configuration Protocol (Offer)                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;Message type: Boot Reply (2)                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hardware type: Ethernet (0x01)                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hardware address length: 6                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hops: 0&nbsp;&nbsp;&nbsp;&nbsp;                                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;Transaction ID: 0x000010eb                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Seconds elapsed: 0                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;Bootp flags: 0x8000, Broadcast flag (Broadcast)                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1... .... .... .... = Broadcast flag: Broadcast                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0000 0000 = Reserved flags: 0x0000                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client IP address: 0.0.0.0                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Your (client) IP address: 172.30.1.26                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;Next server IP address: 0.0.0.0                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;Relay agent IP address: 0.0.0.0                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client MAC address: ca:07:06:8d:00:08 (ca:07:06:8d:00:08)                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client hardware address padding: 00000000000000000000                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;Server host name not given                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Boot file name not given                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;Magic cookie: DHCP                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (53) DHCP Message Type (Offer)                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 1                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DHCP: Offer (2)                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (54) DHCP Server Identifier (172.30.1.1)                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DHCP Server Identifier: 172.30.1.1                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (51) IP Address Lease Time                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IP Address Lease Time: (86340s) 23 hours, 59 minutes                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (58) Renewal Time Value                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Renewal Time Value: (43170s) 11 hours, 59 minutes, 30 seconds                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (59) Rebinding Time Value                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rebinding Time Value: (75544s) 20 hours, 59 minutes, 4 seconds                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (1) Subnet Mask (255.255.255.0)                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Subnet Mask: 255.255.255.0                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (3) Router                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Router: 172.30.1.1                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (150) TFTP Server Address                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TFTP Server Address: 172.30.1.10                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (6) Domain Name Server                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 8                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Domain Name Server: 172.30.1.1                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Domain Name Server: 172.30.5.10                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (15) Domain Name                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 25                                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Domain Name: emmanueltoko.blogspot.com                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (255) End                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Option End: 255                                                                      <br>
</code></div>
</p>

<p>
Because clients send DHCP messages through broadcasts, any DHCP servers listening can respond to the 
client. A client usually accepts the first offer it receives. If a client does 
not respond to a DHCPOFFER message within a given amount of time the server can 
reclaim the IP addresses that it had reserved for the client.
If a DHCP server cannot satisfy a DHCP request from its own database, it can 
forward the request to one or more secondary servers.
</p>
<p>
If an offer contains invalid configuration parameters, a client can respond with
a DHCPDECLINE message sent in broadcast. A server sends a DHCPNAK denial broadcast message 
indicating that parameters are not assigned if an error occurred during the 
parameter negotiation or client was slow in responding to the offer and the 
address was subsequently assigned to another client.
</p>

<h2>Request</h2>
<p>
The client which receives the offer will send a request for the offered IP 
configuration parameters. If multiple DHCP servers respond with DHCP offer messages, the client 
usually processes the first offer and declines the others.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
  Frame 38: 345 bytes on wire (2760 bits), 345 bytes captured (2760 bits) on interface -, id 0    <br>
Ethernet II, Src: ca:07:06:8d:00:08 (ca:07:06:8d:00:08), Dst: Broadcast (ff:ff:ff:ff:ff:ff)       <br>
Internet Protocol Version 4, Src: 0.0.0.0, Dst: 255.255.255.255                                   <br>
User Datagram Protocol, Src Port: 68, Dst Port: 67                                                <br>
Dynamic Host Configuration Protocol (Request)                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;Message type: Boot Request (1)                                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hardware type: Ethernet (0x01)                                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hardware address length: 6                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hops: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;Transaction ID: 0x000010eb                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;Seconds elapsed: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;Bootp flags: 0x8000, Broadcast flag (Broadcast)                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1... .... .... .... = Broadcast flag: Broadcast                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0000 0000 = Reserved flags: 0x0000                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client IP address: 0.0.0.0                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;Your (client) IP address: 0.0.0.0                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;Next server IP address: 0.0.0.0                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Relay agent IP address: 0.0.0.0                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client MAC address: ca:07:06:8d:00:08 (ca:07:06:8d:00:08)                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client hardware address padding: 00000000000000000000                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;Server host name not given                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;Boot file name not given                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;Magic cookie: DHCP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (53) DHCP Message Type (Request)                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DHCP: Request (3)&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (57) Maximum DHCP Message Size                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Maximum DHCP Message Size: 1200                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (61) Client identifier                                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Client Identifier: cisco-ca07.068d.0008-Gi0/0                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (54) DHCP Server Identifier (172.30.1.1)                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DHCP Server Identifier: 172.30.1.1                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (50) Requested IP Address (172.30.1.26)                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Requested IP Address: 172.30.1.26                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (12) Host Name&nbsp;&nbsp;                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Host Name: R7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (55) Parameter Request List                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (1) Subnet Mask                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (6) Domain Name Server                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (15) Domain Name                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (44) NetBIOS over TCP/IP Name Server                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (3) Router                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (33) Static Route                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (150) TFTP Server Address                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (43) Vendor-Specific Information                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (255) End&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Option End: 255&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
</code></div>
  </p>
  
<h2>Acknowledge</h2>
<p>
DHCP servers acknowledge the IP configuration parameters that were offered to the client. 
The DHCP process also sets the IP address of the gateway. This is usually  a 
static route with an administrative distance of 254. 
</p>

<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>

Frame 39: 365 bytes on wire (2920 bits), 365 bytes captured (2920 bits) on interface -, id 0     <br>
Ethernet II, Src: ca:01:05:ca:00:08 (ca:01:05:ca:00:08), Dst: Broadcast (ff:ff:ff:ff:ff:ff)      <br>
Internet Protocol Version 4, Src: 172.30.1.1, Dst: 255.255.255.255                               <br>
User Datagram Protocol, Src Port: 67, Dst Port: 68                                               <br>
Dynamic Host Configuration Protocol (ACK)                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;Message type: Boot Reply (2)                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hardware type: Ethernet (0x01)                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hardware address length: 6                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hops: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;Transaction ID: 0x000010eb                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;Seconds elapsed: 0                                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;Bootp flags: 0x8000, Broadcast flag (Broadcast)                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1... .... .... .... = Broadcast flag: Broadcast                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0000 0000 = Reserved flags: 0x0000                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client IP address: 0.0.0.0                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;Your (client) IP address: 172.30.1.26                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;Next server IP address: 0.0.0.0                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;Relay agent IP address: 0.0.0.0                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client MAC address: ca:07:06:8d:00:08 (ca:07:06:8d:00:08)                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client hardware address padding: 00000000000000000000                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;Server host name not given                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;Boot file name not given                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;Magic cookie: DHCP                                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (53) DHCP Message Type (ACK)                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 1&nbsp;&nbsp;&nbsp;&nbsp;                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DHCP: ACK (5)                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (54) DHCP Server Identifier (172.30.1.1)                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4&nbsp;&nbsp;&nbsp;&nbsp;                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DHCP Server Identifier: 172.30.1.1                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (51) IP Address Lease Time                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4&nbsp;&nbsp;&nbsp;&nbsp;                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IP Address Lease Time: (86340s) 23 hours, 59 minutes                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (58) Renewal Time Value                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4&nbsp;&nbsp;&nbsp;&nbsp;                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Renewal Time Value: (43170s) 11 hours, 59 minutes, 30 seconds                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (59) Rebinding Time Value                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4&nbsp;&nbsp;&nbsp;&nbsp;                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rebinding Time Value: (75544s) 20 hours, 59 minutes, 4 seconds                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (1) Subnet Mask (255.255.255.0)                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4&nbsp;&nbsp;&nbsp;&nbsp;                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Subnet Mask: 255.255.255.0                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (3) Router                                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4&nbsp;&nbsp;&nbsp;&nbsp;                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Router: 172.30.1.1                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (150) TFTP Server Address                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 4&nbsp;&nbsp;&nbsp;&nbsp;                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TFTP Server Address: 172.30.1.10                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (6) Domain Name Server                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 8&nbsp;&nbsp;&nbsp;&nbsp;                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Domain Name Server: 172.30.1.1                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Domain Name Server: 172.30.5.10                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (15) Domain Name                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 25&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Domain Name: emmanueltoko.blogspot.com                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (255) End                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Option End: 255                                                                          <br>
                                                                                                 <br>
</code></div>
</p>

<p>
Some DHCP servers include the following parameters in the DHCP ACK message:
<ol>
 <li>Renewal time in DHCP Option 58</li>
 <li>Rebinding time in DHCP Option 59</li>
 <li>NTP servers in DHCP Option 42</li>
</ol>
</p>


<h2>DHCP Relay</h2>
<p>
Based on the network design, a DHCP server may be located in the local network 
or a remote network. However, by default, DHCP clients send DHCPDiscover messages 
in broadcast; but routers block broadcast messages. So these DHCPDISCOVER messages 
get blocked by the local router and are not sent to a remote DHCP server unless 
the DHCP relay feature has been has been configured on the local network gateway.
The DHCP relay takes the DHCPDISCOVER broadcast message and sends a unicast 
DHCPDISCOVER message to the DHCP server.
</p>
<p>
The network that the DHCP relay (and client) reside in should be 
known to the DHCP server or its default router. Otherwise the DHCP server will not have a route 
to replay to the DHCP Discover message. The DHCP relay should have IP reachability 
to the network of the remote DHCP server.
</p>
<p>
The DHCP relay is configured on the interface facing the clients i.e., the interface 
directly connected to the clients.
</p>

<p>
A DHCP relay agent forwards the following:
<ul>
  <li>TFTP</li>
  <li>DNS</li>
  <li>Internet Time Service(ITS)</li>
  <li>NetBIOS name server</li>
  <li>NetBIOS datagram server</li>
  <li>BootP</li>
  <li>TACACS</li>
</ul>
</p>

<p>
The command to configure the DHCP relay is <code><b>ip helper-address &lt;dhcp-server-ip-address&gt;</b></code>.
</p>
<p>
The DHCPDISCOVER message received from an DHCP relay is sent in unicast packets 
with the source IP address being the DHCP relay interface IP address point to the 
clients. Included in this DHCPDISCOVER message is the relay agent IP address 
which is usually the same as the source IP address.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
Frame 217: 333 bytes on wire (2664 bits), 333 bytes captured (2664 bits) on interface -, id 0       <br>
Ethernet II, Src: ca:03:06:63:00:1c (ca:03:06:63:00:1c), Dst: ca:02:06:37:00:1c (ca:02:06:37:00:1c) <br>
Internet Protocol Version 4, Src: 192.168.34.1, Dst: 192.168.23.1                                   <br>
User Datagram Protocol, Src Port: 67, Dst Port: 67                                                  <br>
Dynamic Host Configuration Protocol (Discover)                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;Message type: Boot Request (1)                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hardware type: Ethernet (0x01)                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hardware address length: 6                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hops: 1                                                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;Transaction ID: 0x000013e6                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;Seconds elapsed: 0                                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;Bootp flags: 0x8000, Broadcast flag (Broadcast)                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1... .... .... .... = Broadcast flag: Broadcast                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0000 0000 = Reserved flags: 0x0000                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client IP address: 0.0.0.0                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;Your (client) IP address: 0.0.0.0                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Next server IP address: 0.0.0.0                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;Relay agent IP address: 192.168.34.1                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client MAC address: ca:04:06:72:00:08 (ca:04:06:72:00:08)                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;Client hardware address padding: 00000000000000000000                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;Server host name not given                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;Boot file name not given                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;Magic cookie: DHCP                                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (53) DHCP Message Type (Discover)                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 1                                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DHCP: Discover (1)                                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (57) Maximum DHCP Message Size                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 2                                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Maximum DHCP Message Size: 1200                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (61) Client identifier                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 27                                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type: 0                                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Client Identifier: cisco-ca04.0672.0008-Gi0/0                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (12) Host Name                                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 2                                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Host Name: R4                                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (55) Parameter Request List                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 8                                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (1) Subnet Mask                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (6) Domain Name Server                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (15) Domain Name                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (44) NetBIOS over TCP/IP Name Server                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (3) Router                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (33) Static Route                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (150) TFTP Server Address                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameter Request List Item: (43) Vendor-Specific Information                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Option: (255) End                                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Option End: 255                                                                             <br>
</code></div>
</p>


<h2>DHCP Messages</h2>
<p>
DHCP messages include: DHCPDISCOVER, DHCPOFFER, DHCPREQUEST, DHCPACK, DHCPDECLINE,
DHCPNAK, DHCPRELEASE, DHCPINFORM.
</p>

<h2>DHCPDECLINE</h2>
<p>
Message is sent by a client to a server informing that an IP address is already 
in use on the network.
</p>

<h2>DHCPNAK</h2>
<p>
Server sends this message to a client and informs that the server declines to 
provide the client the requested IP configuration information.
</p>

<h2>DHCPRELEASE</h2>
<p>
Client sends this message to a server informing it that the client has released 
its DHCP lease, this allowing the DHCP server to reassign the IP address 
to another client.
</p>

<h2>DHCPINFORM</h2>
<p>
Client sends this message to a server requesting IP configuration parameters. Such 
a message might be sent from an access server requesting IP configuration 
information for a remote client attaching to the access server.
</p>

<h2>DHCP Options</h2>
<p>
The DHCP server and client exchange IP configuration parameters using DHCP options. 
DHCP options are defined by a numeric variable and value. There are up to 256 DHCP options 
available (from 0 to 255). These options can be categorized into options for:
<ul>
  <li>IP Layer parameters per host such as policy filters, maximum dataframe reassembly 
  size, default IP TTL, path MTU aging timeout etc.</li>
  <li>IP Layer parameters per interface such as interface MTU, broadcast address, 
  router solicitation address etc.</li>
  <li>TCP parameters such as TCP keepalive interval, TCP keepalive garbage option</li>
  <li>Application and service parameters</li>
</ul>
Some DHCP options are configured on the server, others are included in DHCP messages 
sent by the client.

Some frequently used DHCP options are listed in the 
following table;
<p>
<table width="100%" cellspacing="0">
<thead style="background: #d3d3d3; border-bottom: 1px solid; border-top: 1px solid;">
  <tr>
    <td style="border-bottom: 1px solid; border-top: 1px solid;" width="10%">Option Number</td>
    <td style="border-bottom: 1px solid; border-top: 1px solid;" width="15%">Value</td>
    <td style="border-bottom: 1px solid; border-top: 1px solid;">Description </td>
  </tr>        
</thead>
<tbody>
<tr>
    <td style="border-bottom: 1px solid">1</td>
    <td style="border-bottom: 1px solid">Subnet mask</td>
    <td style="border-bottom: 1px solid"> The subnet mask option specifies the 
    client's subnet mask.
    If both the subnet mask and the router option are specified in a DHCP
   reply, the subnet mask option MUST be first.
    </td>
  </tr>
<tr>
    <td style="border-bottom: 1px solid">3 </td>
    <td style="border-bottom: 1px solid">Router</td>
    <td style="border-bottom: 1px solid">The router option specifies a list of 
    IP addresses for routers on the client's subnet.  Routers SHOULD be listed
    in order of preference.</td>
  </tr>
  <tr>
    <td style="border-bottom: 1px solid">6 </td>
    <td style="border-bottom: 1px solid">Domain Name Server</td>
    <td style="border-bottom: 1px solid">The domain name server option specifies 
    a list of Domain Name System name servers available to the client.  Servers
   SHOULD be listed in order of preference.</td>
  </tr>
 <tr>
    <td style="border-bottom: 1px solid">12</td>
    <td style="border-bottom: 1px solid">Host name</td>
    <td style="border-bottom: 1px solid">
    This option specifies the name of the client.  The name may or may
   not be qualified with the local domain name.
    </td>
  </tr>
  <tr>
    <td style="border-bottom: 1px solid">15 </td>
    <td style="border-bottom: 1px solid">Domain Name </td>
    <td style="border-bottom: 1px solid">This option specifies the domain name 
    that client should use when resolving hostnames via the Domain Name System.</td>
  </tr>
  <tr>
    <td style="border-bottom: 1px solid">33 </td>
    <td style="border-bottom: 1px solid">Static Route</td>
    <td style="border-bottom: 1px solid">This option specifies that the client 
    requests for a manually allocated address be assigned.</td>
  </tr>
   <tr>
    <td style="border-bottom: 1px solid">43 </td>
    <td style="border-bottom: 1px solid">Vendor-Specific Information</td>
    <td style="border-bottom: 1px solid">This option specifies that the client 
    requests for vendor specific information.</td>
  </tr>
   <tr>
    <td style="border-bottom: 1px solid">44 </td>
    <td style="border-bottom: 1px solid">NetBIOS over TCP/IP Name Server</td>
    <td style="border-bottom: 1px solid">This option is sent by Microsoft clients. 
     specifies that the client 
    requests for vendor specific information.</td>
  </tr>
   <tr>
    <td style="border-bottom: 1px solid"> 50</td>
    <td style="border-bottom: 1px solid">Requested IP Address</td>
    <td style="border-bottom: 1px solid">
    This option is used in a client request (DHCPDISCOVER) to allow the
   client to request that a particular IP address be assigned. 
   This DHCP option is used by a host computer when it previously connected to the 
   network and would like to reuse its previously assigned IP address.
   New devices do not use this option.
    </td>
  </tr>
   <tr>
    <td style="border-bottom: 1px solid">51 </td>
    <td style="border-bottom: 1px solid">IP Address Lease Time</td>
    <td style="border-bottom: 1px solid">
   This option is used in a client request (DHCPDISCOVER or DHCPREQUEST)
   to allow the client to request a lease time for the IP address.  In a
   server reply (DHCPOFFER), a DHCP server uses this option to specify
   the lease time it is willing to offer.
   The time is in units of seconds, and is specified as a 32-bit
   unsigned integer.
    </td>
  </tr>
   <tr>
    <td style="border-bottom: 1px solid">53 </td>
    <td style="border-bottom: 1px solid"> DHCP Message Type</td>
    <td style="border-bottom: 1px solid">
    This option is used to convey the type of the DHCP message.  The code
   for this option is 53, and its length is 1.  Legal values and message types 
   for this option are:
   <ol>
   	<li>DHCPDISCOVER</li>
    <li>DHCPOFFER   </li>
    <li>DHCPREQUEST </li>
    <li>DHCPDECLINE </li>
    <li>DHCPACK     </li>
    <li>DHCPNAK     </li>
    <li>DHCPRELEASE </li>
    <li>DHCPINFORM  </li>
   </ol>
    </td>
  </tr>
  <tr>
    <td style="border-bottom: 1px solid">54 </td>
    <td style="border-bottom: 1px solid">Server Identifier </td>
    <td style="border-bottom: 1px solid">Used in DHCPOFFER and DHCPREQUEST messages 
    to allow the client to distinguish between lease offers received from 
    different DHCP servers. DHCP clients use the
   contents of the 'server identifier' field as the destination address
   for any DHCP messages unicast to the DHCP server.  DHCP clients also
   indicate which of several lease offers is being accepted by including
   this option in a DHCPREQUEST message.
   The identifier is the IP address of the selected server.
    </td>
  </tr>

  <tr>
    <td style="border-bottom: 1px solid">55 </td>
    <td style="border-bottom: 1px solid"> Parameter Request List</td>
    <td style="border-bottom: 1px solid">
   This option is used by a DHCP client to request values for specified
   configuration parameters.  The list of requested parameters is
   specified as n octets, where each octet is a valid DHCP option code.

   The client MAY list the options in order of preference.  The DHCP
   server is not required to return the options in the requested order,
   but MUST try to insert the requested options in the order requested
   by the client.
    </td>
  </tr>
     <tr>
    <td style="border-bottom: 1px solid"> 56</td>
    <td style="border-bottom: 1px solid">Message</td>
    <td style="border-bottom: 1px solid">
   This option is used by a DHCP server to provide an error message to a
   DHCP client in a DHCPNAK message in the event of a failure. A client
   may use this option in a DHCPDECLINE message to indicate the why the
   client declined the offered parameters.  The message consists of n
   octets of NVT ASCII text, which the client may display on an
   available output device.
    </td>
  </tr>
   <tr>
    <td style="border-bottom: 1px solid">61 </td>
    <td style="border-bottom: 1px solid">Client-identifier</td>
    <td style="border-bottom: 1px solid">
    This option is used by DHCP clients to specify their unique
   identifier.  DHCP servers use this value to index their database of
   address bindings.  This value is expected to be unique for all
   clients in an administrative domain.

   Identifiers SHOULD be treated as opaque objects by DHCP servers.

   The client identifier MAY consist of type-value pairs. 
   For instance, it MAY consist
   of a hardware type and hardware address. In this case the type field
   SHOULD be one of the ARP hardware types.  A
   hardware type of 0 (zero) should be used when the value field
   contains an identifier other than a hardware address (e.g. a fully
   qualified domain name).

   For correct identification of clients, each client's client-
   identifier MUST be unique among the client-identifiers used on the
   subnet to which the client is attached.  Vendors and system
   administrators are responsible for choosing client-identifiers that
   meet this requirement for uniqueness. More often, this value is the MAC address.
   </td>
  </tr>
  <tr>
    <td style="border-bottom: 1px solid">66 </td>
    <td style="border-bottom: 1px solid">TFTP Server Name</td>
    <td style="border-bottom: 1px solid">
    This option is used to identify a TFTP server when the 'sname' field
   in the DHCP header has been used for DHCP options.
    </td>
  </tr>

  <tr>
    <td style="border-bottom: 1px solid">69 </td>
    <td style="border-bottom: 1px solid">SMTP</td>
    <td style="border-bottom: 1px solid">The SMTP server option specifies a list 
    of SMTP servers available to the client.  Servers SHOULD be listed in order 
    of preference.</td>
  </tr>
  <tr>
    <td style="border-bottom: 1px solid">70 </td>
    <td style="border-bottom: 1px solid">POP3</td>
    <td style="border-bottom: 1px solid">
    The POP3 server option specifies a list of POP3 available to the
   client.  Servers SHOULD be listed in order of preference.
    </td>
  </tr>
 <tr>
    <td style="border-bottom: 1px solid">82</td>
    <td style="border-bottom: 1px solid">Relay Agent</td>
    <td style="border-bottom: 1px solid">
    Option 82 feature provides the Cisco IOS Dynamic Host Configuration Protocol 
  (DHCP) server the ability to allocate dynamic IP addresses based on the relay
  information option (option 82) information sent by the relay agent..
    </td>
  </tr>
    <tr>
    <td style="border-bottom: 1px solid">150 </td>
    <td style="border-bottom: 1px solid">TFTP server </td>
    <td style="border-bottom: 1px solid">This option is used to identify a TFTP server when the 'sname' field
   in the DHCP header has been used for DHCP options. This option is usually used 
   by IP Phones to locate the TFTP server from which they can download configurations 
   or update their firmware.
   </td>
  </tr>
</tbody>
</table>
</p>
<p>
The entire list of DHCP options can be obtained from the RFC document defining DHCP.
</p>


<h1>Configuration</h1>
<p>
To enable DHCP services on a router or switch, the DHCP needs to be enabled. This 
is done using the command <code><b>service dhcp</b></code>.
</p>

<h2>Server</h2>
<p>
The server is not bound to any network. It can issue IP addresses for many networks 
if many DHCP pools are configured. DHCP server and relay agent features are enabled 
by default. If disabled, re-enable using the global configuration command <code><b>
service dhcp</b></code>.
</p>
<p>

</p>

<p>
Features include:
<ul>
  <li>network</li>
  <li>default-router</li>
  <li>lease</li> 
  <li>dns-server</li>
  <li>Options:
  TFTP servers can be specified as an option. This is important particularly for 
  IP phones. This value is in digits.
  </li>
</ul>
</p>

<p>
<ol>
  <li><b>Configure the range of excluded IP addresses:</b> 
  Before configuring the DHCP features, it is best to first configure addresses to
be excluded from being assigned to clients. These are usually addresses reserved 
for hosts to receive addresses through static configuration such as network devices, 
servers. 
To exclude a range 
addresses from being assigned to clients, use the command <code><b>
ip dhcp excluded-address &lt;low-ip-address&gt; &lt;high-ip-address&gt;</b></code>.

<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
DHCP_SERVER(config)#<b>ip dhcp excluded-address 192.168.1.2 192.168.1.20</b>
</code></div></p>
  <p>
Note that a router cannot issue an IP address for one of its interfaces even 
if that address is not included in the range of the excluded addresses. This 
command can be entered multiple times.
</p>
  </li>
  <li>
<b>Define the DHCP address pool:</b> 
A DHCP Pool is a range of addresses or scope that the DHCP server will use for assigning 
IP addresses to clients. When a client sends out a DHCPDiscover message, the 
server will pick an IP address from the pool (usually the lowest available address)
and offer it to the client. The command to define the DHCP address pool is 
<code><b>ip dhcp pool &lt;pool-name&gt;</b></code>.
  
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>

DHCP_SERVER(config)#<b>ip dhcp pool DHCP_POOL_10.3.1.0/24</b>                       <br>
DHCP_SERVER(dhcp-config)#<b>network 10.3.1.0 255.255.255.0</b>                      <br>
DHCP_SERVER(dhcp-config)#<b>default-router 10.3.1.1 10.3.1.2</b>                    <br>
DHCP_SERVER(dhcp-config)#<b>lease 1 12 0</b>                                        <br>
</code></div></p>

<p>
<ul>
<li>The DHCP pool has been defined using the name DHCP_POOL_10.3.1.0/24.</li>
 <li><b>network:</b> The subnet is defined here alongside the subnet mask. 
 Here, it is 10.3.1.0 with a subnetwork mask of 255.255.255.0</li>
 <li><b>default-router:</b> defines the default gateway(s) for the subnet. More 
 than one default gateway can be defined. Here, it is 10.3.1.1 and 10.3.1.2</li>
 <li><b>lease:</b> Defines the lease. By default it is set to 1 day (24 hours). 
 Here, it is configured for one day and twelve hours and zero minutes (36 hours)</li>
 <li><b>dns-server:</b> the list of DNS servers with most preferred servers listed 
 first.</li>
</ul>
</p>
<p>
Additional DHCP pool configuration options are available:
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
DHCP_SERVER(dhcp-config)#<b>?</b>                                            <br>
DHCP pool configuration commands:                                            <br>
&nbsp;&nbsp;accounting&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Send Accounting Start/Stop messages                   <br>
&nbsp;&nbsp;bootfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Boot file name                                        <br>
&nbsp;&nbsp;class&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Specify a DHCP class                                  <br>
&nbsp;&nbsp;client-identifier&nbsp;&nbsp;&nbsp;&nbsp;Client identifier                                     <br>
&nbsp;&nbsp;client-name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Client name                                           <br>
&nbsp;&nbsp;default-router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Default routers                                       <br>
&nbsp;&nbsp;dns-server&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DNS servers                                           <br>
&nbsp;&nbsp;domain-name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Domain name                                           <br>
&nbsp;&nbsp;exit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Exit from DHCP pool configuration mode                <br>
&nbsp;&nbsp;hardware-address&nbsp;&nbsp;&nbsp;&nbsp; Client hardware address                               <br>
&nbsp;&nbsp;host&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Client IP address and mask                            <br>
&nbsp;&nbsp;import&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Programatically importing DHCP option parameters      <br>
&nbsp;&nbsp;lease&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Address lease time                                    <br>
&nbsp;&nbsp;netbios-name-server&nbsp;&nbsp;NetBIOS (WINS) name servers                           <br>
&nbsp;&nbsp;netbios-node-type&nbsp;&nbsp;&nbsp;&nbsp;NetBIOS node type                                     <br>
&nbsp;&nbsp;network&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Network number and mask                               <br>
&nbsp;&nbsp;next-server&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Next server in boot process                           <br>
&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Negate a command or set its defaults                  <br>
&nbsp;&nbsp;odap&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Configure ODAP                                        <br>
&nbsp;&nbsp;option&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Raw DHCP options                                      <br>
&nbsp;&nbsp;origin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Configure the origin of the pool                      <br>
&nbsp;&nbsp;relay&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Function as a DHCP relay                              <br>
&nbsp;&nbsp;remember&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remember released bindings                            <br>
&nbsp;&nbsp;renew&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Configure renewal policy                              <br>
&nbsp;&nbsp;server&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Configure the server ID option value                  <br>
&nbsp;&nbsp;subnet&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Subnet allocation commands                            <br>
&nbsp;&nbsp;update&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Dynamic updates                                       <br>
&nbsp;&nbsp;utilization&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Configure various utilization parameters              <br>
&nbsp;&nbsp;vrf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Associate this pool with a VRF                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                     <br>
</code></div>
</p>
</li>
<li>Configure any DHCP options using the command <code><b>option &lt;option-code&gt; 
[ascii | hex | instance | ip] &lt;value&gt;</b></code>.

<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
DHCP_SERVER(dhcp-config)#<b>option 15 ? </b>                                        <br>
&nbsp;&nbsp;ascii&nbsp;&nbsp;&nbsp;&nbsp; Data is an NVT ASCII string                                      <br>
&nbsp;&nbsp;hex&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Data is a hexadecimal string                                     <br>
&nbsp;&nbsp;instance&nbsp;&nbsp;Specify the option instance                                      <br>
&nbsp;&nbsp;ip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Data is one or more IP addresses                                 <br>
DHCP_SERVER(dhcp-config)#<b>option 15 ascii emmanueltoko.blogspot.com</b>           <br>
DHCP_SERVER(dhcp-config)#<b>dns-server 8.8.4.4 8.8.8.8</b>                          <br>
DHCP_SERVER(dhcp-config)#<b>exit</b>                                                <br>
DHCP_SERVER(config)#
</code></div>
</p>
<p>
<ul>
 <li><b>option:</b> 15 is the DHCP option for domain name. Here it is 
 emmanueltoko.blogspot.com. The domain name could have easily been entered using 
 the more traditional command <code><b>domain-name emmanueltoko.blogspot.com</b></code>
 </li>
</ul>
</p>
  </li>
  <li>
     <b>Manually Assigned Addresses:</b> can be issused to specified clients 
     by mapping a particular address to the client identifier which, by default, 
     is the MAC address.
     <p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
  DHCP_SERVER(dhcp-config)#<b>address 10.3.1.2 hardware-address 0000.deaf.beaf</b>
  </code></div>
     </p>
  </li>
</ol>
</p>

<h3>DHCP Server Pinging an address before Offer to Client</h3>
<p>
Before a DHCP server offers an IP address to a client, the server first pings 
the IP address to confirm that no other host is using that address. By default, the 
address is pinged twice before being issued. However, you can configure the 
number of times that a DHCP server pings an address before it offers the address 
using the command;
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
DHCP_SERVER(config)#<b>ip dhcp ping packets 5</b>
</code></div>
</p>
<p>
Here, the value five (5) has been entered indicating that the DHCP server should 
ping the IP address five times before offering the address in a DHCPOFFER message 
to the client. 
Setting the ping number to zero deactivates the ability of the DHCP server to
ping an IP address before offering it in a DHCPOFFER message. Take note that 
this may compromise the ability of a DHCP server from detecting IP address 
conflicts using the ping method.

If a host exists on the network with an IP address that the DHCP server intends 
to offer to a client, the server will record an IP address conflict and how it 
determined the conflict. In this case the conflict will the determined by pinging.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
DHCP_SERVER#  <br>
*Jan 23 21:50:17.155: %DHCPD-4-PING_CONFLICT: DHCP address conflict:  server pinged 10.1.13.1.<br>
DHCP_SERVER#<b>show ip dhcp conflict</b><br>
IP address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Detection method&nbsp;&nbsp; Detection time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VRF        <br>
10.1.13.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ping&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Jan 23 2021 09:50 PM&nbsp;&nbsp;&nbsp;&nbsp;           <br>
DHCP_SERVER#
</code></div>
</p>

<h3>Ping Timeout</h3>
<p>
The default timeout of DHCP servers is 500ms (milliseconds). To change 
this value, issue the following command in global configuration mode;
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
DHCP_SERVER(config)<b>#ip dhcp ping timeout 200</b>
</code></div>
</p>
<p>
Note that setting a higher value for ping timeout and number of packets increases
the amount of time that a client takes to receive an IP address through DHCP.
</p>

<h2>Client</h2>
<p>
By default, most host devices such as computers, and phones are set to receive 
network configuration parameters through DHCP. 
</p>
<p>
Usually, network devices such as routers, switches and servers have their network 
configuration done manually. However, if circumstances require that a router 
or switch receive network configuration parameters through DHCP, the following 
command makes this possible:
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
Router(config)#<b>interface gigabitEthernet0/0</b><br>
Router(config-if)<b>ip address dhcp</b>
</code></div>
</p>
<p>
After receiving network configuration information, DHCP installs a static 
default route in the routing table. This route has a default administrative 
distance of 254 which is the worst acceptable administrative distance.
</p>
<p>

</p>

<h2>Relay</h2>
<p>
Relay agents are used to forward requests and replies between clients and servers 
when they are not in the same subnet. 
DHCP messages exchanged between the DHCP relay and the DHCP server are unicast.
Relay agent supports the use of unnumbered 
interfaces through adding a static host route.
To configure a local router as a DHCP relay, use the following command;
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
Router(config)#<b>interface gigabitEthernet0/0</b><br>
Router(config-if)#<b>ip helper-address 10.1.14.2</b>
</code></div>
</p>
The IP address entered here is the address of the dhcp server. The <code><b>ip helper-address</b></code> 
command 
is entered in the interface configuration mode of the interface connected to the 
subnet that contains the DHCP clients. This is the interface that will receive 
the DHCPDiscover messages from the clients.
</p>
<p>
In addition to the default route, DHCP installs a host static route of the 
remote DHCP server:
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
  R4#<b>show ip route</b>                                                             <br>          
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP      <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area          <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2          <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; E1 - OSPF external type 1, E2 - OSPF external type 2                    <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2   <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ia - IS-IS inter area, * - candidate default, U - per-user static route <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP       <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + - replicated route, % - next hop override                             <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                   <br>        
Gateway of last resort is 192.168.34.1 to network 0.0.0.0                      <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                   <br>        
S*&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0/0 [254/0] via 192.168.34.1                                       <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.23.0/32 is subnetted, 1 subnets                                  <br>        
S&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.23.1 [254/0] via 192.168.34.1, GigabitEthernet0/0             <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.34.0/24 is variably subnetted, 2 subnets, 2 masks                <br>        
C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.34.0/24 is directly connected, GigabitEthernet0/0             <br>        
L&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.34.100/32 is directly connected, GigabitEthernet0/0           <br>        
R4#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                  <br>        
R4#<b>show ip route 0.0.0.0</b>                                                       <br>        
Routing entry for 0.0.0.0/0, supernet                                          <br>        
&nbsp;&nbsp;Known via "static", distance 254, metric 0, candidate default path           <br>        
&nbsp;&nbsp;Routing Descriptor Blocks:                                                   <br>        
&nbsp;&nbsp;* 192.168.34.1                                                               <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Route metric is 0, traffic share count is 1                              <br>        
R4#<b>show ip route 192.168.23.1</b>                                                  <br>        
Routing entry for 192.168.23.1/32                                              <br>        
&nbsp;&nbsp;Known via "static", distance 254, metric 0                                   <br>        
&nbsp;&nbsp;Routing Descriptor Blocks:                                                   <br>        
&nbsp;&nbsp;* 192.168.34.1, via GigabitEthernet0/0                                       <br>        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Route metric is 0, traffic share count is 1                              <br>        
R4#                                                                                     
  
  </code></div>
</p>

<h2>Database Agents</h2>
<p>
A database agent is any host for example a (T)FTP server, RCP (Remote Copy Protocol)
server that stores the DHCP bindings database. It could also be a storage media 
device or partition on the DHCP server.
It is recommended by Cisco for a DHCP database agent to be configured. The purpose
of the DHCP database agent is to store the recording of DHCP address conflicts 
so that if the Cisco IOS device (router or switch) reboots, the DHCP conflict logs 
cannot be lost. If these are lost, some addresses run the risk of being removed
from the pool and yet are not assigned to a client. This leads to waste of addresses.
To entirely disable a DHCP address conflict logging, run the command;
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
DHCP_SERVER(config)#<b>no ip dhcp conflict logging</b>
</code></div>
</p>
<p>
To export the DHCP bindings database to a database agent, enter the following command;
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
DHCP_SERVER(config)#<b>ip dhcp database &lt;ip-address&gt;</b>
</code></div>
</p>

<h1 id="OPTIMIZATION">DHCP Optimization</h1>
<p>
In order to optimise DHCP operation, it may be advisable to carryout the following 
configurations:
<ul>
  <li>In an Ethernet network (wired) with fewer than 254 hosts, the default 
  number of pings is OK. It may be possible to decrease the ping timeout value 
  if the DHCP server is in the same subnet as the host, or less than three hops 
  away. Timeout values of 70ms are OK for an entirely wired path from client to 
  server with no more than 5 hops.</li>
  <li>In a wireless configuration, the timeout value can be decreased to 200ms.</li>
  <li>In a large network with several hosts (more than 254) having static addresses, 
  increase the number of pings to four.</li>
  <li>Increasing the switch MAC address holdtime may also help improve DHCP 
  performance. This may eliminate the need for ARP when a client initially 
  connects to the network.</li>
</ul>
</p>
<h2>Import Configuration Parameters</h2>
<p>
To import DHCP options into a local DHCP server database from a remote/central 
DHCP server, use the following command;
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
DHCP_SERVER(config)#<b>ip dhcp pool DHCP_POOL</b><br>
DHCP_SERVER(dhcp-config)#<b>network 192.168.1.0 255.255.255.0</b><br>
DHCP_SERVER(dhcp-config)#<b>import all</b>
</code></div>
</p>


<h2>Monitoring and Maintaining a DHCP Server</h2>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
Router#<b>clear ip dhcp binding &lt;ip-address | *&gt;</b><br>
Router#<b>clear ip dhcp conflict </b><br>
Router#<b>clear ip dhcp server statistics</b><br>
</code></div>

</p>
To remove a route from the routing table added by a DHCP server or DHCP relay 
agent or clients using unnumbered interfaces:
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
Router#<b>clear ip route &lt;vrf-name&gt; dhcp &lt;ip_address&gt;</b>
</code></div>
</p>

<h1 id="VERIFICATION">Verification</h1>
<p>

</p>


<h2><code>show ip dhcp binding &lt;ip-address&gt;</code></h2>
<p>
Displays information about the allocated IP addresses and the lease period.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
R1#<b>show ip dhcp binding</b><br>
Bindings from all pools not associated with VRF:                               <br>
IP address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Client-ID/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lease expiration&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hardware address/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          <br>
172.16.1.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0063.6973.636f.2d63.&nbsp;&nbsp;&nbsp;&nbsp;Apr 24 2023 09:45 PM&nbsp;&nbsp;&nbsp;&nbsp;Automatic  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6130.382e.3036.3963.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2e30.3030.382d.4769.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;302f.30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          <br>
172.17.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0063.6973.636f.2d63.&nbsp;&nbsp;&nbsp;&nbsp;Apr 24 2023 09:53 PM&nbsp;&nbsp;&nbsp;&nbsp;Automatic  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6130.342e.3036.3236.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2e30.3030.382d.4769.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;302f.30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          <br>
172.30.1.26&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0063.6973.636f.2d63.&nbsp;&nbsp;&nbsp;&nbsp;Apr 24 2023 09:15 PM&nbsp;&nbsp;&nbsp;&nbsp;Automatic  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6130.372e.3036.3864.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2e30.3030.382d.4769.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;302f.30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          <br>
R1#
</code></div></p>

<h2><code>show ip dhcp database</code></h2> 
<p>
Displays details of configured DHCP database agents.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
R1#<b>show ip dhcp database</b><br>
URL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 172.17.1.1<br>
Read&nbsp;&nbsp;&nbsp;&nbsp; : Never     <br>
Written&nbsp;&nbsp;: Never     <br>
Status&nbsp;&nbsp; : Last write failed because of a protocol error.<br>
Delay&nbsp;&nbsp;&nbsp;&nbsp;: 300 seconds <br>
Timeout&nbsp;&nbsp;: 300 seconds <br>
Failures : 1           <br>
Successes: 0           <br>
</code></div>
</p>

<h2><code>show ip dhcp server statistics</code></h2>
<p>
Number of messages exchanged using DHCP. 
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
R1#<p>show ip dhcp server statistics</p<br>    
Memory usage&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 52771             <br>
Address pools&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3                 <br>
Database agents&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                 <br>
Automatic bindings&nbsp;&nbsp; 3                 <br>
Manual bindings&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                 <br>
Expired bindings&nbsp;&nbsp;&nbsp;&nbsp; 0                 <br>
Malformed messages&nbsp;&nbsp; 0                 <br>
Secure arp entries&nbsp;&nbsp; 0                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                 <br>
Message&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Received          <br>
BOOTREQUEST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                 <br>
DHCPDISCOVER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 72                <br>
DHCPREQUEST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3                 <br>
DHCPDECLINE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                 <br>
DHCPRELEASE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                 <br>
DHCPINFORM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                 <br>
Message&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sent              <br>
BOOTREPLY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                 <br>
DHCPOFFER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3                 <br>
DHCPACK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3                 <br>
DHCPNAK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                 <br>
R1#                                  
</code></div>
</p>

<h2><code>show ip dhcp conflict</code></h2>
<p>
Displays a list of detected IP address conflicts detected through pings.
</p>


<h2><code>show ip dhcp pool</code></h2>
<p>
Displays configured DHCP pools and their respective info.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
R1#<b>show ip dhcp pool</b><br>                                                        
                                                                             <br>
Pool POOL_172.30.1.0/24 :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Utilization mark (high/low)&nbsp;&nbsp;&nbsp;&nbsp;: 100 / 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Subnet size (first/next)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0 / 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Total addresses&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Leased addresses&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Pending event&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             <br>
 1 subnet is currently in the pool :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             <br>
 Current index&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IP address range&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Leased addresses   <br>
 172.30.1.27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 172.30.1.254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             <br>
Pool POOL_172.16.1.0/24 :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Utilization mark (high/low)&nbsp;&nbsp;&nbsp;&nbsp;: 100 / 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Subnet size (first/next)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0 / 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Total addresses&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Leased addresses&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Pending event&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             <br>
 1 subnet is currently in the pool :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             <br>
 Current index&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IP address range&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Leased addresses   <br>
 172.16.1.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 172.16.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 172.16.1.254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             <br>
Pool 172.17.1.0/23 :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             <br>
 Utilization mark (high/low)&nbsp;&nbsp;&nbsp;&nbsp;: 100 / 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Subnet size (first/next)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0 / 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Total addresses&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 510&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Leased addresses&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
 Pending event&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             <br>
 1 subnet is currently in the pool :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             <br>
 Current index&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IP address range&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Leased addresses   <br>
 172.17.0.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 172.17.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 172.17.1.254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;             <br>
R1#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           
</code></div></p>

<h2><code>debug ip dhcp server events</code></h2>
<p>
Debugging of messages involving activities of a DHCP server from sending messages, 
actions taken and response to received messages.
</p>

<h2><code>debug ip dhcp server packet</code></h2>
<p>
Debugging of DHCP messages sent and received. 
</p>
<p>
The following output is from the commands <code><b>debug ip dhcp server events</b></code> 
and <code><b>debug ip dhcp server events</b></code> :
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
*Aug&nbsp;&nbsp;6 13:03:53.111: DHCPD: checking for expired leases.            <br>
*Aug&nbsp;&nbsp;6 13:04:55.987: DHCPD: client's VPN is .                       <br>
*Aug&nbsp;&nbsp;6 13:04:55.987: DHCPD: No option 125                           <br>
*Aug&nbsp;&nbsp;6 13:04:55.987: DHCPD: Sending notification of DISCOVER:       <br>
*Aug&nbsp;&nbsp;6 13:04:55.991:&nbsp;&nbsp; DHCPD: htype 1 chaddr ca04.0672.0008         <br>
*Aug&nbsp;&nbsp;6 13:04:55.991:&nbsp;&nbsp; DHCPD: remote id 020a0000c0a8170110000000    <br>
*Aug&nbsp;&nbsp;6 13:04:55.991:&nbsp;&nbsp; DHCPD: circuit id 00000000                   <br>
*Aug&nbsp;&nbsp;6 13:04:55.995: DHCPD: DHCPDISCOVER received from client 0063.6973.636f.2d63.6130.342e.3036.3732.2e30.3030.382d.4769.302f.30 through relay 192.168.34.1.*Aug  6 13:04:55.995: DHCPD: Seeing if there is an internally specified pool class:<br>
*Aug&nbsp;&nbsp;6 13:04:55.999:&nbsp;&nbsp; DHCPD: htype 1 chaddr ca04.0672.0008                                                                                    <br>
*Aug&nbsp;&nbsp;6 13:04:55.999:&nbsp;&nbsp; DHCPD: remote id 020a0000c0a8170110000000                                                                               <br>
*Aug&nbsp;&nbsp;6 13:04:55.999:&nbsp;&nbsp; DHCPD: circuit id 00000000                                                                                              <br>
*Aug&nbsp;&nbsp;6 13:04:56.003: DHCPD: Allocate an address without class information (192.168.34.0)                                                       <br>
*Aug&nbsp;&nbsp;6 13:04:56.007: DHCPD: Allocated binding 692D215C                                                                                         <br>
*Aug&nbsp;&nbsp;6 13:04:56.007: DHCPD: Adding binding to radix tree (192.168.34.1)                                                                        <br>
*Aug&nbsp;&nbsp;6 13:04:56.011: DHCPD: Adding binding to hash tree                                                                                        <br>
*Aug&nbsp;&nbsp;6 13:04:56.011: DHCPD: assigned IP address 192.168.34.1 to client 0063.6973.636f.2d63.6130.342e.3036.3732.2e30.3030.382d.4769.302f.30.    <br>
*Aug&nbsp;&nbsp;6 13:04:56.011: DHCPD: Saving workspace (ID=0xD8000004)                                                                                   <br>
*Aug&nbsp;&nbsp;6 13:04:56.063: %DHCPD-4-PING_CONFLICT: DHCP address conflict:  server pinged 192.168.34.1.                                               <br>
*Aug&nbsp;&nbsp;6 13:04:56.063: DHCPD: removing ARP entry (192.168.34.1 vrf default).                                                                     <br>
*Aug&nbsp;&nbsp;6 13:04:56.067: DHCPD: returned 192.168.34.1 to address pool DHCP_192.168.34.0.                                                           <br>
*Aug&nbsp;&nbsp;6 13:04:56.071: DHCPD: Reprocessing saved workspace (ID=0xD8000004)                                                                       <br>
*Aug&nbsp;&nbsp;6 13:04:56.071: DHCPD: Sending notification of DISCOVER:                                                                                  <br>
*Aug&nbsp;&nbsp;6 13:04:56.075:&nbsp;&nbsp; DHCPD: htype 1 chaddr ca04.0672.0008                                                                                    <br>
*Aug&nbsp;&nbsp;6 13:04:56.075:&nbsp;&nbsp; DHCPD: remote id 020a0000c0a8170110000000                                                                               <br>
*Aug&nbsp;&nbsp;6 13:04:56.075:&nbsp;&nbsp; DHCPD: circuit id 00000000                                                                                              <br>
*Aug&nbsp;&nbsp;6 13:04:56.079: DHCPD: DHCPDISCOVER received from client 0063.6973.636f.2d63.6130.342e.3036.3732.2e30.3030.382d.4769.302f.30 through relay 192.168.34.1.*Aug  6 13:04:56.079: DHCPD: Seeing if there is an internally specified pool class:<br>
*Aug&nbsp;&nbsp;6 13:04:56.079:&nbsp;&nbsp; DHCPD: htype 1 chaddr ca04.0672.0008                                                                                     <br>
*Aug&nbsp;&nbsp;6 13:04:56.079:&nbsp;&nbsp; DHCPD: remote id 020a0000c0a8170110000000                                                                                <br>
*Aug&nbsp;&nbsp;6 13:04:56.079:&nbsp;&nbsp; DHCPD: circuit id 00000000                                                                                               <br>
*Aug&nbsp;&nbsp;6 13:04:56.079: DHCPD: Allocate an address without class information (192.168.34.0)                                                        <br>
*Aug&nbsp;&nbsp;6 13:04:56.079: DHCPD: Allocated binding 692D215C                                                                                          <br>
*Aug&nbsp;&nbsp;6 13:04:56.079: DHCPD: Adding binding to radix tree (192.168.34.100)                                                                       <br>
*Aug&nbsp;&nbsp;6 13:04:56.079: DHCPD: Adding binding to hash tree                                                                                         <br>
*Aug&nbsp;&nbsp;6 13:04:56.079: DHCPD: assigned IP address 192.168.34.100 to client 0063.6973.636f.2d63.6130.342e.3036.3732.2e30.3030.382d.4769.302f.30.   <br>
*Aug&nbsp;&nbsp;6 13:04:58.383: DHCPD: Reprocessing saved workspace (ID=0xD8000004)                                                                        <br>
*Aug&nbsp;&nbsp;6 13:04:58.387: DHCPD: Sending notification of DISCOVER:                                                                                   <br>
*Aug&nbsp;&nbsp;6 13:04:58.387:&nbsp;&nbsp; DHCPD: htype 1 chaddr ca04.0672.0008                                                                                     <br>
*Aug&nbsp;&nbsp;6 13:04:58.387:&nbsp;&nbsp; DHCPD: remote id 020a0000c0a8170110000000                                                                                <br>
*Aug&nbsp;&nbsp;6 13:04:58.387:&nbsp;&nbsp; DHCPD: circuit id 00000000                                                                                               <br>
*Aug&nbsp;&nbsp;6 13:04:58.387: DHCPD: DHCPDISCOVER received from client 0063.6973.636f.2d63.6130.342e.3036.3732.2e30.3030.382d.4769.302f.30 through relay 192.168.34.1.*Aug  6 13:04:58.387: DHCPD: Seeing if there is an internally specified pool class:<br>
*Aug&nbsp;&nbsp;6 13:04:58.391:&nbsp;&nbsp; DHCPD: htype 1 chaddr ca04.0672.0008                                                                                      <br>
*Aug&nbsp;&nbsp;6 13:04:58.391:&nbsp;&nbsp; DHCPD: remote id 020a0000c0a8170110000000                                                                                 <br>
*Aug&nbsp;&nbsp;6 13:04:58.391:&nbsp;&nbsp; DHCPD: circuit id 00000000                                                                                                <br>
*Aug&nbsp;&nbsp;6 13:04:58.391: DHCPD: Sending DHCPOFFER to client 0063.6973.636f.2d63.6130.342e.3036.3732.2e30.3030.382d.4769.302f.30 (192.168.34.100).    <br>
*Aug&nbsp;&nbsp;6 13:04:58.391: DHCPD: no option 125                                                                                                        <br>
*Aug&nbsp;&nbsp;6 13:04:58.391: DHCPD: unicasting BOOTREPLY for client ca04.0672.0008 to relay 192.168.34.1.                                                <br>
*Aug&nbsp;&nbsp;6 13:04:58.443: DHCPD: New packet workspace 0x6B212060 (ID=0xA9000005)                                                                      <br>
*Aug&nbsp;&nbsp;6 13:04:58.443: DHCPD: client's VPN is .                                                                                                    <br>
*Aug&nbsp;&nbsp;6 13:04:58.447: DHCPD: No option 125                                                                                                        <br>
*Aug&nbsp;&nbsp;6 13:04:58.447: DHCPD: DHCPREQUEST received from client 0063.6973.636f.2d63.6130.342e.3036.3732.2e30.3030.382d.4769.302f.30.                <br>
*Aug&nbsp;&nbsp;6 13:04:58.451: DHCPD: Sending notification of ASSIGNMENT:                                                                                  <br>
*Aug&nbsp;&nbsp;6 13:04:58.451:&nbsp;&nbsp;DHCPD: address 192.168.34.100 mask 255.255.255.0                                                                           <br>
*Aug&nbsp;&nbsp;6 13:04:58.451:&nbsp;&nbsp; DHCPD: htype 1 chaddr ca04.0672.0008                                                                                      <br>
*Aug&nbsp;&nbsp;6 13:04:58.455:&nbsp;&nbsp; DHCPD: lease time remaining (secs) = 86400                                                                                <br>
*Aug&nbsp;&nbsp;6 13:04:58.455: DHCPD: Appending default domain from pool                                                                                   <br>
*Aug&nbsp;&nbsp;6 13:04:58.455: DHCPD: Using hostname 'R4.emmanueltoko.wordpress.com.' for dynamic update (from hostname option)                            <br>
*Aug&nbsp;&nbsp;6 13:04:58.459: DHCPD: Sending DHCPACK to client 0063.6973.636f.2d63.6130.342e.3036.3732.2e30.3030.382d.4769.302f.30 (192.168.34.100).      <br>
*Aug&nbsp;&nbsp;6 13:04:58.463: DHCPD: no option 125                                                                                                        <br>
*Aug&nbsp;&nbsp;6 13:04:58.463: DHCPD: unicasting BOOTREPLY for client ca04.0672.0008 to relay 192.168.34.1.                                                <br>
*Aug&nbsp;&nbsp;6 13:05:53.111: DHCPD: checking for expired leases.                                                                                         <br>
*Aug&nbsp;&nbsp;6 13:07:53.111: DHCPD: checking for expired leases.                                                                                          <br>
*Aug&nbsp;&nbsp;6 13:09:53.111: DHCPD: checking for expired leases.                                                                                          <br>
*Aug&nbsp;&nbsp;6 13:11:53.111: DHCPD: checking for expired leases.                                                                                          <br>
</code></div>
</p>


<h2><code>show dhcp lease</code></h2>
<p>
Verify DHCP IP parameters on the client.
</p>

<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
  <code>
R8#<b>show dhcp lease</b><br>
Temp IP addr: 172.16.1.2&nbsp;&nbsp;for peer on Interface: GigabitEthernet0/0 <br>
Temp&nbsp;&nbsp;sub net mask: 255.255.255.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           <br>
&nbsp;&nbsp; DHCP Lease server: 172.16.1.1, state: 5 Bound&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
&nbsp;&nbsp; DHCP transaction id: 616&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           <br>
&nbsp;&nbsp; Lease: 86400 secs,&nbsp;&nbsp;Renewal: 43200 secs,&nbsp;&nbsp;Rebind: 75600 secs     <br>
&nbsp;&nbsp; Next timer fires after: 11:30:58&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           <br>
&nbsp;&nbsp; Retry count: 0&nbsp;&nbsp; Client-ID: cisco-ca08.069c.0008-Gi0/0           <br>
&nbsp;&nbsp; Client-ID hex dump: 636973636F2D636130382E303639632E&nbsp;&nbsp;           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 303030382D4769302F30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           <br>
&nbsp;&nbsp; Hostname: R8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           <br>
R8#
</code></div></p>

<h2><code>show ip route dhcp &lt;ip-address&gt;</code></h2>
Router#show ip route <vrf name> dhcp <ip_address>

<h1 id="TROUBLESHOOTING">Troubleshooting</h1>
<p>
Routers, by default, do not forward broadcasts.
</p>
<p>
<ul>
  <li>DHCP pool out of addresses: expand the scope of addresses or purge the old 
  leases. Issue shorter releases.</li>
  <li>Misconfiguration of DHCP server options or other features.</li>
  <li>Duplicate addresses</li>
  <li>Redundant DHCP services not communicating/coordinating the issue of addresses 
  resulting in issuance of overlapping addresses</li>
  <li>"Pull" nature of DHCP: DHCP server cannot initiate a change on the client
  if a problem is detected.</li>
  <li>Interface not configured with IP address in DHCP Pool. IP addresses should 
  be in the pool.</li>
  <li>DHCP snooping may be blocking messages.</li>
</ul>
</p>
<p>
IP address conflict: <code><b>clear ip dhcp conflict *</b></code>.
</p>

