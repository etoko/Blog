<!--<h1>Securing DMVPN Tunnels With IPSec, IKEv1 or IKEv2</h1> -->

<h1>Introduction and Overview</h1>
<p>
In unencrypted DMVPN packets, the original packets have GRE flags added to them, and then the new GRE
IP header is added for routing the packets through the transport (underlay) network. 
The GRE IP header adds an extra 20 bytes of overhead, and the GRE flags add an 
extra 4 bytes of overhead. These packets use the protocol field of GRE (47).
By default, GRE has no in-built security features to secure the data transiting 
the tunnel. IPSec is used to provide encryption, data integrity, replay protection 
features to GRE tunnels.
</p>
<p>
IPSec provides origin authentication, data confidentiality, data integrity, 
replay detection, periodic rekey, perfect forward secrecy.
IPSec security architecture is composed of the following;
<ul>
    <li>Security Protocols</li>
    <li>Security Associations</li>
    <li>Key Management</li>
</ul>
</p>
<h1>Security Protocols</h1>
<p>
Security protocols can be used individually or in combination. They include;
<ol type="a">
 <li><b>Authentication Header (AH):</b> AH provides data integrity, authentication, 
 replay protection. AH uses IP protocol number 51.</li>
 <li><b>Encapsulating Security Payload (ESP):</b> ESP provides data confidentiality, integrity, 
     authentication and replay protection. ESP uses IP protocol number 50.</li>
</ol>

<h1>Key Management</h1>
<p>
Internet Key Exchange (IKE) negotiates the IPSec security associations (SAs). 
This process requires that the IPSec systems first authenticate themselves to each
other and establish ISAKMP (IKE) shared keys. IPSec uses IKEv2 by default. IKEv2 
introduced Extensible Authentication Protocol (EAP) with reduction of bandwidth 
consumption, network address translation (NAT) and ability to detect whether a 
tunnel is still alive.
</p>

<h1>Security Associations</h1>
<p>
A security association (SA) is a relationship between two or more entities that
describes how the entities will use security services to communicate securely.
</p>
<p>
Security Associations (SA) contain agreed upon security parameters. The two main 
security associations that will be used by DMVPN to secure traffic are IKE SA and 
IPSec SA:
<ul>
 <li><b>IKE SA:</b> used for control plane functions like IPSec key management 
 and management of IPSec SAs.</li>
 <li><b>IPSec SA:</b> used for data plane functions to secure data transmitted 
 between two different sites. 
 IPSec SAs are unidirectional and require at least two IPSec SAs (one for inbound 
 traffic and another for outbound traffic) for a secure connection to a DMVPN peer.
 
 </li>
</ul>
There can only be one IKE SA between end point devices but multiple IPSec SAs 
can be established between the same two endpoint devices. 
</p>

<h1>IPSec DMVPN Tunnel Protection Modes</h1>
<p>
Traditional IPSec provides two modes of packet protection; tunnel and transport:
<ol>
    <li><b>Tunnel mode:</b> the entire original packet is encrypted and a new set
    of IPSec headers is added. For encrypted DMVPN packets that use ESP tunnel 
    mode, the original packets have the GRE flags added to them, and then the 
    new GRE IP header is added for routing the packets on the transport (underlay)
    network. That portion of the packets is encrypted, a signature for the encrypted 
    payload is added. Then a new IPSec IP header is added for routing the packets 
    on the transport (underlay) network. The GRE IP header adds an extra 20 bytes 
    of overhead, the GRE flags add an extra 4 bytes of overhead, the IPsec IP 
    header adds an extra 20 bytes of overhead, and depending on the encryption 
    mechanism, a varying amount of additional bytes are added for the encrypted signature.
    <!--
    <p>
    Tunnel mode can use AH or ESP as the protection suite.
    </p>
    -->
    <p>
    It is important to note that the use of IPsec tunnel mode for DMVPN networks
    does not add any perceived value and adds 20 bytes of overhead. It is 
    recommended that transport mode should be used for encrypted DMVPN tunnels.
    </p>
    <p>
    Additionally, the header added when tunnel is configured is redundant due to 
    the already existing GRE header.
    </p>
    </li>
    
    <li><b>Transport mode:</b> In this mode, only the packet payload is encrypted.
    The GRE header is maintained. 
    In this mode, the packet is routed based on the original IP headers. For 
    encrypted DMVPN packets that use ESP transport mode, the original packets have
    the generic routing encapsulation (GRE) flags added to them, and then that 
    portion of the packets is encrypted. A signature for the encrypted payload 
    is added, and then the GRE IP header is added for routing the packets on the 
    transport (underlay) network. The GRE IP header adds an extra 20 bytes of 
    overhead, the GRE flags add an extra 4 bytes of overhead, and depending on 
    the encryption mechanism, a varying amount of additional bytes are added for
    the encrypted signature. 
    
    </li>
    
</ol>

<h1>DMVPN Tunnel Protection using IPSec</h1>
<p>
Enabling IPsec protection on a DMVPN network requires that all devices enable IPsec 
protection. If some routers have IPsec enabled and others do not, devices will not
be able to establish a connection on the tunnel interfaces with each other.
</p>
<p>
Key management and IPSec parameter negotiation is implemented using IKEv1 or IKEv2.
</p>


<h2>IKEv1</h2>
<p>
Originally DMVPN tunnel protection was provided by IPSec IKEv1. 
To enable DMVPN tunnel protection using IPsec static pre-shared keys involves 
the creation of the following: 
<ol>
 <li>ISAKMP policy</li>
 <li>ISAKMP key and addresses of remote hosts.</li>
 <li>IPSec transform set</li>
 <li>IPSec profile</li>
</ol>
</p>

<p>
The configuration of 
DMVPN tunnel protection using DMVPN follows:
</p>

<h3>Step 1: Create the IKEv1 policy:</h3>
<p>
This is used for phase 1 negotiations (control-plane) in IPsec to generate the key 
information used in phase 2 for the actual data-plane.
</p>
<p>
<ol>
<li><h4>Define an IKE policy</h4></li>
The IKE policy is configured using the command 
 <code><b>crypto isakmp policy &lt;1-10000&gt;</b></code> where 1-10000 is the 
 priority of the protection suite.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
      	<code>
HUB(config)#<b>crypto isakmp policy 100</b>
</code></div>
</p>
  
    <li><h4>Configure encryption method</h4></li>
<p>
The encryption method is usually any of the synchronous encryption algorithms 
aes, 3des or des: 
<code><b>encryption &lt;aes | 3des | des&gt; &lt;128-256&gt;</b></code>
<ul>
  <li>aes | 3des | des: are the synchronous encryption versions supported by the platform.</li>
  <li>128 - 256: the supported encryption key sizes. More modern platforms 
  support a larger key size. </li>
</ul>
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
HUB(config-isakmp)#<b>encryption aes 256</b>
</code></div>
</p>

<li><h4>Configure the authentication method</h4></li>
<p>
The authentication method can be either preshared keys or RSA-signatures: 
<code><b>authentication &lt;pre-share | rsa-encr | rsa-sig&gt;</b></code>.
In this configuration, we opt to use preshared keys for authentication.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
HUB(config-isakmp)#<b>authentication pre-share</b>
</code></div>
</p>

<li><h4>Configure the Diffie-Helman group for integrity</h4></li>
<p>
Define the diffie-helman group using the command 
<code><b>group &lt;1|14|15|16|19|2|20|21|24|5&gt;</b></code>. 
The Diffie-Hellman groups include the following; 
<ul>
  <li>Group 1 (768 bits)</li>
  <li>Group 14 (2048 bits)</li>
  <li>Group 15 uses 3072 bits</li>
  <li>Group 16 (4096 bits)</li> 
  <li>Group 19 (256 bit ecp)</li>
  <li>Group 2 (1024 bit)</li>
  <li>Group 20 (384 bit ecp)</li>
  <li>Group 21 (521 bit ecp)</li>
  <li>Group 24 (2048 bit, 256 bit subgroup)</li>
  <li>Group 5 (1536 bit)</li>
</ul>
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
HUB(config-isakmp)#<b>group 16</b>
</code></div>
</p>
<p>
If not specified, the default group is enabled.
</p>

<li><h4>Configure the hash function for data integrity</h4></li>
<p>
The hash algorithm provides a check for data integrity i.e, a check to ensure 
that the data was not altered in transit. The main hashing functions in use are MD5 
and the various versions of SHA i.e, SHA, SHA256, SHA384, SHA512. 
The command is <code><b>hash &lt;md5 | sha | sha256 | sha384 | sha512&gt;</b></code>.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
HUB(config-isakmp)#<B>hash sha512</b>
</code></div>
</p>

</ol>
<h3>Step 2: Configure the IKE key</h3>
<p>
The IKE key is defined using the command 
<code><b>crypto isakmp key &lt;password&gt; address &lt;ip_address&gt;</b></code>. Use of the address 0.0.0.0 0.0.0.0 
is not recommended as it allows a host with any IP address to connect. However, 
it may be helpful only when many spokes connect to the hub and administrative  
overhead is high with managing this scalability. Otherwise, to add additional 
level of security, a key should be defined for each spoke whose IP address is 
explicitly configured.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
HUB(config)#<b>crypto isakmp key simplesimple address 0.0.0.0</b>
</code></div>
</p>
<p>
The recommended approach is to use public-key infrastructure (PKI); here a certificate 
is issued to the spokes. The hub can verify that certificate with the certificate 
authority when spokes attempt to register. 
</p>

<h3>Step 3: Configure an IPSec transform set</h3>
<p>
In phase 2 of the creation of the IPsec security, the data-plane traffic is treated to the 
encryption and hashing functions configured under the transform-set.
</p>
<p>
<ol>
<li><h4>Define the transform set and ESP or AH settings</h4>

<p>
Define the ESP authentication and ESP encryption or AH authentication algorithms
for encryption or authentication.
</p>
Here one SA is created for inbound traffic and one for outbound traffic to a 
DMVPN peer using the global configuration command; 
<code><b>crypto ipsec transform-set &lt;transform-set-tag&gt; [&lt;esp-encryption-function&gt; 
&lt;esp-authentication-function&gt; | &lt;ah-authentication&gt;]</b></code>.
</p>
<p>
The AH options available include the following:
<ul>
<li><b>ah-md5-hmac:</b>      AH-HMAC-MD5 transform                                </li>
<li><b>ah-sha-hmac:</b>      AH-HMAC-SHA transform                                </li>
<li><b>ah-sha256-hmac:</b>   AH-HMAC-SHA256 transform                             </li>
<li><b>ah-sha384-hmac:</b>   AH-HMAC-SHA384 transform                             </li>
<li><b>ah-sha512-hmac:</b>   AH-HMAC-SHA512 transform                             </li>
<li><b>comp-lzs:</b>         IP Compression using the LZS compression algorithm   </li>
</ul>
</p>
<p>
The ESP options include the following:
<ul>
<li><b>esp-3des:</b>         ESP transform using 3DES(EDE) cipher (168 bits)      </li>
<li><b>esp-aes :</b>         ESP transform using AES cipher                       </li>
<li><b>esp-des :</b>         ESP transform using DES cipher (56 bits)             </li>
<li><b>esp-gcm :</b>         ESP transform using GCM cipher                       </li>
<li><b>esp-gmac:</b>         ESP transform using GMAC cipher                      </li>
<li><b>esp-md5-hmac:</b>     ESP transform using HMAC-MD5 auth                    </li>
<li><b>esp-null:</b>         ESP transform w/o cipher                             </li>
<li><b>esp-seal:</b>         ESP transform using SEAL cipher (160 bits)           </li>
<li><b>esp-sha-hmac:</b>     ESP transform using HMAC-SHA auth                    </li>
<li><b>esp-sha256-hmac:</b>  ESP transform using HMAC-SHA256 auth                 </li>
<li><b>esp-sha384-hmac:</b>  ESP transform using HMAC-SHA384 auth                 </li>
<li><b>esp-sha512-hmac:</b>  ESP transform using HMAC-SHA512 auth                 </li>                                                                     
</ul>
</p>
<p>
If an encryption algorithm is configured, the key size should be defined. 
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
HUB(config)#<b>crypto ipsec transform-set DMVPN_IPSEC_TSET esp-aes esp-sha512-hmac</b>
</code></div>
</p>
</li>
<li><h4>Define the tunnel mode</h4>
<p>
tunnel mode can be transport or tunnel
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
HUB(cfg-crypto-trans)#<b>mode transport</b>
</code></div>
</p>
</li>
</ol>
</p>

<h3>Step 4 Create an IPSec profile</h3>
<p>
The IPsec profiile is created and the references the IPsec transform set previously 
defined.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
HUB(config)#<b>crypto ipsec profile DMVPN_IPSEC_PROFILE  </b><br>
HUB(ipsec-profile)#<b>set transform-set DMVPN_IPSEC_TSET </b><br>
HUB(ipsec-profile)#<b>exit                               </b>
</code></div>
</p>
<h3>Step 5: Associate the DMVPN tunnel interface with the IPSec profile</h3>
<p>
To protect the tunnel using IPsec, reference the configured IPsec profile under 
the tunnel configuration using the command <code><b>
tunnel protection ipsec profile &lt;ipsec_profile_name&gt;</b></code>.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
HUB(config)#<b>interface tunnel 0</b><br>
HUB(config-if)#<b>tunnel protection ipsec profile DMVPN_IPSEC_PROFILE</b>
</code></div>
</p>
<p>
Step 1 - 5 configurations are common to both the hub and spoke. This is an example 
of the templating that can be used with DMVPN.

To configure a specific key for each spoke, enter the spoke address. This IP address 
should be the one configured on the interface that is defined as the tunnel source 
when configuring the DMVPN tunnel interface on the spoke. The hub and spoke must 
share the same key.
</p>

<h2>IPsec with Frontdoor VRF</h2>
<p>
When a front-door VRF(FVRF) has been configured, to protect the tunnel using IPsec 
requires a slightly different configuration particularly when defining the ISAKMP 
key. Using the configuration process for IKEv1 above, the configuration of IPsec
for a front-door VRF tunnel can be accomplished using the following sequence:
</p>
<h3>Step 2: Configure the IKEv1 key</h3>
<p>
<ol>
<li>The key is configured using the command <code><b>crypto keyring &lt;keyring-name&gt; 
vrf &lt;vrf-name&gt;</b></code> where:  
<ul>
 <li>keyring-name: is the suggested name of the keyring.</li>
 <li>vrf-name: is the VRF under which the key will be used.</li>
</ul>

<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
 SPOKE4(config)#<b>crypto keyring DMVPN_ISAKMP_KEYRING vrf FVRF</b>
 </code></div>
 </p>
</li>
<li>
Then define the key using the command <code><b>pre-shared-key address &lt;ip-address&gt; 
&lt;netmask&gt; key &lt;key&gt;</b></code>.

<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
SPOKE4(conf-keyring)#<b>pre-shared-key address 0.0.0.0 0.0.0.0 key simplesimple</b>
</code></div>
</p>

</li>
</ol>
</p>

<h3>Step 3: Configure the IKEv1 Profile</h3>
<p>
<ol>
  <li>Create an IKEv1 profile: <code><b>create isakmp profile &lt;profile-name&gt;</b></code>.
  <p>
  <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
 SPOKE4(config)#<b>crypto isakmp profile DMVPN_ISAKMP_PROFILE</b>
 </code></div>
  </p>
  </li>
  <li>Configure the VRF that the profile will be used under: <code><b>vrf &lt;VRF-name&gt;</b></code>
  <p>
  <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
   SPOKE4(conf-isa-prof)#<b>vrf FVRF</b>
 </code></div>
  </p>
  </li>
  <li>Reference the configured keyring: <code><b>keyring &lt;keyring-name&gt;</b></code>
    <p>
  <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
  SPOKE4(conf-isa-prof)#<b>keyring DMVPN_ISAKMP_KEYRING</b><br>
 </code></div></p>
  </li>
  <li>Define the IP address and VRF that this profile will be checked against and 
  applied to: <code><b>match identity address &lt;ip-address&gt; &lt;vrf&gt;</b></code>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
SPOKE4(conf-isa-prof)#<b>match identity address 0.0.0.0 FVRF</b>
</code></div>
</p>
  
  
  </li>
</ol>
</p>

<h3>Step 4: Configure the IPsec Transform-set</h3>
<p>
The IPsec transform-set is configured as in step 3 above:
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
 SPOKE4(config)#<b>crypto ipsec transform-set DMVPN_IPSEC_TSET esp-aes esp-sha512-hmac</b><br>
 SPOKE4(cfg-crypto-trans)#<b>mode transport</b>
 </code></div>
</p>

<h3>Step 5: Configure the IPsec Profile</h3>
<p>
<ol>
  <li>Define the IPsec profile:<code><b>crypto ipsec profile &lt;profile-name&gt;</b></code>
  <p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
SPOKE4(config)#<b>crypto ipsec profile DMVPN_IPSEC_PROFILE</b>
</code></div>
</p>
  </li>
  <li>Reference the configured IPsec transform-set: 
  <code><b>set transform-set &lt;transform-set-name&gt;</b></code>
  <p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
SPOKE4(ipsec-profile)#<b>set transform-set DMVPN_IPSEC_TSET</b>
</code></div>
</p>

  </li>
  <li>Reference the ISAKMP/IKEv1 profile: <code><b>set isakmp-profile &lt;isakmp-profile-name&gt;</b></code> 
    <p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
  SPOKE4(ipsec-profile)#<b>set isakmp-profile DMVPN_ISAKMP_PROFILE</b>
 </code></div></p>
  </li>
</ol>
</p>

<h3>Step 6: Reference the IPsec Profile under the tunnel</h3>
<p>
Tunnel protection using IPsec is configured under the tunnel interface:
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
SPOKE4(config)#<b>interface tunnel 0</b><br>
SPOKE4(config-if)#<b>tunnel protection ipsec profile DMVPN_IPSEC_PROFILE</b>
</code></div>
</p>


<h2 id="VERIFICATION_IKEv1">Verification of IKEv1 Configuration</h2>
<p>
The following commands can be used to verify tunnel protection using IPsec:
<ul>
  <li><code><b>show dmvpn detail</b></code></li>
  <li><code><b>show crypto isakmp sa</b></code></li>
  <li><code><b>show crypto isakmp policy</b></code></li>
  <li><code><b>show crypto isakmp peers</b></code></li>
  <li><code><b>show crypto isakmp key</b></code></li>
  <li><code><b>show crypto ipsec sa</b></code></li>
  <li><code><b>show crypto ipsec profile</b></code></li>
</ul>
</p>

<h3><code>show dmvpn detail</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
SPOKE2#<b>show dmvpn detail</b>                                                        <br>    
Legend: Attrb --&gt; S - Static, D - Dynamic, I - Incomplete                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N - NATed, L - Local, X - No Socket                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Ent --&gt; Number of NHRP entries with same NBMA peer                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NHS Status: E --&gt; Expecting Replies, R --&gt; Responding, W --&gt; Waiting  <br>      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UpDn Time --&gt; Up or Down Time for a Tunnel                                  <br>
==========================================================================             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
Interface Tunnel0 is up/up, Addr. is 172.30.1.2, VRF ""                                <br>
&nbsp;&nbsp; Tunnel Src./Dest. addr: 99.255.30.1/MGRE, Tunnel VRF ""                             <br>
&nbsp;&nbsp; Protocol/Transport: "multi-GRE/IP", Protect "DMVPN_IPSEC_PROFILE"                   <br>
&nbsp;&nbsp; Interface State Control: Disabled                                                   <br>
&nbsp;&nbsp; nhrp event-publisher : Disabled                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
IPv4 NHS:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                      <br>
172.30.1.1&nbsp;&nbsp;RE NBMA Address: 99.255.10.2 priority = 0 cluster = 0                      <br>
Type:Spoke, Total NBMA Peers (v4/v6): 4                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
# Ent&nbsp;&nbsp;Peer NBMA Addr Peer Tunnel Add State&nbsp;&nbsp;UpDn Tm Attrb&nbsp;&nbsp;&nbsp;&nbsp;Target Network           <br>
----- --------------- --------------- ----- -------- ----- -----------------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;1 99.255.10.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.1.1&nbsp;&nbsp;&nbsp;&nbsp;UP 03:15:04&nbsp;&nbsp;&nbsp;&nbsp;S&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.1.1/32           <br>
&nbsp;&nbsp;&nbsp;&nbsp;1 99.255.30.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.1.2&nbsp;&nbsp;&nbsp;&nbsp;UP 00:48:01&nbsp;&nbsp;DLX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.1.2/32           <br>
&nbsp;&nbsp;&nbsp;&nbsp;1 99.255.60.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.1.7&nbsp;&nbsp;&nbsp;&nbsp;UP 00:12:13&nbsp;&nbsp;&nbsp;&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.1.7/32           <br>
&nbsp;&nbsp;&nbsp;&nbsp;1 99.255.60.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.1.8&nbsp;&nbsp;&nbsp;&nbsp;UP 00:48:01&nbsp;&nbsp;&nbsp;&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.1.8/32           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
Crypto Session Details:                                                                <br>
--------------------------------------------------------------------------------       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
Interface: Tunnel0                                                                     <br>
Session: [0x680251DC]                                                                  <br>
&nbsp;&nbsp;IKEv1 SA: local 99.255.30.1/500 remote 99.255.10.2/500 Active                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Capabilities:(none) connid:1001 lifetime:20:44:52                            <br>
&nbsp;&nbsp;Crypto Session Status: UP-ACTIVE                                                     <br>
&nbsp;&nbsp;fvrf: (none), Phase1_id: 99.255.10.2                                                 <br>
&nbsp;&nbsp;IPSEC FLOW: permit 47 host 99.255.30.1 host 99.255.10.2                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Active SAs: 2, origin: crypto map                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inbound:  #pkts dec'ed 2510 drop 0 life (KB/Sec) 4254210/2162                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Outbound: #pkts enc'ed 2578 drop 0 life (KB/Sec) 4254210/2162                  <br>
&nbsp;&nbsp; Outbound SPI : 0xB80CDF30, transform : esp-256-aes esp-sha512-hmac                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;Socket State: Open                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
Interface: Tunnel0                                                                     <br>
Session: [0x68024FEC]                                                                  <br>
&nbsp;&nbsp;IKEv1 SA: local 99.255.30.1/500 remote 99.255.60.6/500 Active                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Capabilities:(none) connid:1004 lifetime:23:47:43                            <br>
&nbsp;&nbsp;IKEv1 SA: local 99.255.30.1/500 remote 99.255.60.6/500 Active                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Capabilities:(none) connid:1005 lifetime:23:47:43                            <br>
&nbsp;&nbsp;Crypto Session Status: UP-ACTIVE                                                     <br>
&nbsp;&nbsp;fvrf: (none), Phase1_id: 99.255.60.6                                                 <br>
&nbsp;&nbsp;IPSEC FLOW: permit 47 host 99.255.30.1 host 99.255.60.6                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Active SAs: 4, origin: crypto map                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inbound:  #pkts dec'ed 1 drop 0 life (KB/Sec) 4608000/2866                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Outbound: #pkts enc'ed 1 drop 0 life (KB/Sec) 4608000/2866                     <br>
&nbsp;&nbsp; Outbound SPI : 0x5D0DE203, transform : esp-256-aes esp-sha512-hmac                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;Socket State: Open                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                       <br>
Interface: Tunnel0                                                                     <br>
Session: [0x680250E4]                                                                  <br>
&nbsp;&nbsp;IKEv1 SA: local 99.255.30.1/500 remote 99.255.60.2/500 Active                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Capabilities:(none) connid:1002 lifetime:23:11:55                            <br>
&nbsp;&nbsp;IKEv1 SA: local 99.255.30.1/500 remote 99.255.60.2/500 Active                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Capabilities:(none) connid:1003 lifetime:23:11:55                            <br>
&nbsp;&nbsp;Crypto Session Status: UP-ACTIVE                                                     <br>
&nbsp;&nbsp;fvrf: (none), Phase1_id: 99.255.60.2                                                 <br>
&nbsp;&nbsp;IPSEC FLOW: permit 47 host 99.255.30.1 host 99.255.60.2                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Active SAs: 4, origin: crypto map                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inbound:  #pkts dec'ed 6 drop 0 life (KB/Sec) 4254542/718                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Outbound: #pkts enc'ed 6 drop 0 life (KB/Sec) 4254542/718                      <br>
&nbsp;&nbsp; Outbound SPI : 0xBB52CAA0, transform : esp-256-aes esp-sha512-hmac                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;Socket State: Open                                                                 <br>
                                                                                       <br>
Pending DMVPN Sessions:                                                                <br>
                                                                                    
SPOKE2#                 
</code></div>
</p>

<h3><code>show crypto isakmp sa</code></h3>
<p>
Command displays security association information when for the ISAKMP exchange.
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
SPOKE2#<b>show crypto isakmp sa</b><br>
IPv4 Crypto ISAKMP SA                                         <br>
dst&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; src&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; state&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn-id status <br>
99.255.10.2&nbsp;&nbsp;&nbsp;&nbsp; 99.255.30.1&nbsp;&nbsp;&nbsp;&nbsp; QM_IDLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1001 ACTIVE <br>
99.255.30.1&nbsp;&nbsp;&nbsp;&nbsp; 99.255.60.2&nbsp;&nbsp;&nbsp;&nbsp; QM_IDLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1003 ACTIVE <br>
99.255.30.1&nbsp;&nbsp;&nbsp;&nbsp; 99.255.60.6&nbsp;&nbsp;&nbsp;&nbsp; QM_IDLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1002 ACTIVE <br>
                                                              <br>
IPv6 Crypto ISAKMP SA                                         <br>
                                                              <br>
SPOKE2#                                                       <br>
</code></div>
</p>

<p>
Additional keywords to the above command display the following output:
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
  SPOKE2#<b>show crypto isakmp sa ?</b><br>
&nbsp;&nbsp;active&nbsp;&nbsp; Shows HA-enabled ISAKMP SAs in the active state    <br>
&nbsp;&nbsp;count&nbsp;&nbsp;&nbsp;&nbsp;Show the number of ISAKMP Security Associations    <br>
&nbsp;&nbsp;detail&nbsp;&nbsp; Show ISAKMP SA Detail                              <br>
&nbsp;&nbsp;nat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show ISAKMP SA NAT Detail                          <br>
&nbsp;&nbsp;standby&nbsp;&nbsp;Shows HA-enabled ISAKMP SAs in the standby state   <br>
&nbsp;&nbsp;vrf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show ISAKMP SA as per VRF
</code></div>  
</p>

<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
SPOKE2#<b>show crypto isakmp sa detail</b> <br>
Codes: C - IKE configuration mode, D - Dead Peer Detection&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; K - Keepalives, N - NAT-traversal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; T - cTCP encapsulation, X - IKE Extended Authentication&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; psk - Preshared key, rsig - RSA signature&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; renc - RSA encryption&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
IPv4 Crypto ISAKMP SA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
C-id&nbsp;&nbsp;Local&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remote&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I-VRF&nbsp;&nbsp;Status Encr Hash&nbsp;&nbsp; Auth DH Lifetime Cap.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
1001&nbsp;&nbsp;99.255.30.1&nbsp;&nbsp;&nbsp;&nbsp; 99.255.10.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ACTIVE aes&nbsp;&nbsp;sha512 psk&nbsp;&nbsp;16 23:21:51&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Engine-id:Conn-id =&nbsp;&nbsp;SW:1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
1003&nbsp;&nbsp;99.255.30.1&nbsp;&nbsp;&nbsp;&nbsp; 99.255.60.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ACTIVE aes&nbsp;&nbsp;sha512 psk&nbsp;&nbsp;16 23:34:21&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Engine-id:Conn-id =&nbsp;&nbsp;SW:3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
1002&nbsp;&nbsp;99.255.30.1&nbsp;&nbsp;&nbsp;&nbsp; 99.255.60.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ACTIVE aes&nbsp;&nbsp;sha512 psk&nbsp;&nbsp;16 23:33:22&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Engine-id:Conn-id =&nbsp;&nbsp;SW:2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
IPv6 Crypto ISAKMP SA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
SPOKE2#
</code></div>
</p>

<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
SPOKE2#<b>show crypto isakmp sa count</b>   <br>
Active ISAKMP SA's: 3                       <br>
Standby ISAKMP SA's: 0                      <br>
Currently being negotiated ISAKMP SA's: 0   <br>
Dead ISAKMP SA's: 0
</code></div>
</p>

<h3><code>show crypto isakmp policy</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
SPOKE2#<b>show crypto isakmp policy</b>                                           <br>
                                                                                  <br>
Global IKE policy                                                                 <br>
Protection suite of priority 100                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encryption algorithm:&nbsp;&nbsp; AES - Advanced Encryption Standard (256 bit keys).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hash algorithm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Secure Hash Standard 2 (512 bit)                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;authentication method:&nbsp;&nbsp;Pre-Shared Key                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diffie-Hellman group:&nbsp;&nbsp; #16 (4096 bit)                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lifetime:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 seconds, no volume limit                    <br>
SPOKE2# 
</code></div>
</p>

<h3><code>show crypto isakmp peers</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
SPOKE2#<b>show crypto isakmp peers</b>
Peer: 99.255.10.2 Port: 500 Local: 99.255.30.1 <br>
&nbsp;Phase1 id: 99.255.10.2                        <br>
Peer: 99.255.20.2 Port: 500 Local: 99.255.30.1 <br>
&nbsp;Phase1 id: 99.255.20.2                        <br>
Peer: 99.255.60.2 Port: 500 Local: 99.255.30.1 <br>
&nbsp;Phase1 id: 99.255.60.2                        <br>
Peer: 99.255.60.6 Port: 500 Local: 99.255.30.1 <br>
&nbsp;Phase1 id: 99.255.60.6                        <br>
SPOKE2#                                        <br>
</code></div>
</p>

<h3><code>show crypto isakmp key</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
 SPOKE2#<b>show crypto isakmp key</b>                                  <br>
Keyring&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hostname/Address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Preshared Key <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0.0.0.0]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simplesimple  <br>
SPOKE2#
 </code></div>
 </p>
 
 
<h3><code>show crypto ipsec sa</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
 <code>
 
HUB#<b>show crypto ipsec sa</b><br>
                                                                                                <br>
interface: Tunnel0                                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;Crypto map tag: Tunnel0-head-0, local addr 10.10.1.1                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp; protected vrf: (none)                                                                        <br>
&nbsp;&nbsp; local&nbsp;&nbsp;ident (addr/mask/prot/port): (10.10.1.1/255.255.255.255/47/0)                         <br>
&nbsp;&nbsp; remote ident (addr/mask/prot/port): (10.10.1.3/255.255.255.255/47/0)                         <br>
&nbsp;&nbsp; current_peer 10.10.1.3 port 500                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp; PERMIT, flags={origin_is_acl,}                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts encaps: 11, #pkts encrypt: 11, #pkts digest: 11                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts decaps: 16, #pkts decrypt: 16, #pkts verify: 16                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts compressed: 0, #pkts decompressed: 0                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts not compressed: 0, #pkts compr. failed: 0                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts not decompressed: 0, #pkts decompress failed: 0                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;#send errors 0, #recv errors 0                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; local crypto endpt.: 10.10.1.1, remote crypto endpt.: 10.10.1.3                            <br>
&nbsp;&nbsp;&nbsp;&nbsp; plaintext mtu 1442, path mtu 1500, ip mtu 1500, ip mtu idb GigabitEthernet0/0              <br>
&nbsp;&nbsp;&nbsp;&nbsp; current outbound spi: 0x566CA6C2(1449961154)                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp; PFS (Y/N): N, DH group: none                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound esp sas:                                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spi: 0xE65C1095(3864793237)                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform: esp-aes esp-sha512-hmac ,                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in use settings ={Transport, }                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn id: 3, flow_id: SW:3, sibling_flags 80000000, crypto map: Tunnel0-head-0           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sa timing: remaining key lifetime (k/sec): (4266073/3469)                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IV size: 16 bytes                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replay detection support: Y                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status: ACTIVE(ACTIVE)                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound ah sas:                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound pcp sas:                                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound esp sas:                                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spi: 0x566CA6C2(1449961154)                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform: esp-aes esp-sha512-hmac ,                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in use settings ={Transport, }                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn id: 4, flow_id: SW:4, sibling_flags 80000000, crypto map: Tunnel0-head-0           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sa timing: remaining key lifetime (k/sec): (4266074/3469)                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IV size: 16 bytes                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replay detection support: Y                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status: ACTIVE(ACTIVE)                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound ah sas:                                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound pcp sas:                                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp; protected vrf: (none)                                                                        <br>
&nbsp;&nbsp; local&nbsp;&nbsp;ident (addr/mask/prot/port): (10.10.1.1/255.255.255.255/47/0)                         <br>
&nbsp;&nbsp; remote ident (addr/mask/prot/port): (10.10.1.2/255.255.255.255/47/0)                         <br>
&nbsp;&nbsp; current_peer 10.10.1.2 port 500                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp; PERMIT, flags={origin_is_acl,}                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts encaps: 12, #pkts encrypt: 12, #pkts digest: 12                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts decaps: 12, #pkts decrypt: 12, #pkts verify: 12                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts compressed: 0, #pkts decompressed: 0                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts not compressed: 0, #pkts compr. failed: 0                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts not decompressed: 0, #pkts decompress failed: 0                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;#send errors 0, #recv errors 0                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; local crypto endpt.: 10.10.1.1, remote crypto endpt.: 10.10.1.2                            <br>
&nbsp;&nbsp;&nbsp;&nbsp; plaintext mtu 1442, path mtu 1500, ip mtu 1500, ip mtu idb GigabitEthernet0/0              <br>
&nbsp;&nbsp;&nbsp;&nbsp; current outbound spi: 0x11E881C1(300450241)                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp; PFS (Y/N): N, DH group: none                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound esp sas:                                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spi: 0xC5D936AE(3319346862)                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform: esp-aes esp-sha512-hmac ,                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in use settings ={Transport, }                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn id: 1, flow_id: SW:1, sibling_flags 80000000, crypto map: Tunnel0-head-0           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sa timing: remaining key lifetime (k/sec): (4321569/3249)                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IV size: 16 bytes                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replay detection support: Y                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status: ACTIVE(ACTIVE)                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound ah sas:                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound pcp sas:                                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound esp sas:                                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spi: 0x11E881C1(300450241)                                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform: esp-aes esp-sha512-hmac ,                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in use settings ={Transport, }                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn id: 2, flow_id: SW:2, sibling_flags 80000000, crypto map: Tunnel0-head-0           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sa timing: remaining key lifetime (k/sec): (4321569/3249)                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IV size: 16 bytes                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replay detection support: Y                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status: ACTIVE(ACTIVE)                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound ah sas:                                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound pcp sas:                                                                          <br>
HUB#                                                                                            <br>
HUB#
 </code></div>
 </p>

<h1>IKEv2</h1>
<p>
IKEv2 was developed to eliminate the weaknesses of IKEv1. Cryptographic functions
consume CPU resources, so the CPU should be protected by limiting the number of
packets required to process IKE establishment. CPU utilization increases to 
maintain SA state including negotiation of a session. If CPU utilization is high
(for any other reasons), a session that has been started may not complete due to 
limited CPU resources.
</p>
<p>
IKEv2 advantages over IKEv1 include:
<ul>
  <li>Protection against DoS attacks</li>
  <li>Support for new encryption algorithms for phase 2 (suite B).</li>
</ul>
</p>
<p> 
With IKEv2, asymetric authentication methods are possible where one end uses 
preshared keys and the other PKI.
</p>
<p>
DMVPN tunnel protection using IPSec IKEv2 through the use of a static pre-shared 
key involves configuration of the following:
<ol>
 <li>IKEv2 keyring</li>
 <li>IKEv2 profile</li>
 <li>IPSec transform set</li>
 <li>IPSec profile</li>
</ol>
</p>

<h2>Step 1: Configure the IKEv2 Keyring</h2>
<p>
The IKEv2 keyring is a repository of the pre-shared keys. In a keyring, it is 
possible to define which keys apply to which hosts. Identification of the password 
is based on the IP address of the remote router. The IKEv2 keyring is created 
with the following steps:
</p>
<p>
  <ol>
    <li><b>Define the keyring instance:</b>
    	It is created with the global configuration command 
    	<code><b>crypto ikev2 keyring &lt;keyring-name&gt;</b></code>.
    	<p>
			<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
			 <code>
			 HUB(config)#<b>crypto ikev2 keyring IKEv2_KEYRING</b> 
			 </code></div></p>
    </li>
    <li><b>Create a peer name:</b> Multiple peers can exist in a keyring. Each 
    peer has a matching qualifier and can use a different password. The peer is 
    created with the command <code><b>peer &lt;peer-name&gt;</b></code>.
    <p>
			<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
			 <code>
			 HUB(config-ikev2-keyring)#<b>peer ANY</b> 
			 </code></div></p>
    </li>
    <li><b>Identify the IP address for the peer:</b> Multiple peers can reside 
    in a keyring. The IP address is identified so that the
appropriate peer configuration is used based upon the remote devices IP address. 
The command address network netmask defines the IP address/range. Though not
recommended for a production network, the value of 0.0.0.0 0.0.0.0 may be used to 
match against any peer. For IPv6, the address ::/0 matches any IPv6 address.
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
			 <code>
			 HUB(config-ikev2-keyring-peer)#<b>address 0.0.0.0 </b><br>
			 </code></div>
</p>
</li>
 
   <li><b>Define a preshared key:</b> 
     Define the preshared key with <code><b>pre-shared-key &lt;password&gt;</b></code>:
     <p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
			 <code>
			 HUB(config-ikev2-keyring-peer)#<b>pre-shared-key cisco123</b>
			 </code></div>
			 </p>
   </li>
  </ol>
</p>


<p>

</p>

<h2>Step 2: IKEv2 Profile</h2>
<p>
IKEv2 profile is a collection of non-negotiable security parameters used during 
IKE security association. The IKEv2 profile is later associated with the IPSec
profile. Within the IKEv2 profile, local and remote authentication methods must
be defined as well as a match statement.
</p>
<p>
  <ol>
    <li><b>Define the IKEv2 profile:</b>
    <code><b>crypto ikev2 profile &lt;profile_name&gt;</b></code>:
    <p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
	     HUB(config)#<b>crypto ikev2 profile IKEv2_PROF</b>
	   </code></div>
	   </p>
    </li>
    <li><b>Identify the IP address for the remote router:</b>
    the IP address must be identified for the initial IKEv2 session to establish.
The peer IP address is defined with the command <code><b>match identity remote address 
&lt;ip_address&gt;</b></code>. This can be 0.0.0.0 0.0.0.0 to match against any peer. For IPv6, it can be ::/0.
<p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
	   HUB(config-ikev2-profile)#<b>match identity remote address 0.0.0.0</b> 
	   </code></div>
	   </p>
    </li>
    <li> 
    <b>(Optional) Configure the local routers identity:</b>
    the local routers identity can be set based on an IP address with the command 
<code><b>identity local address &lt;ip-address&gt;&gt;</b></code>. A loopback address is recommended as it is 
always up. Note that the IP address configured here should match the IP address
used during the certificate registration. This step is really not needed with 
preshared key authentication but is very important in the deployment of public
key infrastructure.
    </li>
    <li><b>Identify the Front-door VRF (FVRF) for the tunnel end:</b>
    if a front-door VRF is used on the DMVPN tunnel, then the FVRF must be associated 
to the IKEv2 profile with the command <code><b>match fvrf &lt;vrf_name | any&gt;</b></code>. Keyword any allows
any configured FVRF to be selected.
    </li>
    <li><b>Define the local authentication method:</b>
    The authentication method must be defined for connection requests that are received 
by remote peers. The command <code><b>authentication local &lt;pre-share | rsa-sig&gt;</b></code> defines the 
local authentication. Only one local authentication can be selected. The pre-share
keyword is for pre-shared static keys and rsa-sig is used for certificate based 
authentication.
<p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
	   HUB(config-ikev2-profile)#<b>authentication local pre-share</b> 
	   </code></div>
	   </p>
    </li>
    <li><b>Define the remote authentication method:</b>
    The authentication method must be defined for connection requests that are sent
to remote peers. The command <code><b>authentication remote [pre-share | rsa-sig]</b></code> defines 
the remote authentication. The pre-share keyword is used for pre-shared static 
keys and rsa-sig is used for certificate-based authentication.
	<p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
	   HUB(config-ikev2-profile)#<b>authentication remote pre-share</b>
	   </code>
	 </div>
	 </p>
    </li>
    <li><b>Define the IKEv2 keyring (for preshared authentication):</b>
    preshared authentication requires that the IKEv2 keyring be associated to the 
IKEv2 profile. The command <code><b>keyring local &lt;keyring-name&gt;</b></code> associates the IKEv2 keyring.
<p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
		HUB(config-ikev2-profile)#<b>keyring local IKEv2_KEYRING</b><br>
		HUB(config-ikev2-profile)#<b>exit</b>
		</code></div>
		</p>
    </li>
  </ol>
</p>

<h2>Step 3: Configure the IPSec Transform Set</h2>
<p>
The transform set identifies the security protocols for encrypting traffic (ESP) 
or protocols for authenticating the data (AH). The transform set is created with 
the following steps;
</p>
<p>
  <ol>
    <li><b>Create the transform set and identify the transforms:</b> 
    Only one transform set can be selected for ESP encryption, ESP authentication, 
AH authentication using the command <code><b>crypto ipsec transform-set &lt;transform_set_name&gt; 
&lt;esp-encryption esp-authentication | ah-authentication&gt;</b></code>
<p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
	   HUB(config)#<b>crypto ipsec transform-set IPSEC_TSET esp-aes esp-sha512-hmac</b> 
	   </code></div></p>
    </li>
    <li><b>Specify the Transform Set mode:</b> 
    the transform set mode is configured with <code><b>mode &lt;transport | tunnel&gt;</b></code>. Tunnel mode 
is the default mode. However, it adds 20bytes of additional IPSec header to the 
overall packet.
	<p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
	     HUB(cfg-crypto-trans)#<b>mode transport</b>
	   </code></div></p>
    </li>
  </ol>
</p>


<p>

<h2>Step 4: Configure the IPSec Profile</h2>
<p>
The IPSec profile combines the IPSec transform set and the IKEv2 profile. The 
IPSec profile is created with the following steps;
</p>
<p>
<ol>
<li><b>Create the IPSec profile:</b> use the command <code><b>crypto ipsec profile &lt;profile-name&gt;</b></code>
	<p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
	   HUB(config)#<b>crypto ipsec profile IPSEC_PROF</b>
	   </code></div>
	   </p>
</li>
<li><b>Specify the transform set:</b> 
The transform set is specified with the command <code><b>set transform-set &lt;transform-set-name&gt;</b></code>.
<p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
	   HUB(ipsec-profile)#<b>set transform-set IPSEC_TSET</b>
	   </code>
	   </div></p>
</li>
<li><b>Specify the IKEv2 profile:</b>
the IKEv2 profile is specified with the command <code><b>set ikev2-profile &lt;ike2-profile-name&gt;</b></code>.
<p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
	   HUB(ipsec-profile)#<b>set ikev2-profile IKEv2_PROF</b><br> 
	   HUB(ipsec-profile)#<b>exit</b>
	   </code>
	   </div></p>
 </li>
</ol>
</p>
<p>
<h2>Securing the DMVPN Tunnel</h2>
<p>
To secure the DMVPN tunnel, the IPSec profile should be associated with the DMVPN 
tunnel interface with the command; <code><b>tunnel protection ipsec profile &lt;profile-name&gt; 
[shared]</b></code>. The <code><b>shared</b></code> keyword is required for routers that terminate multiple secured
DMVPN tunnels on the same transport interface. 
</p>
<p>
     <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
	   HUB(config)#<b>interface tunnel 0</b><br>
	   HUB(config-if)#<b>tunnel protection ipsec profile IPSEC_PROF</b>
	   </code>
	   </div></p>
	   <p>
The command shares the IPSec security
association database (SADB) among multiple DMVPN tunnels. Because the SADB is 
shared, a unique tunnel key must be defined on each DMVPN tunnel interface to 
ensure that the encrypted/decrypted traffic aligns to the proper DMVPN tunnel.
</p>

</p>

<h2>Verification of IKEv2 Tunnels</h2>
<p>
<b><code>show crypto ipsec profile</code></b>
</p>

<h3><code>show dmvpn</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
	   <code>
HUB#<b>show dmvpn detail</b>                                                     <br>
Legend: Attrb --&gt; S - Static, D - Dynamic, I - Incomplete&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N - NATed, L - Local, X - No Socket&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T1 - Route Installed, T2 - Nexthop-override&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C - CTS Capable, I2 - Temporary&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Ent --&gt; Number of NHRP entries with same NBMA peer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NHS Status: E --&gt; Expecting Replies, R --&gt; Responding, W --&gt; Waiting     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UpDn Time --&gt; Up or Down Time for a Tunnel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           <br>
==========================================================================       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
Interface Tunnel0 is up/up, Addr. is 192.168.1.1, VRF ""&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp; Tunnel Src./Dest. addr: 10.10.1.1/Multipoint, Tunnel VRF ""&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp; Protocol/Transport: "multi-GRE/IP", Protect "IPSEC_PROF"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp; Interface State Control: Disabled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp; nhrp event-publisher : Disabled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
Type:Hub, Total NBMA Peers (v4/v6): 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
# Ent&nbsp;&nbsp;Peer NBMA Addr Peer Tunnel Add State&nbsp;&nbsp;UpDn Tm Attrb&nbsp;&nbsp;&nbsp;&nbsp;Target Network     <br>
----- --------------- --------------- ----- -------- ----- -----------------     <br>
&nbsp;&nbsp;&nbsp;&nbsp;1 10.10.1.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.2&nbsp;&nbsp;&nbsp;&nbsp;UP 00:13:26&nbsp;&nbsp;&nbsp;&nbsp; D&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.2/32    <br>
&nbsp;&nbsp;&nbsp;&nbsp;1 10.10.1.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.3&nbsp;&nbsp;&nbsp;&nbsp;UP 00:02:57&nbsp;&nbsp;&nbsp;&nbsp; D&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.3/32    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
Crypto Session Details:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
-------------------------------------------------------------------------------- <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
Interface: Tunnel0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
Session: [0x1110A890]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;Session ID: 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;IKEv2 SA: local 10.10.1.1/500 remote 10.10.1.2/500 Active&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Capabilities:(none) connid:1 lifetime:23:46:29&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp;Crypto Session Status: UP-ACTIVE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp;fvrf: (none), Phase1_id: 10.10.1.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp;IPSEC FLOW: permit 47 host 10.10.1.1 host 10.10.1.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Active SAs: 2, origin: crypto map&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inbound:&nbsp;&nbsp;#pkts dec'ed 1020 drop 0 life (KB/Sec) 4173553/2789&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Outbound: #pkts enc'ed 1020 drop 0 life (KB/Sec) 4173553/2789&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp; Outbound SPI : 0xD07B32DF, transform : esp-aes esp-sha512-hmac&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;Socket State: Open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
Interface: Tunnel0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
Session: [0x1110A798]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;Session ID: 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;IKEv2 SA: local 10.10.1.1/500 remote 10.10.1.3/500 Active&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Capabilities:(none) connid:2 lifetime:23:56:23&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp;Crypto Session Status: UP-ACTIVE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp;fvrf: (none), Phase1_id: 10.10.1.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp;IPSEC FLOW: permit 47 host 10.10.1.1 host 10.10.1.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Active SAs: 2, origin: crypto map&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inbound:&nbsp;&nbsp;#pkts dec'ed 1022 drop 0 life (KB/Sec) 4181658/3383&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Outbound: #pkts enc'ed 1014 drop 0 life (KB/Sec) 4181659/3383&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp; Outbound SPI : 0xB5895749, transform : esp-aes esp-sha512-hmac&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;Socket State: Open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
Pending DMVPN Sessions:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       <br>
HUB#
</code></div>
</p>
<p>
On the spoke
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
   <code>
SPOKE1(config-if)#<b>do show dmvpn detail</b><br>
Legend: Attrb --&gt; S - Static, D - Dynamic, I - Incomplete                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N - NATed, L - Local, X - No Socket                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T1 - Route Installed, T2 - Nexthop-override                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C - CTS Capable, I2 - Temporary                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Ent --&gt; Number of NHRP entries with same NBMA peer                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NHS Status: E --&gt; Expecting Replies, R --&gt; Responding, W --&gt; Waiting   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UpDn Time --&gt; Up or Down Time for a Tunnel                                   <br>
==========================================================================              <br>
                                                                                        <br>
Interface Tunnel0 is up/down, Addr. is 192.168.1.2, VRF ""                              <br>
&nbsp;&nbsp; Tunnel Src./Dest. addr: 10.10.1.2/10.10.1.1, Tunnel VRF ""                           <br>
&nbsp;&nbsp; Protocol/Transport: "GRE/IP", Protect "IPSEC_PROF"                                   <br>
&nbsp;&nbsp; Interface State Control: Disabled                                                    <br>
&nbsp;&nbsp; nhrp event-publisher : Disabled                                                      <br>
                                                                                        <br>
IPv4 NHS:                                                                               <br>
192.168.1.1&nbsp;&nbsp; E NBMA Address: 10.10.1.1 priority = 0 cluster = 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
Type:Spoke, Total NBMA Peers (v4/v6): 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            <br>
# Ent&nbsp;&nbsp;Peer NBMA Addr Peer Tunnel Add State&nbsp;&nbsp;UpDn Tm Attrb&nbsp;&nbsp;&nbsp;&nbsp;Target Network            <br>
----- --------------- --------------- ----- -------- ----- -----------------            <br>
&nbsp;&nbsp;&nbsp;&nbsp;1 10.10.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.1&nbsp;&nbsp;INTF 00:04:17&nbsp;&nbsp;&nbsp;&nbsp; S&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.1/32           <br>
                                                                                        <br>
                                                                                        <br>
Crypto Session Details:                                                                 <br>
--------------------------------------------------------------------------------        <br>
                                                                                        <br>
Interface: Tunnel0                                                                      <br>
Session: [0x10F9C2E8]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                         <br>
&nbsp;&nbsp;Session ID: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                         <br>
&nbsp;&nbsp;IKEv1 SA: local 10.10.1.2/500 remote 10.10.1.1/500 Inactive                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Capabilities:(none) connid:0 lifetime:0                                       <br>
&nbsp;&nbsp;Crypto Session Status: DOWN-NEGOTIATING                                               <br>
&nbsp;&nbsp;fvrf: (none),&nbsp;&nbsp; IPSEC FLOW: permit 47 host 10.10.1.2 host 10.10.1.1                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Active SAs: 0, origin: crypto map                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inbound:&nbsp;&nbsp;#pkts dec'ed 0 drop 0 life (KB/Sec) 0/0                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Outbound: #pkts enc'ed 0 drop 0 life (KB/Sec) 0/0                               <br>
&nbsp;&nbsp; Outbound SPI : 0x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0, transform :                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;Socket State: Closed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                          <br>
Pending DMVPN Sessions:                                                                 <br>
                                                                                        <br>
SPOKE1(config-if)#                                                                      <br>
</code></div>
</p>

<h3><code>show crypto ipsec sa detail</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
   <code>
   HUB#<b>show crypto ipsec sa detail</b><br> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                  <br>
interface: Tunnel0                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;Crypto map tag: Tunnel0-head-0, local addr 10.10.1.1                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                  <br>
&nbsp;&nbsp; protected vrf: (none)                                                    <br>
&nbsp;&nbsp; local&nbsp;&nbsp;ident (addr/mask/prot/port): (10.10.1.1/255.255.255.255/47/0)     <br>
&nbsp;&nbsp; remote ident (addr/mask/prot/port): (10.10.1.3/255.255.255.255/47/0)     <br>
&nbsp;&nbsp; current_peer 10.10.1.3 port 500                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp; PERMIT, flags={origin_is_acl,}                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts encaps: 1016, #pkts encrypt: 1016, #pkts digest: 1016             <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts decaps: 1024, #pkts decrypt: 1024, #pkts verify: 1024             <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts compressed: 0, #pkts decompressed: 0                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts not compressed: 0, #pkts compr. failed: 0                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts not decompressed: 0, #pkts decompress failed: 0                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts no sa (send) 0, #pkts invalid sa (rcv) 0                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts encaps failed (send) 0, #pkts decaps failed (rcv) 0               <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts invalid prot (recv) 0, #pkts verify failed: 0                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts invalid identity (recv) 0, #pkts invalid len (rcv) 0              <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts replay rollover (send): 0, #pkts replay rollover (rcv) 0          <br>
&nbsp;&nbsp;&nbsp;&nbsp;##pkts replay failed (rcv): 0                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts tagged (send): 0, #pkts untagged (rcv): 0                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts not tagged (send): 0, #pkts not untagged (rcv): 0                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts internal err (send): 0, #pkts internal err (recv) 0               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp; local crypto endpt.: 10.10.1.1, remote crypto endpt.: 10.10.1.3        <br>
&nbsp;&nbsp;&nbsp;&nbsp; plaintext mtu 1442, path mtu 1500, ip mtu 1500, ip mtu idb GigabitEthernet0/0<br>
&nbsp;&nbsp;&nbsp;&nbsp; current outbound spi: 0xB5895749(3045676873)                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; PFS (Y/N): N, DH group: none                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound esp sas:                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spi: 0x70EA8A16(1894418966)                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform: esp-aes esp-sha512-hmac ,                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in use settings ={Transport, }                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn id: 7, flow_id: SW:7, sibling_flags 80000000, crypto map: Tunnel0-head-0  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sa timing: remaining key lifetime (k/sec): (4181657/2972)                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IV size: 16 bytes                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replay detection support: Y                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status: ACTIVE(ACTIVE)                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound ah sas:                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound pcp sas:                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound esp sas:                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spi: 0xB5895749(3045676873)                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform: esp-aes esp-sha512-hmac ,                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in use settings ={Transport, }                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn id: 8, flow_id: SW:8, sibling_flags 80000000, crypto map: Tunnel0-head-0  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sa timing: remaining key lifetime (k/sec): (4181659/2972)                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IV size: 16 bytes                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replay detection support: Y                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status: ACTIVE(ACTIVE)                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound ah sas:                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound pcp sas:                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp; protected vrf: (none)                                                               <br>
&nbsp;&nbsp; local&nbsp;&nbsp;ident (addr/mask/prot/port): (10.10.1.1/255.255.255.255/47/0)                <br>
&nbsp;&nbsp; remote ident (addr/mask/prot/port): (10.10.1.2/255.255.255.255/47/0)                <br>
&nbsp;&nbsp; current_peer 10.10.1.2 port 500                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp; PERMIT, flags={origin_is_acl,}                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts encaps: 1022, #pkts encrypt: 1022, #pkts digest: 1022                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts decaps: 1022, #pkts decrypt: 1022, #pkts verify: 1022                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts compressed: 0, #pkts decompressed: 0                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts not compressed: 0, #pkts compr. failed: 0                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts not decompressed: 0, #pkts decompress failed: 0                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts no sa (send) 0, #pkts invalid sa (rcv) 0                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts encaps failed (send) 0, #pkts decaps failed (rcv) 0                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts invalid prot (recv) 0, #pkts verify failed: 0                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts invalid identity (recv) 0, #pkts invalid len (rcv) 0                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts replay rollover (send): 0, #pkts replay rollover (rcv) 0                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;##pkts replay failed (rcv): 0                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts tagged (send): 0, #pkts untagged (rcv): 0                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts not tagged (send): 0, #pkts not untagged (rcv): 0                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;#pkts internal err (send): 0, #pkts internal err (recv) 0                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; local crypto endpt.: 10.10.1.1, remote crypto endpt.: 10.10.1.2                   <br>
&nbsp;&nbsp;&nbsp;&nbsp; plaintext mtu 1442, path mtu 1500, ip mtu 1500, ip mtu idb GigabitEthernet0/0     <br>
&nbsp;&nbsp;&nbsp;&nbsp; current outbound spi: 0xD07B32DF(3497734879)                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp; PFS (Y/N): N, DH group: none                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound esp sas:                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spi: 0x75C10060(1975582816)                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform: esp-aes esp-sha512-hmac ,                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in use settings ={Transport, }                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn id: 5, flow_id: SW:5, sibling_flags 80000000, crypto map: Tunnel0-head-0  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sa timing: remaining key lifetime (k/sec): (4173553/2378)                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IV size: 16 bytes                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replay detection support: Y                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status: ACTIVE(ACTIVE)                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound ah sas:                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; inbound pcp sas:                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound esp sas:                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spi: 0xD07B32DF(3497734879)                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform: esp-aes esp-sha512-hmac ,                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in use settings ={Transport, }                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn id: 6, flow_id: SW:6, sibling_flags 80000000, crypto map: Tunnel0-head-0  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sa timing: remaining key lifetime (k/sec): (4173552/2378)                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IV size: 16 bytes                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replay detection support: Y                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status: ACTIVE(ACTIVE)                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound ah sas:                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp; outbound pcp sas:                                                                 <br>
HUB#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                             <br>
   </code></div>
</p>


<h3><code>show crypto ikev2 sa detailed</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
   <code>
HUB#<b>show crypto ikev2 sa detailed</b><br> 
&nbsp;IPv4 Crypto IKEv2  SA                                                                                   <br>
                                                                                                         <br>
Tunnel-id Local&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remote&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fvrf/ivrf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status                        <br>
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.10.1.1/500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.10.1.3/500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; none/none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;READY                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Encr: AES-CBC, keysize: 256, PRF: SHA512, Hash: SHA512, DH Grp:5, Auth sign: PSK, Auth verify: PSK <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Life/Active Time: 86400/610 sec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CE id: 1004, Session-id: 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status Description: Negotiation done&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local spi: A0F8071EC395BD3C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remote spi: 97AE858B6CAA71A2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local id: 10.10.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote id: 10.10.1.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local req msg id:&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote req msg id:&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local next msg id: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote next msg id: 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local req queued:&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote req queued:&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local window:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote window:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DPD configured for 0 seconds, retry 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fragmentation not&nbsp;&nbsp;configured.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dynamic Route Update: disabled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extended Authentication not configured.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NAT-T is not detected&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cisco Trust Security SGT is disabled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initiator of SA : No&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
Tunnel-id Local&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remote&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fvrf/ivrf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status                        <br>
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.10.1.1/500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.10.1.2/500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; none/none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;READY                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Encr: AES-CBC, keysize: 256, PRF: SHA512, Hash: SHA512, DH Grp:5, Auth sign: PSK, Auth verify: PSK <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Life/Active Time: 86400/1204 sec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CE id: 1003, Session-id: 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status Description: Negotiation done&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local spi: B085F9ECBA72967E&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remote spi: 69A6A65ED87EC303&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local id: 10.10.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote id: 10.10.1.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local req msg id:&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote req msg id:&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local next msg id: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote next msg id: 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local req queued:&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote req queued:&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local window:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote window:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DPD configured for 0 seconds, retry 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fragmentation not&nbsp;&nbsp;configured.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dynamic Route Update: disabled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extended Authentication not configured.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NAT-T is not detected&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cisco Trust Security SGT is disabled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initiator of SA : No&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                           <br>
 IPv6 Crypto IKEv2  SA                                                                                   <br>
</code></div>
 </p>
 
 <p>
On the client
</p>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
   <code>
SPOKE2#<b>show crypto ikev2 sa detailed</b>                                                               <br>
&nbsp;IPv4 Crypto IKEv2  SA                                                                                    <br>
                                                                                                          <br>
Tunnel-id Local&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remote&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fvrf/ivrf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status&nbsp;&nbsp;                       <br>
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.10.1.3/500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.10.1.1/500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; none/none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;READY&nbsp;&nbsp;                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Encr: AES-CBC, keysize: 256, PRF: SHA512, Hash: SHA512, DH Grp:5, Auth sign: PSK, Auth verify: PSK  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Life/Active Time: 86400/78 sec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CE id: 1002, Session-id: 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status Description: Negotiation done&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local spi: 97AE858B6CAA71A2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remote spi: A0F8071EC395BD3C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local id: 10.10.1.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote id: 10.10.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local req msg id:&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote req msg id:&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local next msg id: 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote next msg id: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local req queued:&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote req queued:&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local window:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote window:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DPD configured for 0 seconds, retry 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fragmentation not&nbsp;&nbsp;configured.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dynamic Route Update: disabled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extended Authentication not configured.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NAT-T is not detected&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cisco Trust Security SGT is disabled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initiator of SA : Yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        <br>
&nbsp;IPv6 Crypto IKEv2&nbsp;&nbsp;SA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                        <br>
</code></div>
</p>

	

<h3><code>show crypto ikev2 profile</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
   <code>
HUB#<b>show crypto ikev2 profile</b><br> 
                                                    <br>
IKEv2 profile: IKEv2_PROF                           <br>
&nbsp;Ref&nbsp;Count: 6                                       <br>
&nbsp;Match criteria:                                    <br>
&nbsp;&nbsp;Fvrf: global                                      <br>
&nbsp;&nbsp;Local address/interface: none                     <br>
&nbsp;&nbsp;Identities:                                       <br>
&nbsp;&nbsp;&nbsp;address 0.0.0.0                                  <br>
&nbsp;&nbsp;Certificate maps: none                            <br>
&nbsp;Local identity: none                               <br>
&nbsp;Remote identity: none                              <br>
&nbsp;Local authentication method: pre-share             <br>
&nbsp;Remote authentication method(s): pre-share         <br>
&nbsp;EAP&nbsp;options: none                                  <br>
&nbsp;Keyring: IKEv2_KEYRING                             <br>
&nbsp;Trustpoint(s): none                                <br>
&nbsp;Lifetime: 86400 seconds                            <br>
&nbsp;DPD: disabled                                      <br>
&nbsp;NAT-keepalive: disabled                            <br>
&nbsp;Ivrf: none                                         <br>
&nbsp;Virtual-template: none                             <br>
&nbsp;mode auto: none                                    <br>
&nbsp;AAA&nbsp;AnyConnect EAP authentication mlist: none      <br>
&nbsp;AAA&nbsp;EAP authentication mlist: none                 <br>
&nbsp;AAA&nbsp;Accounting: none                               <br>
&nbsp;AAA&nbsp;group authorization: none                      <br>
&nbsp;AAA&nbsp;user authorization: none                       <br>
HUB#
</code></div>
</p>

<h3><code>show crypto ikev2 stats</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
   <code>
SPOKE1#<b>show crypto ikev2 stats</b><br> 
--------------------------------------------------------------------------------      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Crypto IKEv2 SA Statistics                                  <br>
--------------------------------------------------------------------------------      <br>
System Resource Limit:&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Max IKEv2 SAs: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Max in nego(in/out): 40/400 <br>
Total incoming IKEv2 SA Count:&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;active:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;negotiating: 0     <br>
Total outgoing IKEv2 SA Count:&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;active:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;negotiating: 0     <br>
Incoming IKEv2 Requests: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accepted:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rejected:&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;            <br>
Outgoing IKEv2 Requests: 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accepted:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rejected:&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;            <br>
Rejected IKEv2 Requests: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rsrc low:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SA limit:&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;            <br>
IKEv2 packets dropped at dispatch: 0                                                  <br>
Incoming Requests dropped as LOW Q limit reached : 0                                  <br>
Incoming IKEV2 Cookie Challenged Requests: 0                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;accepted: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rejected: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rejected no cookie: 0                       <br>
Total Deleted sessions of Cert Revoked Peers: 0                                       <br>
                                                                                      <br>
SPOKE1#
</code></div>
</p>


<h3><code>show crypto ipsec profile</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
   <code>
SPOKE1(config-if)#<b>do show crypto ipsec profile</b>                 <br>
IPSEC profile IPSEC_PROF                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IKEv2 Profile: IKEv2_PROF                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Security association lifetime: 4608000 kilobytes/3600 seconds <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Responder-Only (Y/N): N                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PFS (Y/N): N                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mixed-mode : Disabled                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transform sets={                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IPSEC_TSET:  { esp-aes esp-sha512-hmac  } ,           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                    <br>
IPSEC profile default                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Security association lifetime: 4608000 kilobytes/3600 seconds <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Responder-Only (Y/N): N                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PFS (Y/N): N                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mixed-mode : Disabled                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transform sets={                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;&nbsp;{ esp-aes esp-sha-hmac  } ,                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                    <br>
SPOKE1(config-if)#                                                    <br>
</code></div>
</p>


<h3><code>show crypto ikev2 profile</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
   <code>
SPOKE1#<b>show crypto ikev2 profile</b>          <br>
                                                 <br>
IKEv2 profile: IKEv2_PROF                        <br>
&nbsp;Ref Count: 5                                    <br>
&nbsp;Match criteria:                                 <br>
&nbsp;&nbsp;Fvrf: global                                   <br>
&nbsp;&nbsp;Local address/interface: none                  <br>
&nbsp;&nbsp;Identities:                                    <br>
&nbsp;&nbsp;&nbsp;address 0.0.0.0                               <br>
&nbsp;&nbsp;Certificate maps: none                         <br>
&nbsp;Local identity: none                            <br>
&nbsp;Remote identity: none                           <br>
&nbsp;Local authentication method: pre-share          <br>
&nbsp;Remote authentication method(s): pre-share      <br>
&nbsp;EAP options: none                               <br>
&nbsp;Keyring: IKEv2_KEYRING                          <br>
&nbsp;Trustpoint(s): none                             <br>
&nbsp;Lifetime: 86400 seconds                         <br>
&nbsp;DPD: disabled                                   <br>
&nbsp;NAT-keepalive: disabled                         <br>
&nbsp;Ivrf: none                                      <br>
&nbsp;Virtual-template: none                          <br>
&nbsp;mode auto: none                                 <br>
&nbsp;AAA AnyConnect EAP authentication mlist: none   <br>
&nbsp;AAA EAP authentication mlist: none              <br>
&nbsp;AAA Accounting: none                            <br>
&nbsp;AAA group authorization: none                   <br>
&nbsp;AAA user authorization: none                    <br>
SPOKE1#                                          <br>
</code></div>
</p>

<h3><code>show crypto ikev2 policy</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
   <code>
SPOKE1#<b>show crypto ikev2 policy</b><br> 
                                     <br>
&nbsp;IKEv2 policy : default              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Match fvrf : any               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Match address local : any      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Proposal&nbsp;&nbsp;&nbsp;&nbsp;: default          <br>
SPOKE1#                              <br>
</code></div>
</p>
<h3><code>show crypto ikev2 session</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
   <code>
SPOKE1#<b>show crypto ikev2 session</b><br> 
&nbsp;IPv4 Crypto IKEv2 Session<br> 
<br>
Session-id:1, Status:UP-ACTIVE, IKE count:1, CHILD count:1<br>
<br>
Tunnel-id Local&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remote&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fvrf/ivrf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status                          <br>
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.10.1.2/500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.10.1.1/500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; none/none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;READY                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Encr: AES-CBC, keysize: 256, PRF: SHA512, Hash: SHA512, DH Grp:5, Auth sign: PSK, Auth verify: PSK   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Life/Active Time: 86400/132 sec                                                                      <br>
Child sa: local selector&nbsp;&nbsp;10.10.1.2/0 - 10.10.1.2/65535                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remote selector 10.10.1.1/0 - 10.10.1.1/65535                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESP spi in/out: 0xD07B32DF/0x75C10060                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                 <br>
&bnsp;IPv6 Crypto IKEv2 Session                                                                                 <br>
                                                                                                           <br>
SPOKE1#                                                                                                    <br>
</code></div>
</p>

<h3><code>show crypto ikev2 session detail</code></h3>
<p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#D3D3D3">
   <code>
SPOKE1#<b>show crypto ikev2 session detail</b>                                                            <br>
 IPv4 Crypto IKEv2 Session                                                                                <br>
                                                                                                          <br>
Session-id:1, Status:UP-ACTIVE, IKE count:1, CHILD count:1                                                <br>
                                                                                                          <br>
Tunnel-id Local&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remote&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fvrf/ivrf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status                         <br>
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.10.1.2/500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.10.1.1/500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; none/none&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;READY                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Encr: AES-CBC, keysize: 256, PRF: SHA512, Hash: SHA512, DH Grp:5, Auth sign: PSK, Auth verify: PSK  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Life/Active Time: 86400/137 sec                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CE id: 1002, Session-id: 1                                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status Description: Negotiation done                                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local spi: 69A6A65ED87EC303&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Remote spi: B085F9ECBA72967E                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local id: 10.10.1.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote id: 10.10.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local req msg id:&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote req msg id:  0                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local next msg id: 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote next msg id: 0                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local req queued:&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote req queued:  0                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local window:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote window:      5                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DPD configured for 0 seconds, retry 0                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fragmentation not  configured.                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dynamic Route Update: disabled                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extended Authentication not configured.                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NAT-T is not detected                                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cisco Trust Security SGT is disabled                                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initiator of SA : Yes                                                                               <br>
Child sa: local selector  10.10.1.2/0 - 10.10.1.2/65535                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remote selector 10.10.1.1/0 - 10.10.1.1/65535                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESP spi in/out: 0xD07B32DF/0x75C10060                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AH spi in/out: 0x0/0x0                                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPI in/out: 0x0/0x0                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Encr: AES-CBC, keysize: 128, esp_hmac: SHA512                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ah_hmac: None, comp: IPCOMP_NONE, mode transport                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                <br>
 IPv6 Crypto IKEv2 Session                                                                                <br>
                                                                                                          <br>
SPOKE1#
</code></div>
</p>



<h2>Protection and Optimisation of DMVPN Tunnel</h2>
<p>

</p>

<h3>Protection of IKEv2</h3>
<p>
The command <code><b>crypto ikev2 limit max-in-negotiation-sa limit | max-sa limit outgoing</b></code> 
limits the number of sessions being established or that are allowed to establish.
<ul>
    <li><b>Max-sa:</b> limits the total count of SAs that a router can establish 
    under normal conditions. The value should be set to double the number of ongoing 
    sessions in order to achieve renegotiation.</li>
    <li><b>Max-in-negotiation-sa:</b> limits the number of SAs being negotiated 
    at any one time.</li>
</ul>
<p>
To protect the IKE from half open sessions, a cookie can be used to validate that
sessions are valid IKEv2 sessions and not a Denial of Service (DoS) attack. The 
command <code><b>crypto ikev2 cookie-challege &lt;challenge-number&gt;</b></code> defines the threshold of 
half-open SAs before issuing an IKEv2 challenge.
</p>
<h3>Verification</h3>
<p>                                                                
<code><b>show crypto ikev2 stats</b></code>
</p>

<h2>IPSec Packet Replay Protection</h2>
<p>
The IPSec implementation includes an anti-replay mechanism that prevents intruders 
from duplicating encrypted packets by assigning a unique sequence number to each 
encrypted packet. When a router decrypts the IPSec packets, it keeps track of the 
packets it has received. The IPSec anti-replay service rejects (discards) duplicate packets or old packets.
</p>
<p>
The router identifies acceptable packet age according to the following logic;
the router maintains a sequence number window size (default of 64 packets). 
The minimum sequence number is defined as the highest sequence number for a packet 
minus the window size. A packet is considered of age when the sequence number is 
between the minimum sequence number and the highest sequence number.
</p>
<p>
At times, the default 64-packet window size is not adequate. Encryption is where
the sequence number is set and this happens before any Quality of Server (QoS) 
policies are processed. Packets can be delayed because of QoS priorities, 
resulting in out-of-order packets where low-priority packets are queued, whereas 
high-priority packets are immediately forwarded. The sequence number increases 
on the receiving router because the high-priority packets shift the window ahead 
and when the lower priority packets arrive, they are discarded.
</p>
<p>
Increasing the anti-replay window size does not impact throughput or security.
An additional 128 bytes per incoming IPSec SA are needed to store the sequence 
number on the decryptor. The window size is increased globally with the command 
crypto ipsec security-association replay window-size size. Cisco recommends using 
the largest window size possible for the hardware. Usually it is 1024.
</p>

<h2>Dead Peer Detection (DPD)</h2>
<p>
When two routers establish an IPSec VPN tunnel between them, it is possible that
connectivity between the two routers can be lost for some reason. In most scenarios,
IKE and IPSec do not natively detect a loss of peer connectivity, which results in 
network traffic being black-holed until the SA lifetime expires.
</p>
<p>
The use of dead peer detection (DPD) helps detect the loss of connectivity to a 
remote IPSec peer. 
</p>
<p>
Cisco supports two types of DPD: on-demand and periodic.
When DPD is enabled in on-demand mode, the two routers check 
for connectivity only when traffic needs to be sent and the peers liveliness is
questionable. In such scenarios, the router sends a DPD R-U-THERE request to query 
the status of the remote peer. If the remote peer does not respond, the requesting 
router starts to transmit additional R-U-THERE messages every retry interval for a 
maximum of five retries. If no response is received, that peer is declared dead.
</p>
<p>
 DPD is supported by IKEv1
and IKEv2:
<ul>
  <li><b>IKEv2:</b> DPD is configured with the global configuration command 
  <code><b>crypto ikev2 dpd &lt;interval-time&gt; &lt;retry-time&gt; [on-demand | periodic]</b></code>. 
  DPD is also configured using the IKEV2 profile mode command <code><b>dpd  &lt;interval-time&gt; &lt;retry-time&gt; [on-demand | periodic]</b></code>.
  It is recommended that the interval time be set to twice that of the routing protocol hold time.
<p>
<p>
As it consumes CPU, it is recommended that DPD be configured on the spokes and 
not on the hubs because a hub may have to maintain state of hundreds of branch routers.
</p>

<h2>Network Address Translation (NAT) Keepalives</h2>
<p>
NAT keepalives are enabled to keep the dynamic NAT mapping alive during a 
connection between two peers. NAT keepalives are UDP packets that contain an 
unencrypted payload of 1 byte. When DPD is used to detect peer liveliness, NAT 
keepalives are sent if the IPSec entity has not transmitted or received a packet
within a specified period of time. It is configured on sopes because the routing
protocol messages such as Hello and update messages between the hub and spoke 
keeps the NAT state active whereas spoke to spoke tunnels do not maintain a 
routing neighborship so NAT state is not maintained. NAT keepalives are enabled 
with the command <code><b>crypto isakmp nat keepalive &lt;seconds&gt;</b></code>.
</p>

