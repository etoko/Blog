<h1> Implementing OSPFv3</h1>
<h2>Differences between OSPFv2 and OSPFv3</h2>
<p>
OSFPv3 is defined in RFC 5340. Like OSPFv2, OSPFv3 uses IP protocol 89. 
OSPFv3, in many ways functions similar to OSPF with most algorithms for OSPFv2 being preserved. 
The key differences between OSPFv3 and OSPFv2:
<ul>
  <li><b>Packet format: </b> OSPFv3 runs over IPv6 and the number of fields in the packet header has been reduced:
    <ul>
      <li> The authentication fields have been removed</li>
      <li>Hello packet address information has been removed. Instead it contains the interface ID which is used as the network
    -LSA's Link State ID if the router becomes a DR.
    </ul>
  </li>
  <li><b>Neighbor adjacencies: </b> OSPFv3 inter-router communication is handled by link-local addressing with the 
  source IP address being exclusively a link-local IPv6 address; the only exception being virtual-links where a global 
  prefix is used.
  The destination address depends on the network type.
  </li>
  <li><b>Support for IPv4 and IPv6:</b> OSPFv3 supports IPv6 and IPv4 address-families. However, to advertise IPv4 prefixes, 
  both IPv4 and IPv6 must be enabled on the link due to OSPFv3 use of link-local addressing for inter-router communication.</li>
  <li><b>New LSA types: </b>LSA types 8 (link) and 9 (intra-area prefix) have been introduced while types 3 and 4 have been renamed 
  to inter-area prefix and inter-area router LSA respectively.</li>
  <li><b>Removal of addressing semantics: </b>addressing information has been removed from OSPFv3 packets and 
  is now carried as LSA payloads in Link Sate Update packets. This makes 
  OSPFv3 easily adaptable to new network protocols. The router-LSA and network-LSAs no longer contain network 
  addresses. They express topology information.</li>
  <li><b>Security: </b>OSPFv3 does not natively support authentication as does OSPFv2. This is because the authentication 
  related headers have been removed.
  However it leverages encryption and authentication features of IPSec. </li>
</ul>
</p>

<h3> OSPFv3 LSA Flooding Scope</h3>
<p>
OSPFv3 flooding scope is now explicitly coded in the LSA's LS type field:
<ol>
  <li><b>Link-local scope: </b> limited to the local-link and not beyond. It is used for the link-LSA.</li>
  <li><b>Area scope: </b>LSA flooding to a single area only. It is used for router-LSAs, network-LSAs, 
      inter-area-prefix-LSAs, inter-area-router-LSAs, and intra-area-prefix-LSAs. </li>
  <li><b>Autonomous System scope: </b>flooding throughout the entire OSPF routing domain. 
  OSPFv3 type 5 LSAs have AS scoping.  A router that originates AS-scoped LSAs is
      considered an AS Boundary Router (ASBR) and will set its E-bit in router-LSAs for regular areas.
</ol>
</p>
The LS type field has been increased from 8 bits to 16-bits. The three high-order bits of the new 
LS type field allow for the encoding of flooding information. The first bit U (unrecognised) indicates how a router 
should handle an LSA if it is unrecognised. The second and third bits, both S (scope) bits, indicate how 
the LSA should be flooded. The remaining bits of the link-state field indicate the function code of the LSA.

<p>
OSPFv3 uses two multicast addresses to maintain neighbor adjacencies and support route exchange:
<ul>
  <li><b>FF02::5 (AllSPFRouters):</b> In broadcast and non-broadcast network types, 
  the DR sends updates to DROthers using this multicast address and  
  its interface link-local address as the source IPv6 address. In point-to-point and point-to-multipoint network types, 
  routers send updates to the AllSPFRouters multicast address.
  Where neighbors are configured manually, unicast updates are sent.</li>
  <li><b>FF02::6 (AllDRouters):</b> address is configured automatically on a 
  designated router (DR) and backup designated router(BDR) interface in a broadcast 
  and non-broadcast network type after their successful election.
  DROther routers send updates to this address and the DR updates the rest of the routers on the segment 
  by sending the update to the AllSPFRouters multicast address (FF02::5).
  </li>
</ul>
Presence of any of the OSPFv3 multicast addresses on an interface confirms that the network that interface is 
participating in is being advertised with OSPFv3. This can be verified by the 
<code>show ipv6 interface <i>interface_id</i></code> privileged-mode command:
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R7#                                                           <br />
R7#<b>show ipv6 interface gigabitethernet0/0  </b>            <br />
GigabitEthernet0/0 is up, line protocol is up                 <br />
&nbsp;&nbsp;IPv6 is enabled, link-local address is FE80::C807:5FF:FE33:8<br />
&nbsp;&nbsp;No Virtual link-local address(es):                          <br />
&nbsp;&nbsp;No global unicast address is configured                     <br />
&nbsp;&nbsp;Joined group address(es):                                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;FF02::1                                                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;FF02::2                                                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color:#DCDCDC">FF02::5</span>     <br />
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color:#DCDCDC">FF02::6</span>     <br />
&nbsp;&nbsp;&nbsp;&nbsp;FF02::1:FF33:8                                            <br />
&nbsp;&nbsp;MTU is 1500 bytes                                           <br />
&nbsp;&nbsp;ICMP error messages limited to one every 100 milliseconds   <br />
&nbsp;&nbsp;ICMP redirects are enabled                                  <br />
&nbsp;&nbsp;ICMP unreachables are sent                                  <br />
&nbsp;&nbsp;ND DAD is enabled, number of DAD attempts: 1                <br />
&nbsp;&nbsp;ND reachable time is 30000 milliseconds (using 30000)       <br />
&nbsp;&nbsp;ND advertised reachable time is 0 (unspecified)             <br />
&nbsp;&nbsp;ND advertised retransmit interval is 0 (unspecified)        <br />
&nbsp;&nbsp;ND router advertisements are sent every 200 seconds         <br />
&nbsp;&nbsp;ND router advertisements live for 1800 seconds              <br />
&nbsp;&nbsp;ND advertised default router preference is Medium           <br />
&nbsp;&nbsp;Hosts use stateless autoconfig for addresses.               <br />
R7#                                                           <br />
 
</code>
</div>
<p>
From the output above, R7 is a DR or BDR on the segment that interface Gigabitethernet0/0 is 
connected to.
</p>

<h3> Explicit Support for Multiple Instances Per Link </h3>
<p>
OSPFv3 supports the ability to run multiple OSPF protocol instances on a single link. This is accomplished through the 
use of the "Instance ID" contained in the OSPF packet header and OSPFv3 interface data structures.
Instance ID affects the reception of OSPFv3 packets. Through support for multiple instances per link, 
OSPFv3 makes it possible to have a single link belong to two or more OSPFv3 areas. Additionally, separate OSPF 
routing domains may be configured with a link participating in each domain and the domains keeping their data structures 
separate.
</p>

<h2>OSPFv3 Configuration</h2>
To enable a router to participate in an OSPFv3 domain:
<p>
<b>Step 1 Initialize IPv6 unicast routing:</b> OSPFv3 requires IPv6 to be running on the router. It will not initialize if 
IPv6 is not enabled.
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R7#<b>configure terminal</b>                                       <br />
Enter configuration commands, one per line.  End with CNTL/Z.      <br />
R7(config)#<b>ipv6 unicast-routing</b>                             <br />
</code>
</div>
</p><p>
<b>Step 2 Initialize OSPFv3 process:</b> with the config mode command 
<code>router ospfv6 <i>process_id</i> :
</code>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
 <code>
R7(config)#<b>router ospfv3 1 </b>
 </code>
</div>
</p>

<p>
<b>Step 3 Define the router ID: </b> the router ID (RID) is used to uniquely identify a router in 
the OSPFv3 domain. If more than one router is using the same RID, some prefixes may be dropped by a 
router with the belief that the dropped prefixes were locally originated. This will result in sub-optimal 
routing at best. Note that the RID of 0.0.0.0 is reserved and should not be used.
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R7(config-router)#<b>router-id 7.7.7.7</b>
</code>
</div>
</p>

<p>
<b>Step 4:</b> Enable OSPFv3 on the interface:
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R7(config)#                                <br />
R7(config)#<b>interface gigabitethernet 0/0 </b>  <br />
R7(config-if)#<b>ospfv3 1 ipv6 area 7    </b>     <br />
</code>
</div>
</p>

<p>It is good practice to confirm the OSPFv3 configuration by using some verification commands:</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R7#<b>show ospfv3 interface gigabitethernet 0/0 </b>                                <br /> 
GigabitEthernet0/0 is up, line protocol is up                                <br /> 
&nbsp;&nbsp;Link Local Address FE80::C807:5FF:FE33:8, Interface ID 4                   <br /> 
&nbsp;&nbsp;<span style="background-color:#dddcdc">Area 7, Process ID 1</span>, Instance ID 0, Router ID 7.7.7.7                     <br /> 
&nbsp;&nbsp;Network Type BROADCAST, Cost: 1                                            <br /> 
&nbsp;&nbsp;Transmit Delay is 1 sec, State DR, Priority 1                              <br /> 
&nbsp;&nbsp;Designated Router (ID) 7.7.7.7, local address FE80::C807:5FF:FE33:8        <br /> 
&nbsp;&nbsp;Backup Designated router (ID) 6.6.6.6, local address FE80::C806:5FF:FE94:8 <br /> 
&nbsp;&nbsp;Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5       <br /> 
&nbsp;&nbsp;&nbsp;&nbsp;Hello due in 00:00:05                                                    <br /> 
&nbsp;&nbsp;Graceful restart helper support enabled                                    <br /> 
&nbsp;&nbsp;Index 1/5/5, flood queue length 0                                          <br /> 
&nbsp;&nbsp;Next 0x0(0)/0x0(0)/0x0(0)                                                  <br /> 
&nbsp;&nbsp;Last flood scan length is 3, maximum is 10                                 <br /> 
&nbsp;&nbsp;Last flood scan time is 0 msec, maximum is 4 msec                          <br /> 
&nbsp;&nbsp;Neighbor Count is 2, Adjacent neighbor count is 2                          <br /> 
&nbsp;&nbsp;&nbsp;&nbsp;Adjacent with neighbor 6.6.6.6  (Backup Designated Router)               <br /> 
&nbsp;&nbsp;&nbsp;&nbsp;Adjacent with neighbor 8.8.8.8                                           <br /> 
&nbsp;&nbsp;Suppress hello for 0 neighbor(s)                                           <br /> 
R7#                                                                           <br />
R7#<b>show ospfv3 neighbor </b>                                                      <br />
                                                                                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPFv3 1 address-family ipv6 (router-id 7.7.7.7)                           <br />
                                                                                     <br />
Neighbor ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pri&nbsp;&nbsp;&nbsp;State&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dead Time&nbsp;&nbsp;&nbsp;Interface ID&nbsp;&nbsp;&nbsp;&nbsp;Interface          <br />
8.8.8.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;FULL/  - &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:36&nbsp;&nbsp;&nbsp;&nbsp;11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;POS5/0             <br />
6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/BDR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:30&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GigabitEthernet0/0 <br />
8.8.8.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/DROTHER&nbsp;&nbsp;&nbsp;&nbsp;00:00:31&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GigabitEthernet0/0 <br />

</code>
</div>
<p>
R7's Gigabitethernet0/0 interface does not have a global prefix configured. If R7 does not 
have a global prefix configured on any of its interfaces, it will still form an adjacency. However, it will not 
have prefixes to share in its updates.
</p>

<h3>Passive Interfaces</h3>
<p>
Passive interfaces are interfaces whose configured networks are advertised into OSPFv3, but 
OSPFv3 neighbor adjacencies cannot form over these interfaces. Hellos sent to this interface are not processed. 
Additionally, this interface does not receive Hello packets.
</p>

<p>
To make all interfaces passive:
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R7(config)#<b>router ospfv3 1 </b> <br />
R7(config-router)#<b>passive-interface default </b><br />
</code>
</div>
<p>
After making all interfaces passive as indicated above, some interfaces will need to be 
configured as active to allow adjacency formation and LSDB synchronization. This can be accomplished with 
the negation command: <code>no passive-interface <i>interface</i></code>
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R7(config)#<b>router ospfv3 1 </b> <br />
R7(config-router)#<b>no passive-interface gigabitethernet0/0 </b> <br />
</code>
</div>
<p>
To configure a specific interface as a passive interface:
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R7(config)#<b>router ospfv3 1 </b><br />
R7(config-router)#<b>passive-interface loopback 14</b> <br />
</code>
</div>
<p>
If not configured under a specific address-family, the passive-interface state applies to 
an interface running both IPv4 and IPv6 network protocols.
</p>

<p>
OSPFv3 displays all interfaces on which it is running regardless of whether the interface 
is configured as a passive interface or not.
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R7#<b>show ospfv3 interface brief </b>                                    <br />
Interface&nbsp;&nbsp;&nbsp;&nbsp;PID&nbsp;&nbsp;&nbsp;Area&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cost&nbsp;&nbsp;State Nbrs F/C        <br />
Lo10 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IPv6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOOP&nbsp;&nbsp;0/0             <br />
Lo11 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IPv6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOOP&nbsp;&nbsp;0/0             <br />
Lo13 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IPv6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOOP&nbsp;&nbsp;0/0             <br />
Lo14 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IPv6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOOP&nbsp;&nbsp;0/0             <br />
PO5/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IPv6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P2P &nbsp;&nbsp;1/1             <br />
Gi0/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IPv6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DROTH 2/2             <br />

</code>
</div>

<h2>OSPF Neighbor Adjacency</h2>
The process of creating a neighborship with another OSPF enabled router is known as a neighborship. Neighboring OSPF-enabled routers need to become adjacent in order to share their known routers. The adjacency stage depends on the OSPF network type of the neighbors. 
For a routers to become adjacent to each other, some preconditions exist that if 
met, a neighborship is formed:
<ul>
  <li>The router ID values (RIDs) are used to uniquely identify an OSPF-enabled router 
  in the OSPF domain. The RIDs of the two routers must be unique.
  The RID can be viewed using most OSPF show commands.
  <div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
R7#<b>show ospfv3 </b>                                                                       <br />
&nbsp;OSPFv3 1 address-family ipv6                                                           <br />
&nbsp;<span style="background-color:#dcdcdc">Router ID 7.7.7.7 </span>                          <br />
&nbsp;Event-log enabled, Maximum number of events: 1000, Mode: cyclic                        <br />
&nbsp;Router is not originating router-LSAs with maximum metric                              <br />
&nbsp;Initial SPF schedule delay 5000 msecs                                                  <br />
&nbsp;Minimum hold time between two consecutive SPFs 10000 msecs                             <br />
&nbsp;Maximum wait time between two consecutive SPFs 10000 msecs                             <br />
&nbsp;Minimum LSA interval 5 secs                                                            <br />
&nbsp;Minimum LSA arrival 1000 msecs                                                         <br />
&nbsp;LSA group pacing timer 240 secs                                                        <br />
&nbsp;Interface flood pacing timer 33 msecs                                                  <br />
&nbsp;Retransmission pacing timer 66 msecs                                                   <br />
&nbsp;Number of external LSA 0. Checksum Sum 0x000000                                        <br />
&nbsp;Number of areas in this router is 1. 1 normal 0 stub 0 nssa                            <br />
&nbsp;Graceful restart helper support enabled                                                <br />
&nbsp;Reference bandwidth unit is 100 mbps                                                   <br />
&nbsp;RFC1583 compatibility enabled                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;Area 7                                                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of interfaces in this area is 6       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPF algorithm executed 2 times               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of LSA 15. Checksum Sum 0x08DD16      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of DCbitless LSA 0                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of indication LSA 0                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of DoNotAge LSA 0                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flood list length 0                          <br />
                                                                                             <br />
R7#                                                                                          <br />
  </code>
  </div>
  .</li>
  <li>Interfaces must be OSPF active (in an Up state). The interface through-which the 
  adjacency is to be formed must have OSPF enabled on it and must not be in an OSPF passive state.</li>

  <li>Interface MTU must match. Default MTU is 1500.</li>
  <li>Area ID for the segment must match.</li>
  <li>Need for a DR for the segment must match. The broadcast and non-broadcast network types require a DR while the point-to-point and point-to-multipoint network types do not require a DR.</li>
  <li>Hello and Dead intervals must match </li>
  <li>Authentication type and credentials must match </li>
  <li>Area type flags must match i.e. whether normal, stubby or Not-So-Stubby Area(NSSA).</li>
</ul>
<p>
Mismatched MTUs can be ignored using the command:
</p>
 <div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
   R7(config)#<b> interface g0/0 </b> <br />
  R7(config-if)#<b>ospfv3 mtu-ignore</b>
</code>
</div>
<p>
However, ignoring MTU checks is not recommeded in production networks.
</p>
<p>
OSPF neighbor adjacencies transition through a maximum of eight states (depending on the network type):
<ol>
  <li><b>Down:</b> in this state, no hello packets have been received from a neighbor. Additionally, the OSPF-enabled interface of the local router may be shutdown. </li>
  <li><b>Attempt:</b> unicast hello packet has been sent to neighbor but no hello packet has been received back. This state applies to an OSPF neighborship that is manually configured using the OSPF process command <code>neighbor 10.2.3.4 </code> in NBMA environments.</li>
  <li><b>Init:</b> Received a hello from the neighbor. However, the neighbor router has not yet acknowledged the local router as a neighbor by including its RID in its hello packet header's 'Active Neighbor' field.</li>
  <li><b>2-Way:</b> Hello received from neighbor and neighbor has acknowledged the local router as a neighbor by including the local router RID in its 'Active Neighbor' field of the hello packet header. In broadcast and non-broadcast networks, DROther routers complete their adjacency formation with each other at the 2-Way stage. Election of the DR/BDR roles 
  is also started. The router with the higher RID is master during DR election. More on this in the next section.</li>
  <li><b>ExStart:</b> The master/slave relationship is formed with the master being the router with the higher RID. The master controls aspects of the adjacency formation by choosing the starting sequence number for the database descriptor packets (DDP or DBD) that are used for actual exchange. Master and DR roles have no relationship. The master/slave role applies only to the local network connection between the two neighbors and does not influence the DR/BDR/DROther roles.</li>
  <li><b>Exchange:</b> DDP or DBD packets are sent in unicast. A summary of the LSDB is exchanged through DBD packets. DBD sequence number is used for reliable acknowledgment / re-transmission.</li>
  <li><b>Loading:</b> LSRs are sent asking for more information about particular LSAs that the local router does not have. Unicast LSUs are sent for missing links.</li>
  <li><b>Full:</b> LSDBs of the routers are fully synchronized.</li>
</ol>
</p>

<h2>OSPF Areas</h2>
<p>
An area defines a flooding domain. All devices in the area agree on the topology with features such as authentication type, 
area type i.e. normal, stubby, not-so-stubby area (NSSA). 
Changes inside the area require LSA flooding and full SPF.
All routers in an area execute SPF when the network changes for example when links fail, when failed links are restored,
new routes added, existing routes withdrawn.
</p>
<p>
Inter-area routing is similar to distance vector because routers in another area do not have a detailed view of the local area. So they rely on the type 3 network summary LSAs. Changes such as the addition of a 
new network, link flapping/failure outside the area don't always require 
 LSA flooding or SPF limiting the impact on router resources.
</p>

OSPF networks are built on a two-level hierarchical topology:
<ol>
  <li><b>Backbone Area (Area 0):</b> Used to summarize topology information 
  from other areas. Traffic from one area to another must transit area 0. Area 0 
  must be contiguous. Backbone area cannot be a stubby area.</li>
  <li> <b>Non-backbone Area: </b> Must use connections through area 0 to reach other areas.
  All non-backbone areas must connect to the backbone area directly or through a virtual-link. Non-backbone areas can be 
  either normal, stubby, totally stubby, NSSA and totally NSSA.
  Stub areas carry only router-LSAs, network-lSAs, inter-area-prefix-LSAs, link-LSAs, 
  and intra-area-prefix-LSAs. NSSAs are restricted to these types as well including the NSSA-LSAs.
  </li>
</ol>
<p>
In networks that are single area, any area number can be used and prefix exchange 
will take place. In multi-area OSPF networks, area zero (0) must be configured with 
inter-area traffic transiting area 0.
</p>

<p>
To determine the OSPF areas that a router is participating in:

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
<code>
R1(config-if)#<b>do show ip ospf interface brief </b><br />
Interface&nbsp;&nbsp;    PID&nbsp;&nbsp;&nbsp;&nbsp;   <span style="background-color:#DCDCDC;">Area</span>&nbsp;&nbsp;&nbsp;&nbsp;            IP Address/Mask&nbsp;&nbsp;&nbsp;&nbsp;    Cost&nbsp;&nbsp;&nbsp;&nbsp;  State&nbsp;&nbsp;&nbsp;&nbsp; Nbrs F/C<br />
Gi0/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              10.0.12.1/30 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     DR &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   1/1<br />
Fa3/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              10.0.16.1/30 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     P2P&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   0/0<br />
Gi1/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              10.10.13.1/30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     P2P&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   0/0<br />
R1(config-if)#<b>do show ip ospf</b><br />
 Routing Process "ospf 1" with ID 1.1.1.1<br />
 Start time: 00:00:32.764, Time elapsed: 01:57:36.228<br />
 Supports only single TOS(TOS0) routes<br />
 Supports opaque LSA<br />
 Supports Link-local Signaling (LLS)<br />
 Supports area transit capability<br />
 Supports NSSA (compatible with RFC 3101)<br />
 Event-log enabled, Maximum number of events: 1000, Mode: cyclic<br />
 It is an area border and autonomous system boundary router<br />
 Redistributing External Routes from,<br />
 Router is not originating router-LSAs with maximum metric<br />
 Initial SPF schedule delay 5000 msecs<br />
 Minimum hold time between two consecutive SPFs 10000 msecs<br />
 Maximum wait time between two consecutive SPFs 10000 msecs<br />
 Incremental-SPF disabled<br />
 Minimum LSA interval 5 secs<br />
 Minimum LSA arrival 1000 msecs<br />
 LSA group pacing timer 240 secs<br />
 Interface flood pacing timer 33 msecs<br />
 Retransmission pacing timer 66 msecs<br />
 Number of external LSA 0. Checksum Sum 0x000000<br />
 Number of opaque AS LSA 0. Checksum Sum 0x000000<br />
 Number of DCbitless external and opaque AS LSA 0<br />
 Number of DoNotAge external and opaque AS LSA 0<br />
 <span style="background-color:#DCDCDC;">Number of areas in this router is 2. 1 normal 0 stub 1 nssa</span><br />
 Number of areas transit capable is 0<br />
 External flood list length 0<br />
 IETF NSF helper support enabled<br />
 Cisco NSF helper support enabled<br />
 Reference bandwidth unit is 100 mbps<br />
&nbsp;&nbsp;&nbsp;    Area BACKBONE(0)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of interfaces in this area is 2<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Area has message digest authentication<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        SPF algorithm last executed 00:58:20.520 ago<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        SPF algorithm executed 3 times<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Area ranges are<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of LSA 4. Checksum Sum 0x03233A<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of opaque link LSA 0. Checksum Sum 0x000000<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of DCbitless LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of indication LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of DoNotAge LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Flood list length 0<br />
&nbsp;&nbsp;&nbsp;    Area 10<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of interfaces in this area is 1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        It is a NSSA area<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Perform type-7/type-5 LSA translation<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Area has no authentication<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        SPF algorithm last executed 01:57:24.284 ago<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        SPF algorithm executed 2 times<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Area ranges are<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of LSA 5. Checksum Sum 0x035534<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of opaque link LSA 0. Checksum Sum 0x000000<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of DCbitless LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of indication LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of DoNotAge LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Flood list length 0<br />
<br />
R1(config-if)#<br />
</code>
</div>
</p>
<p>
If the output of the command <code>show ip ospf </code> shows that the router is 
participating in more than one area, then the router is an ABR.
</p>

<h3>OSPF Router Types </h3>
<ul>
  <li><b>Backbone Router: </b>these are routers that have at least one interface in 
  area 0 (backbone). </li>
  <li><b>Internal Routers: </b> all links of the router are in one non-backbone 
  area.</li>
  <li><b>Area Border Router (ABR): </b>router has links in both area 0 and non-backbone area. The ABR summarizes information between area 0 and non-backbone area.</li>
  <li><b>Autonomous System Boundary Router (ASBR): </b>has at least one link in the OSPF domain and another link in a non-OSPF domain for example IS-IS, EIGRP, 
  BGP, RIP domain. The ASBR redistributes routes to and/or from other routing 
  domains and OSPF. </li>
</ul>
<p>
The router type can be verified by using the following commands:
</p>
<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
<code>
R1#<b>show ip protocols</b><br />
*** IP Routing is NSF aware ***<br />
<br />
Routing Protocol is "ospf 1"<br />
&nbsp;&nbsp;  Outgoing update filter list for all interfaces is not set<br />
&nbsp;&nbsp;  Incoming update filter list for all interfaces is not set<br />
&nbsp;&nbsp;  Router ID 1.1.1.1<br />
&nbsp;&nbsp;  <span style="background-color:#DCDCDC;">It is an area border and autonomous system boundary router</span><br />
&nbsp; Redistributing External Routes from,<br />
&nbsp;&nbsp;  Number of areas in this router is 2. 1 normal 0 stub 1 nssa<br />
&nbsp;&nbsp;  Maximum path: 4<br />
&nbsp;&nbsp;  Routing for Networks:<br />
&nbsp;&nbsp;&nbsp;&nbsp;    10.0.12.1 0.0.0.0 area 0<br />
  ...<br />
</code>
</div>
<p>
Other commands such <code><b>#show ip ospf </b></code> can display the router's type.
</p>
<h2>OSPF Media Dependencies and Network Types</h2>
Different network types are defined to deal with different media characteristics.
Network types control:
<ul>
<li>How hello packets and updates are sent.</li>
<li>Who forms an adjacency</li>
<li>How the next-hop is calculated.</li>
</ul>
The OSPF network type does not need to match to form an adjacency but it does 
need to be compatible such as a common need for a DR/BDR for the segment. Other 
attributes have to match such as timer values. OSPF network types include the following:
<ul>
<li><b>Broadcast networks:</b> default network type on multi-access broadcast media such as ethernet.
This network type requires the election of a designated router (DR) and back-up designated router (BDR).
Hellos and updates from DROthers are sent as multicast to 224.0.0.6 
(AllDRouters) and with destination MAC address. 01:00:5E:00:00:06. The DR and BDR process packets 
sent to this address. The DR acknowledges the packet with an LSAAck and sends a multicast update to all other routers AllSPFRouters with 
a destination address of 224.0.0.5 and MAC address 01:00:5E:00:00:05. The hello interval is 10 seconds, dead interval 40 seconds, wait time 40 seconds.
<p>
The hello interval and dead intervals can be modified to values different from the default values. 
In gigabit-ethernet networks, hello intervals of 10 seconds are rather long. They can be reduced to shorter durations of 
say 5 seconds:
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
  <code>
R1(config)#<b>interface fa3/0</b> <br />  
R1(config-if)#<b>ip ospf hello-interval 5 </b> </code>
</div>
<p>
The dead interval is automatically modified to four times the value of the hello-interval.
</p>

<p>
OSPF Hello values can be sent using sub-second values using the interface command<code>ip ospf dead-interval minimal hello-multiplier <i>multiplier</i></code>. The <code><i>multiplier</i></code> is the number of hello packets sent per second;
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
  <code>
R1(config)#<b>interface fa3/0</b> <br />  
R1(config-if)#<b>ip ospf dead-interval minimal hello-multiplier 4 </b><br />
R1(config-if)#<b>end</b><br />
R1#<b>show ip ospf interface fa3/0</b><br />
FastEthernet3/0 is up, line protocol is up<br />
  Internet Address 10.0.16.1/30, Area 0, Attached via Interface Enable<br />
  Process ID 1, Router ID 1.1.1.1, Network Type <span style="background-color:#DCDCDC";>BROADCAST </span>, Cost: 1<br />
  . . . . <br />
  Enabled by interface config, including secondary ip addresses<br />
  Transmit Delay is 1 sec, State DR, Priority 1<br />
  Designated Router (ID) 1.1.1.1, Interface address 10.0.16.1<br />
  No backup designated router on this network<br />
  Timer intervals configured, <span style="background-color:#DCDCDC;">Hello 250 msec, Dead 1, Wait 1, Retransmit 5</span><br />
    oob-resync timeout 40<br />
    Hello due in 58 msec<br />
  Supports Link-local Signaling (LLS)<br />
  Cisco NSF helper support enabled<br />
  IETF NSF helper support enabled<br />
  ..... <br />
R1#<br />
</code>
</div>
</p>
<p>
Where 4 implies four hello packets are to be sent per second.
BFD is a more optimum option to OSPF sub-second OSPF hello intervals. BFD is more light-weight.
</p>

<li><b>Nonbroadcast: </b>Default on NBMA networks such as frame-relay, DMVPN topologies. Hello packets are sent in unicast. Neighbors are manually defined using the router OSPF command <code><b>neighbor</b> <i>neighbor_ip_address</i></code>.  DR and BDR election is required for this network type. The hello 
interval is 30 seconds, dead-interval 120 seconds, wait timer 120 seconds.

<li><b>Point-to-point: </b>default on point-to-point media such as HDLC, PPP, GRE.
Sends hellos as multicast to address 224.0.0.5. Supports only two neighbors on 
the link. The hello interval is 10 seconds, dead interval 40 seconds. A DR and BDR 
election is not required for this network.

<li><b>Point-to-multipoint: </b>This network type can be treated as a collection of point-to-point links.
Hello packets are sent to multicast address 224.0.0.5. Special next-hop processing takes place with the next 
hop being set to the neighbor's IP address that sent the LSU. Point-to-multipoint 
network type is usually the best design option for partial mesh NBMA networks. In point-to-multipoint networks, the interface's IP address is advertised as /32 host route. Point-to-multipoint is not a default for any medium type. 
The hello interval is 30 seconds, dead-interval 120 seconds. DR and BDR election does not happen in this network type.
 
 <li><b> Point-to-multipoint Non-Broadcast: </b>same as point-to-multipoint but sends hellos 
 as unicast. Neighbors are manually defined using the router OSPF command <code><b>neighbor</b> <i>neighbor_ip_address</i></code>.
 Allows for per-VC OSPF cost over NBMA. Special next-hop processing.</li>
 <li><b>Loopback: </b> Special case for loopback and looped-back interfaces. 
 Advertises link with /32 subnet mask as a host route.
 </li>
</ul>

<p>
The use/non-use of LSA type 2 determines whether OSPF network types can be compatible or not. 
Network types that use  type 2 LSAs include: broadcast and non-broadcast. Others 
do not.
</p>

<p>
The OSPF network type of an interface can be changed from its default using the interface mode command: <code><b>ip ospf  network</b> <i>network_type</i></code> <code>network_type</code> can be either of: broadcast, non-broadcast, point-to-point, point-to-multipoint.
<br />
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R1(config)#<b>interface fa3/0</b><br />
R1(config-if)#<b>ip ospf network point-to-point</b><br />
R1(config-if)#<b>do show ip ospf interface fa3/0</b><br />
FastEthernet3/0 is up, line protocol is up<br />
  Internet Address 10.0.16.1/30, Area 0, Attached via Interface Enable<br />
  Process ID 1, Router ID 1.1.1.1, Network Type<span style="background-color:#DCDCDC;"> POINT_TO_POINT</span>, Cost: 1<br />
  ...<br />
  Enabled by interface config, including secondary ip addresses<br />
  Transmit Delay is 1 sec, State POINT_TO_POINT<br />
  Timer intervals configured, Hello 250 msec, Dead 1, Wait 1, Retransmit 5<br />
    oob-resync timeout 40<br />
    Hello due in 73 msec<br />
</code>
</div>
</p>
<p>

Broadcast networks with only two OSPF peers can be configured to point-to-point network type.
This makes the adjacency complete faster eliminating the unnecessary DR/BDR election and OSPF type 2 LSA advertisements.
</p>

<h2>Designated Router and Backup Designated Router</h2>
If multiple routers in multi-access networks are to form adjacencies, the total number of 
adjacencies established is determined by the formula:

<code>
Total = n * (n - 1)/2.
</code>
All these routers will be sending hello and update packets to each and every one of them.
In order to reduce the number of adjacencies (and OSPF packets) on a segment in a multi-access network, 
OSPF elects one router to be a designated router and another to act as a backup designated router 
to replace the designated router in case of its failure.

<h3>DR/BDR Election</h3>
<p>
A router initialising OSPF on an interface waits the duration of the wait timer 
listening for the presence of other OSPFrouters announcing their DR status before 
declaring its DR status (if more favourable). In broadcast networks, the wait timer is 40 seconds, non 
broadcast networks, 120 seconds.

DR election is based on interface priority and router ID (RID). Usually, the first 
router to initialize OSPF on an interface within a given number of seconds on a segment 
becomes the DR regardless of its interface priority or RID.

OSPF deems a router more preferrable for DR if:
<ol>
 <li> The interface of the router has the highest priority for that segment. The priority is any value between 1 - 255.
 The default priority is one (1). </li>
 <li> The router has the highest OSPF RID in that segment. The RID of a router is determined by:
    <ol type=i>
	<li>if configured, the highest IP address configured on any "up" loopback interfaces.</li>
	<li>the highest physical interface IP address</li>
	<li> manual configuration of the RID using the OSPF process command: 
      <code>
	    #router-id 1.1.1.1
	  </code>
	</li>
	</ol>
 </li>
</ol>
<p>
Unlike BGP, the OSPF RID is not a routable address. It is possible to have a 
valid RID such as 255.255.255.255
</p>

<p>
The interface priority is a value from 1 to 255 inclusive. To change the router interface priority to 200:
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
  R1(config)#<b>interface g0/0</b> <br />
R1(config-if)#<b>ip ospf priority ? </b><br />
  <0-255>  Priority <br />
R1(config-if)#<b>ip ospf priority 200 </b><br />
R1(config-if)#<b>do show ip ospf interface g0/0</b> <br />
GigabitEthernet0/0 is up, line protocol is up <br />
  &nbsp;&nbsp;Internet Address 10.0.12.1/30, Area 0, Attached via Network Statement <br />
  &nbsp;&nbsp;Process ID 1, Router ID 1.1.1.1, Network Type BROADCAST, Cost: 1 <br />
  &nbsp;&nbsp; .... <br />
  &nbsp;&nbsp;Transmit Delay is 1 sec, State BDR, <span style="background-color:#DCDCDC;">Priority 200</span><br />
</code>
</div>
<p>
A value of zero makes the router ineligible for DR/BDR election.
</p>
<p>
The DR and BDR roles can not be preempted by a router with higher interface priority or RID values.
The election of a DR/BDR can be forced by clearing the OSPF process. This can be done using the following command: 
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R1# <br />
R1#<b>clear ip ospf process</b> <br />
Reset ALL OSPF processes? [no]: <b>yes</b> <br />
R1# <br />
*Aug 11 22:03:11.495: %OSPF-5-ADJCHG: Process 1, Nbr 2.2.2.2 on GigabitEthernet0/0 from FULL to DOWN, Neighbor Down: Interface down or detached <br />
*Aug 11 22:03:11.767: %OSPF-5-ADJCHG: Process 1, Nbr 2.2.2.2 on GigabitEthernet0/0 from LOADING to FULL, Loading Done <br />
</code>
</div>


<h3>DR Operation</h3>
<p>
A Designated Router forms a FULL adjacency with all routers on the link. 
The other routers (DROthers) form 2-WAY adjacencies with each other.

The DR listens for LSUs on the multicast address 224.0.0.6. A router (DROther) with an update sends it to the multicast address 224.0.0.6.
After receiving an LSU. The DR sends a unicast LSAck to that router to acknowledge receiving the update.
The DR then floods the LSU(s) to the segment using 224.0.0.5.
The DR does not modify the next-hop value of this LSU. The BDR is used for redundancy. It does 
not flood any updates but receives all updates sent to the DR.
</p>

<p>
The DR forms full adjacencies with all other routers. The BDR forms full adjacencies 
with all other routers as well. The DR/BDR roles can not be preempted by routers with 
better periorities / RIDs.
</p>



<h2>OSPFv3 Packet Types</h2>
<p>
OSPFv3 supports up to five different types of packets to create and maintain neighborship adjacencies, 
and exchange route information including withdrawing routes. 
All the OSPFv3 network types use link-local addresses as source addresses;
</p>

<table>
  <tr style="border:solid; border-width:1px">
    <td style="border-bottom:solid; border-width:1px"><b>Type</b></td>
    <td style="border-bottom:solid; border-width:1px"><b>Packet</b></td>
    <td style="border-bottom:solid; border-width:1px"><b>Source</b></td>
    <td style="border-bottom:solid; border-width:1px"><b>Destination</b></td>
    <td style="border-bottom:solid; border-width:1px"><b>Purpose</b></td>
  </tr>
  <tr style="border:solid; border-width:1px">
    <td style="border-bottom:solid; border-width:1px" rowspan=2>1</td>
    <td style="border-bottom:solid; border-width:1px" rowspan=2>Hello</td>
    <td style="border-bottom:solid; border-width:1px">Link-Local Address</td>
    <td style="border-bottom:solid; border-width:1px">FF02::5</td>
    <td style="border-bottom:solid; border-width:1px">Discover and maintain neighbors</td>
  </tr>
  <tr>
    <td style="border-bottom:solid; border-width:1px">Link-local address</td>
    <td style="border-bottom:solid; border-width:1px">Link-local address</td>
    <td style="border-bottom:solid; border-width:1px">Initial adjacency formation</td>
  </tr>
  <tr>
    <td style="border-bottom:solid; border-width:1px">2 </td>
    <td style="border-bottom:solid; border-width:1px">Database descriptor packet (DDP or DBD) </td>
    <td style="border-bottom:solid; border-width:1px">Link-local address </td>
    <td style="border-bottom:solid; border-width:1px">Link-local address </td>
    <td style="border-bottom:solid; border-width:1px">Summary / snapshot of the link-state database (LSDB) contents </td>
  </tr>
  <tr>
    <td style="border-bottom:solid; border-width:1px"> 3 </td>
    <td style="border-bottom:solid; border-width:1px"> Link State Request (LSR) </td>
    <td style="border-bottom:solid; border-width:1px"> Link-local address </td>
    <td style="border-bottom:solid; border-width:1px"> Link-local address </td>
    <td style="border-bottom:solid; border-width:1px"> Request for additional information if missing in local LSDB </td>
  </tr>
  <tr>
     <td style="border-bottom:solid; border-width:1px" rowspan=3> 4 </td>
     <td style="border-bottom:solid; border-width:1px" rowspan=3> Link State Update (LSU) </td>
     <td style="border-bottom:solid; border-width:1px"> Link-local address </td>
     <td style="border-bottom:solid; border-width:1px"> Link-local address </td>
     <td style="border-bottom:solid; border-width:1px"> Update in response to LSR </td>
  </tr>
  <tr>
      <td style="border-bottom:solid; border-width:1px"> Link-local address (from DR) </td>
      <td style="border-bottom:solid; border-width:1px"> FF02::5 </td>
      <td style="border-bottom:solid; border-width:1px"> Database update to all DROther routers in a broadcast and non-broadcast network segment.</td>
  </tr>
  <tr>
      <td style="border-bottom:solid; border-width:1px"> Link-local address (from DROther) </td>
      <td style="border-bottom:solid; border-width:1px"> FF02::6 </td>
      <td style="border-bottom:solid; border-width:1px"> Update from DROther to DR/BDR for subsequent flooding on broadcast/non-broadcast segment </td>
  </tr>
  <tr>
      <td style="border-bottom:solid; border-width:1px" rowspan=3> 5 </td>
      <td style="border-bottom:solid; border-width:1px" rowspan=3> Link State Acknowledgement (LSAck) </td>
      <td style="border-bottom:solid; border-width:1px"> Link-local address </td>
      <td style="border-bottom:solid; border-width:1px"> Link-local address </td>
      <td style="border-bottom:solid; border-width:1px"> Response to LSU </td>
  </tr>
  <tr>
      <td style="border-bottom:solid; border-width:1px"> Link-local address (from DR)</td>
      <td style="border-bottom:solid; border-width:1px"> FF02::5 </td>
      <td style="border-bottom:solid; border-width:1px"> Flooding acknowledgement </td>
  </tr>
  <tr>
      <td style="border-bottom:solid; border-width:1px"> Link-local address (from DROther) </td>
      <td style="border-bottom:solid; border-width:1px"> FF02::6 </td>
      <td style="border-bottom:solid; border-width:1px"> Flooding acknowledgement to DR/BDR </td>
  </tr>
</table>


<h2>OSPFv3 Database (Link-State Database - LSDB)</h2>
<p>
The OSPFv3 database is the data structure where prefixes from the various received LSUs are stored.
The LSDB provides the input to the SPF function which generates an SPT with the local router at the root/top of the SPT.
The output of the SPF is the OSPF RIB which presents routes to the router's RIB for consideration for installation into the
routing table/RIB. The LSDB can be viewed using the privileged mode command: <code> show ospfv3 database </code>
</p>

<h3>OSPFv3 Link-State Advertisements (LSAs)</h3>

SPT uses only router and network LSAs for the building of the OSPFv3 topology.

<p>
The summary information on LSAs in the link-state database (LSDB) can be viewed by issuing the privileged mode command
<code>show ospfv3 database</code>.
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R7#                                                                           <br />
R7#<b>show ospfv3 database</b>                                                       <br />
                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPFv3 1 address-family ipv6 (router-id 7.7.7.7)                    <br />
                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Router Link States (Area 7)                                   <br />
                                                                              <br />
&nbsp;ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Age&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Seq#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fragment ID&nbsp;&nbsp;&nbsp;Link count&nbsp;&nbsp;&nbsp;Bits        <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;118 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000007&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B           <br />
&nbsp; 7.7.7.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1388&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000004&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None        <br />
&nbsp; 8.8.8.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1304&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000004&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None        <br />
&nbsp;                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Net Link States (Area 7)                                      <br />
&nbsp;                                                                              <br />
&nbsp;ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Age&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Seq#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link ID&nbsp;&nbsp;&nbsp;Rtr count                 <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000005&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3                         <br />
&nbsp;                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inter Area Prefix Link States (Area 7)                        <br />
&nbsp;                                                                              <br />
&nbsp;ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Age&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Seq#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prefix                               <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;884 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000005&nbsp;&nbsp;2001:DB8:0:6:10::1/128               <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;118 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000006&nbsp;&nbsp;2001:DB8:0:16::2/127                 <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;118 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000006&nbsp;&nbsp;2001:DB8:0:26::2/127                 <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;118 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000006&nbsp;&nbsp;2001:DB8:0:2:10::1/128               <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;118 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000006&nbsp;&nbsp;2001:DB8:0:2:11::1/128               <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;118 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000007&nbsp;&nbsp;2001:DB8::12:2/127                   <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;118 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000007&nbsp;&nbsp;2001:DB8::12:0/127                   <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;118 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000006&nbsp;&nbsp;2001:DB8:0:16::/127                  <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;118 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000006&nbsp;&nbsp;2001:DB8:0:26::/127                  <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1164&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000001&nbsp;&nbsp;2001:DB8:10:34::/127                 <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1164&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000001&nbsp;&nbsp;2001:DB8:10:13::2/127                <br />
&nbsp;                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inter Area Router Link States (Area 7)                        <br />
&nbsp;                                                                              <br />
&nbsp;ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Age&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Seq#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link ID&nbsp;&nbsp;&nbsp;Dest RtrID                <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1219&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000001&nbsp;&nbsp;16843009&nbsp;&nbsp;1.1.1.1                   <br />
&nbsp;                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link (Type-8) Link States (Area 7)                            <br />
&nbsp;                                                                              <br />
&nbsp;ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Age&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Seq#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link ID&nbsp;&nbsp;&nbsp;Interface                 <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1660&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000004&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gi0/0                     <br />
&nbsp; 7.7.7.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1388&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000004&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gi0/0                     <br />
&nbsp; 8.8.8.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1304&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000004&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gi0/0                     <br />
&nbsp;                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Intra Area Prefix Link States (Area 7)                        <br />
&nbsp;                                                                              <br />
&nbsp;ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Age&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Seq#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link ID&nbsp;&nbsp;&nbsp;Ref-lstype  Ref-LSID      <br />
&nbsp; 6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;884 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000005&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x2001      0             <br />
&nbsp; 7.7.7.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1131&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000003&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x2001      0             <br />
&nbsp;                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type-5 AS External Link States                                <br />
&nbsp;                                                                              <br />
&nbsp;ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Age&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Seq#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prefix                               <br />
&nbsp; 1.1.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1106&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000001&nbsp;&nbsp;2001:DB8:FF:45:1::2/127              <br />
&nbsp; 1.1.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1106&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000001&nbsp;&nbsp;2001:DB8:FFFF:10::/64                <br />
&nbsp; 1.1.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1106&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000001&nbsp;&nbsp;2001:DB8:FFFF:11::/64                <br />
&nbsp; 1.1.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1106&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x80000001&nbsp;&nbsp;2001:DB8:FFFF:12::/64                <br />
R7#
</code>
</div>

<h3>Link-State Advertisements (LSAs)</h3>
<p>
All addressing semantics have been removed from the LSA header, router-LSAs and network LSAs. These two LSAs 
describe the OSPFv3 domain in a network protocol independent manner.
</p>

<p>
OSPFv3 LSAs include an options bit field that describes the router's capabilities:
<ul>
 <li><b>V6:</b> router participates in IPv6 routing (introduced in OSPFv3).</li>
 <li><b>E:</b> router is capable of processing external LSAs. A router in a stubby area sets the E-bit to clear (0). 
 Neighboring routers do not form adjacencies if they have mismatched E-bit settings </li>
 <li><b>R:</b> router actively participates in forwarding traffic. If set to clear (0), it indicates that 
 the router is not to be used as a transit router for forwarding traffic but is still capable of exchanging router 
 information (introduced in OSPFv3).
 </li>
 <li><b>N:</b> router supports type 7 LSAs (NSSA). Mismatched N-settings result in adjacency failures.</li>
 <li><b>DC:</b> router is capable of suppressing future Hellos over interface. Interface must be configured 
 as demand circuits for hello packet suppression to occur.</li>
</ul>
</p>

<p>
When compared to OSPFv2, two new LSAs have been introduced: Type 8 (link) is used for link-local addresses and 
Type 9 (intra-area prefix) is used for prefixes on links. The new LSAs separate the topology graph from Network-Layer 
Reachability Information (NLRI). 
With OSPF, prefix information is propagated by LSAs 1 and 2 for intra-area. If a prefix is added or removed, 
full SPF is run. 
With OSPFv3, prefix information is propagated through LSAs 8 and 9 to reference LSAs. 
If a stub network is added or removed, full SPF is not required. 
</p>

<ul>
  <li><b>Type 1 Router LSA(0x2001): </b> 
  <p>
  Every router generates router LSAs that describe the state and cost of 
  the router's interfaces to the area. In OSPFv3, the router LSA is modified from the LSA type 1 of OSPFv2. 
  Router LSA is only responsible for announcing interface parameters such as interface type and metric.
  Of a router's LSA bits are set to B, it is an ABR. Verify with

  Type 1 router LSAs can be viewed using the privileged mode command: 
  <code> show ospfv3 database router </code> <br />
  </p>
  
  <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R7#                                                            <br />                               
R7#<b>show ospfv3 database router</b>                                                                            <br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPFv3 1 address-family ipv6 (router-id 7.7.7.7<br />
                                                                                                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Router Link States (Area 7)                                                  <br />
&nbsp;Routing Bit Set on this LSA                                                                             <br />
&nbsp;LS age: 65                                                                                              <br />
&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                                                                 <br />
&nbsp;LS Type: Router Links                                                                                   <br />
&nbsp;Link State ID: 0                                                                                        <br />
&nbsp;Advertising Router: 6.6.6.6                                                                             <br />
&nbsp;LS Seq Number: 8000000D                                                                                 <br />
&nbsp;Checksum: 0xADA8                                                                                        <br />
&nbsp;Length: 40                                                                                              <br />
&nbsp;Area Border Router                                                                                      <br />
&nbsp;Number of Links: 1                                                                                      <br />
                                                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: a Transit Network                                                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link Metric: 100                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local Interface ID: 4                                                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Neighbor (DR) Interface ID: 4                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Neighbor (DR) Router ID: 6.6.6.6                                          <br />
                                                                                                              <br />
                                                                                                              <br />
&nbsp;LS age: 591                                                                                             <br />
&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                                                                 <br />
&nbsp;LS Type: Router Links                                                                                   <br />
&nbsp;Link State ID: 0                                                                                        <br />
&nbsp;Advertising Router: 7.7.7.7                                                                             <br />
&nbsp;LS Seq Number: 8000000C                                                                                 <br />
&nbsp;Checksum: 0x5B2A                                                                                        <br />
&nbsp;Length: 56                                                                                              <br />
&nbsp;Number of Links: 2                                                                                      <br />
                                                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: another Router (point-to-point)                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link Metric: 645                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local Interface ID: 11                                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Neighbor Interface ID: 11                                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Neighbor Router ID: 8.8.8.8                                               <br />
                                                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: a Transit Network                                                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link Metric: 100                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local Interface ID: 4                                                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Neighbor (DR) Interface ID: 4                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Neighbor (DR) Router ID: 6.6.6.6                                          <br />
                                                                                                              <br />
                                                                                                              <br />
&nbsp;LS age: 746                                                                                             <br />
&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                                                                 <br />
&nbsp;LS Type: Router Links                                                                                   <br />
&nbsp;Link State ID: 0                                                                                        <br />
&nbsp;Advertising Router: 8.8.8.8                                                                             <br />
&nbsp;LS Seq Number: 8000000C                                                                                 <br />
&nbsp;Checksum: 0xEA9A                                                                                        <br />
&nbsp;Length: 56                                                                                              <br />
&nbsp;Number of Links: 2                                                                                      <br />
                                                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: another Router (point-to-point)                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link Metric: 645                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local Interface ID: 11                                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Neighbor Interface ID: 11                                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Neighbor Router ID: 7.7.7.7                                               <br />
                                                                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: a Transit Network                                                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link Metric: 100                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local Interface ID: 4                                                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Neighbor (DR) Interface ID: 4                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Neighbor (DR) Router ID: 6.6.6.6                                          <br />

</code>
</div>

  </li>
  <li><b>Type 2 Network LSA (0x2002): </b> 
  <p>
  A DR in broadcast or non-broadcast network 
  generates a network LSA to annouce all of the routers attached to the network segment including itself.
  To view type 2 LSAs in the LSDB, issue the privileged mode command: 
  <code>show ospfv3 database network</code>
  </p>
  <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
    <code>
    R7#<b>show ospfv3 database network </b> <br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPFv3 1 address-family ipv6 (router-id 7.7.7.7) <br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Net Link States (Area 7)<br />
                                                         <br />
&nbsp;LS age: 1389                                           <br />
&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                <br />
&nbsp;LS Type: Network Links                                 <br />
&nbsp;Link State ID: 4 (Interface ID of Designated Router)   <br />
&nbsp;Advertising Router: 7.7.7.7                            <br />
&nbsp;LS Seq Number: 80000008                                <br />
&nbsp;Checksum: 0x1E6B                                       <br />
&nbsp;Length: 36                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;Attached Router: 7.7.7.7                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;Attached Router: 6.6.6.6                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;Attached Router: 8.8.8.8                         <br />
                                                         <br />
R7#                                                      <br />
    </code>
  </div>
  <p>
  No prefix information is contained in the OSPFv3 type 2 network LSA.
  </p>
  
  </li>
  <li><b>Type 3 Inter-area prefix LSA (0x2003): </b>
  <p>
  generated by ABRs to describe routes to IPv6 address prefixes that belong to other 
  areas. Renames the network summary LSA into inter-area prefix LSA. 
  </p>
  <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
    <code>
    R7#<b>show ospfv3 database inter-area prefix</b>                               <br />
                                                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPFv3 1 address-family ipv6 (router-id 7.7.7.7)                  <br />
                                                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inter Area Prefix Link States (Area 7)                      <br />
                                                                            <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                               <br />
&nbsp;&nbsp;LS age: 1409                                                              <br />
&nbsp;&nbsp;LS Type: Inter Area Prefix Links                                          <br />
&nbsp;&nbsp;Link State ID: 0                                                          <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                               <br />
&nbsp;&nbsp;LS Seq Number: 80000008                                                   <br />
&nbsp;&nbsp;Checksum: 0x8110                                                          <br />
&nbsp;&nbsp;Length: 44                                                                <br />
&nbsp;&nbsp;Metric: 0                                                                 <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:0:6:10::1                                        <br />
&nbsp;&nbsp;Prefix Length: 128, Options: None                                         <br />
&nbsp;&nbsp;                                                                          <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                               <br />
&nbsp;&nbsp;LS age: 1409                                                              <br />
&nbsp;&nbsp;LS Type: Inter Area Prefix Links                                          <br />
&nbsp;&nbsp;Link State ID: 1                                                          <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                               <br />
&nbsp;&nbsp;LS Seq Number: 80000008                                                   <br />
&nbsp;&nbsp;Checksum: 0xEEB5                                                          <br />
&nbsp;&nbsp;Length: 44                                                                <br />
&nbsp;&nbsp;Metric: 1000                                                              <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:0:16::2                                          <br />
&nbsp;&nbsp;Prefix Length: 127, Options: None                                         <br />
&nbsp;&nbsp;                                                                          <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                               <br />
&nbsp;&nbsp;LS age: 1409                                                              <br />
&nbsp;&nbsp;LS Type: Inter Area Prefix Links                                          <br />
&nbsp;&nbsp;Link State ID: 2                                                          <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                               <br />
&nbsp;&nbsp;LS Seq Number: 80000008                                                   <br />
&nbsp;&nbsp;Checksum: 0xDB3F                                                          <br />
&nbsp;&nbsp;Length: 44                                                                <br />
&nbsp;&nbsp;Metric: 100                                                               <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:0:26::2                                          <br />
&nbsp;&nbsp;Prefix Length: 127, Options: None                                         <br />
&nbsp;&nbsp;                                                                          <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                               <br />
&nbsp;&nbsp;LS age: 24                                                                <br />
&nbsp;&nbsp;LS Type: Inter Area Prefix Links                                          <br />
&nbsp;&nbsp;Link State ID: 3                                                          <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                               <br />
&nbsp;&nbsp;LS Seq Number: 80000008                                                   <br />
&nbsp;&nbsp;Checksum: 0x75B8                                                          <br />
&nbsp;&nbsp;Length: 44                                                                <br />
&nbsp;&nbsp;Metric: 100                                                               <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:0:2:10::1                                        <br />
&nbsp;&nbsp;Prefix Length: 128, Options: None                                         <br />
&nbsp;&nbsp;                                                                          <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                               <br />
&nbsp;&nbsp;LS age: 24                                                                <br />
&nbsp;&nbsp;LS Type: Inter Area Prefix Links                                          <br />
&nbsp;&nbsp;Link State ID: 4                                                          <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                               <br />
&nbsp;&nbsp;LS Seq Number: 80000008                                                   <br />
&nbsp;&nbsp;Checksum: 0x7FAC                                                          <br />
&nbsp;&nbsp;Length: 44                                                                <br />
&nbsp;&nbsp;Metric: 100                                                               <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:0:2:11::1                                        <br />
&nbsp;&nbsp;Prefix Length: 128, Options: None                                         <br />
&nbsp;&nbsp;                                                                          <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                               <br />
&nbsp;&nbsp;LS age: 24                                                                <br />
&nbsp;&nbsp;LS Type: Inter Area Prefix Links                                          <br />
&nbsp;&nbsp;Link State ID: 5                                                          <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                               <br />
&nbsp;&nbsp;LS Seq Number: 80000008                                                   <br />
&nbsp;&nbsp;Checksum: 0xC664                                                          <br />
&nbsp;&nbsp;Length: 44                                                                <br />
&nbsp;&nbsp;Metric: 101                                                               <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8::12:2                                            <br />
&nbsp;&nbsp;Prefix Length: 127, Options: None                                         <br />
&nbsp;&nbsp;                                                                          <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                               <br />
&nbsp;&nbsp;LS age: 24                                                                <br />
&nbsp;&nbsp;LS Type: Inter Area Prefix Links                                          <br />
&nbsp;&nbsp;Link State ID: 6                                                          <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                               <br />
&nbsp;&nbsp;LS Seq Number: 80000008                                                   <br />
&nbsp;&nbsp;Checksum: 0x7F99                                                          <br />
&nbsp;&nbsp;Length: 44                                                                <br />
&nbsp;&nbsp;Metric: 100                                                               <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:0:26::                                           <br />
&nbsp;&nbsp;Prefix Length: 127, Options: None                                         <br />
&nbsp;&nbsp;                                                                          <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                               <br />
&nbsp;&nbsp;LS age: 2797                                                              <br />
&nbsp;&nbsp;LS Type: Inter Area Prefix Links                                          <br />
&nbsp;&nbsp;Link State ID: 7                                                          <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                               <br />
&nbsp;&nbsp;LS Seq Number: 80000006                                                   <br />
&nbsp;&nbsp;Checksum: 0x8220                                                          <br />
&nbsp;&nbsp;Length: 44                                                                <br />
&nbsp;&nbsp;Metric: 1000                                                              <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:0:16::                                           <br />
&nbsp;&nbsp;Prefix Length: 127, Options: None                                         <br />
&nbsp;&nbsp;                                                                          <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                               <br />
&nbsp;&nbsp;LS age: 2797                                                              <br />
&nbsp;&nbsp;LS Type: Inter Area Prefix Links                                          <br />
&nbsp;&nbsp;Link State ID: 8                                                          <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                               <br />
&nbsp;&nbsp;LS Seq Number: 80000006                                                   <br />
&nbsp;&nbsp;Checksum: 0x78B3                                                          <br />
&nbsp;&nbsp;Length: 44                                                                <br />
&nbsp;&nbsp;Metric: 101                                                               <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8::12:0                                            <br />
&nbsp;&nbsp;Prefix Length: 127, Options: None                                         <br />
&nbsp;&nbsp;                                                                          <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                               <br />
&nbsp;&nbsp;LS age: 2329                                                              <br />
&nbsp;&nbsp;LS Type: Inter Area Prefix Links                                          <br />
&nbsp;&nbsp;Link State ID: 9                                                          <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                               <br />
&nbsp;&nbsp;LS Seq Number: 80000007                                                   <br />
&nbsp;&nbsp;Checksum: 0xFA53                                                          <br />
&nbsp;&nbsp;Length: 44                                                                <br />
&nbsp;&nbsp;Metric: 301                                                               <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:10:13::2                                         <br />
&nbsp;&nbsp;Prefix Length: 127, Options: None                                         <br />
&nbsp;&nbsp;                                                                          <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                               <br />
&nbsp;&nbsp;LS age: 2329                                                              <br />
&nbsp;&nbsp;LS Type: Inter Area Prefix Links                                          <br />
&nbsp;&nbsp;Link State ID: 10                                                         <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                               <br />
&nbsp;&nbsp;LS Seq Number: 80000007                                                   <br />
&nbsp;&nbsp;Checksum: 0x111D                                                          <br />
&nbsp;&nbsp;Length: 44                                                                <br />
&nbsp;&nbsp;Metric: 301                                                               <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:10:34::                                          <br />
&nbsp;&nbsp;Prefix Length: 127, Options: None                                         <br />
&nbsp;&nbsp;                                                                          <br />
R7#                                                                         <br />
R7#                                                                         <br />
R7#<b>show ipv6 route ospf </b>                                             <br />
IPv6 Routing Table - default - 30 entries                                   <br />
Codes: C - Connected, L - Local, S - Static, U - Per-user Static route      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B - BGP, HA - Home Agent, MR - Mobile Router, R - RIP                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;H - NHRP, I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IS - ISIS summary, D - EIGRP, EX - EIGRP external, NM - NEMO         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ND - ND Default, NDp - ND Prefix, DCE - Destination, NDr - Redirect  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;O - OSPF Intra, OI - OSPF Inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2, l - LISP               <br />
<span style="background-color:#DCDCDC">
OI  2001:DB8::12:0/127 [110/102]                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8::12:2/127 [110/102]                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:2:10::1/128 [110/101]                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:2:11::1/128 [110/101]                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:6:10::1/128 [110/1]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:16::/127 [110/1001]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:16::2/127 [110/1001]                                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:26::/127 [110/101]                                           <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:26::2/127 [110/101]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0 </span>                         <br />
O   2001:DB8:7:8:10::1/128 [110/1]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:6, POS5/0                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:8, GigabitEthernet0/0                          <br />
O   2001:DB8:7:8:11::1/128 [110/1]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:6, POS5/0                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:8, GigabitEthernet0/0                          <br />
O   2001:DB8:7:8:12::1/128 [110/1]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:6, POS5/0                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:8, GigabitEthernet0/0                          <br />
O   2001:DB8:7:11::1/128 [110/1]                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
O   2001:DB8:7:12::1/128 [110/1]                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
<span style="background-color:#DCDCDC">
OI  2001:DB8:10:13::2/127 [110/302]                                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:10:34::/127 [110/302]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0  </span>                        <br />
OE2 2001:DB8:FF:45:1::2/127 [110/20]                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OE2 2001:DB8:FFFF:10::/64 [110/20]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OE2 2001:DB8:FFFF:11::/64 [110/20]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OE2 2001:DB8:FFFF:12::/64 [110/20]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
R7#                                                                         <br />
</code>
</div>

<p>
Inter-area prefix LSAs appear in the RIB as "OI" routes.
</p>
  </li>
  
  <li><b>Type 4 Inter-area router LSA (0x2004): </b>
  <p>
  Type 4 LSAs have been renamed from ASBR-summary in OSPFv2 to inter-area router LSAs in OSPFv3. 
  They are generated by ABRs to announce addresses of ASBRs in other areas. If a type 5 LSA is received by an ABR, the 
  ABR generates a type 4 LSA in the neighboring area to provide a mechanism through which the routers in another area 
  can identify a path to the ASBR. The inter-area router LSA can be viewed in the LSDB by issuing the privileged mode 
  command: <code> show ospfv3 database inter-area router </code>
  </p>
  
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
    <code>  
R7#<b>show ospfv3 database inter-area router </b>                   <br />
                                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPFv3 1 address-family ipv6 (router-id 7.7.7.7)   <br />
                                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inter Area Router Link States (Area 7)       <br />
                                                             <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                <br />
&nbsp;&nbsp;LS age: 555                                                <br />
&nbsp;&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                    <br />
&nbsp;&nbsp;LS Type: Inter Area Router Links                           <br />
&nbsp;&nbsp;Link State ID: 16843009                                    <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                <br />
&nbsp;&nbsp;LS Seq Number: 80000008                                    <br />
&nbsp;&nbsp;Checksum: 0xC6E                                            <br />
&nbsp;&nbsp;Length: 32                                                 <br />
&nbsp;&nbsp;Metric: 101                                                <br />
&nbsp;&nbsp;Destination Router ID: 1.1.1.1                             <br />
                                                             <br />
R7#                                                          <br />
</code>
</div>  
<p>
Type 4 LSAs do not contain prefix information. Type 4 inter-area router LSA is flooded in the 
originating area.
</p>

</li>
  <li><b>AS-External (0x4005): </b>
  <p>
  ASBRs advertise AS external LSAs to announce default routes or routes learned 
  through redistribution. This type of LSA is flooded throughout the entire OSPFv3 domain to any non-stubby area.
  Type 5 LSAs are not specific to any one area. In the LSDB, they are listed at the bottom of the LSA list.
  Type 5 external LSAs can 
  be viewed in the LDSDB by issuing the command: <code>show ospfv3 database external</code>.
  </p>
  
  <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
    <code>
  R7#                                                        <br />
R7#<b>show ospfv3 database external</b>                      <br />
                                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPFv3 1 address-family ipv6 (router-id 7.7.7.7)   <br />
                                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type-5 AS External Link States               <br />
                                                             <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                <br />
&nbsp;&nbsp;LS age: 3062                                               <br />
&nbsp;&nbsp;LS Type: AS External Link                                  <br />
&nbsp;&nbsp;Link State ID: 1                                           <br />
&nbsp;&nbsp;Advertising Router: 1.1.1.1                                <br />
&nbsp;&nbsp;LS Seq Number: 80000007                                    <br />
&nbsp;&nbsp;Checksum: 0x1E9C                                           <br />
&nbsp;&nbsp;Length: 36                                                 <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:FFFF:10::                         <br />
&nbsp;&nbsp;Prefix Length: 64, Options: None                           <br />
&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)           <br />
&nbsp;&nbsp;Metric: 20                                                 <br />
&nbsp;&nbsp;                                                           <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                <br />
&nbsp;&nbsp;LS age: 3062                                               <br />
&nbsp;&nbsp;LS Type: AS External Link                                  <br />
&nbsp;&nbsp;Link State ID: 2                                           <br />
&nbsp;&nbsp;Advertising Router: 1.1.1.1                                <br />
&nbsp;&nbsp;LS Seq Number: 80000007                                    <br />
&nbsp;&nbsp;Checksum: 0x2692                                           <br />
&nbsp;&nbsp;Length: 36                                                 <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:FFFF:11::                         <br />
&nbsp;&nbsp;Prefix Length: 64, Options: None                           <br />
&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)           <br />
&nbsp;&nbsp;Metric: 20                                                 <br />
&nbsp;&nbsp;                                                           <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                <br />
&nbsp;&nbsp;LS age: 3062                                               <br />
&nbsp;&nbsp;LS Type: AS External Link                                  <br />
&nbsp;&nbsp;Link State ID: 3                                           <br />
&nbsp;&nbsp;Advertising Router: 1.1.1.1                                <br />
&nbsp;&nbsp;LS Seq Number: 80000007                                    <br />
&nbsp;&nbsp;Checksum: 0x2E88                                           <br />
&nbsp;&nbsp;Length: 36                                                 <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:FFFF:12::                         <br />
&nbsp;&nbsp;Prefix Length: 64, Options: None                           <br />
&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)           <br />
&nbsp;&nbsp;Metric: 20                                                 <br />
&nbsp;&nbsp;                                                           <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                <br />
&nbsp;&nbsp;LS age: 3062                                               <br />
&nbsp;&nbsp;LS Type: AS External Link                                  <br />
&nbsp;&nbsp;Link State ID: 4                                           <br />
&nbsp;&nbsp;Advertising Router: 1.1.1.1                                <br />
&nbsp;&nbsp;LS Seq Number: 80000007                                    <br />
&nbsp;&nbsp;Checksum: 0xD067                                           <br />
&nbsp;&nbsp;Length: 44                                                 <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:FF:45:1::2                        <br />
&nbsp;&nbsp;Prefix Length: 127, Options: None                          <br />
&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)           <br />
&nbsp;&nbsp;Metric: 20                                                 <br />
                                                             <br />
R7#                                                          <br />
R7#                                                                         <br />
R7#                                                                         <br />
R7#<b>show ipv6 route ospf </b>                                             <br />
IPv6 Routing Table - default - 30 entries                                   <br />
Codes: C - Connected, L - Local, S - Static, U - Per-user Static route      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B - BGP, HA - Home Agent, MR - Mobile Router, R - RIP                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;H - NHRP, I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IS - ISIS summary, D - EIGRP, EX - EIGRP external, NM - NEMO         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ND - ND Default, NDp - ND Prefix, DCE - Destination, NDr - Redirect  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;O - OSPF Intra, OI - OSPF Inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2, l - LISP               <br />

OI  2001:DB8::12:0/127 [110/102]                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8::12:2/127 [110/102]                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:2:10::1/128 [110/101]                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:2:11::1/128 [110/101]                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:6:10::1/128 [110/1]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:16::/127 [110/1001]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:16::2/127 [110/1001]                                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:26::/127 [110/101]                                           <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:0:26::2/127 [110/101]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                         <br />
O   2001:DB8:7:8:10::1/128 [110/1]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:6, POS5/0                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:8, GigabitEthernet0/0                          <br />
O   2001:DB8:7:8:11::1/128 [110/1]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:6, POS5/0                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:8, GigabitEthernet0/0                          <br />
O   2001:DB8:7:8:12::1/128 [110/1]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:6, POS5/0                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C808:5FF:FEB3:8, GigabitEthernet0/0                          <br />
O   2001:DB8:7:11::1/128 [110/1]                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
O   2001:DB8:7:12::1/128 [110/1]                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:10:13::2/127 [110/302]                                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OI  2001:DB8:10:34::/127 [110/302]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
<span style="background-color:#DCDCDC">

OE2 2001:DB8:FF:45:1::2/127 [110/20]                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OE2 2001:DB8:FFFF:10::/64 [110/20]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OE2 2001:DB8:FFFF:11::/64 [110/20]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0                          <br />
OE2 2001:DB8:FFFF:12::/64 [110/20]                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;via FE80::C806:5FF:FE94:8, GigabitEthernet0/0 </span>                         <br />
R7#                                                                         <br />
</code>
</div>
  <p>
  The flooding scope of type 5 LSAs is Autonomous System (AS) Scoping
  Type 5 external LSAs are of two types; 
  </p>
  
  <p>
  Inclusion of a forwarding address or external route tag is now optional. AS-external LSAs can reference 
  anotehr LSA for inclusion of additional route attributes outside the scope of the OSPFv3 protocol For example, 
  the reference may be used to attach BGP path attributes to external routes.
  </p>
  
  </li>
  <li><b>NSSA(0x2007): </b>
  <p>
  ASBRs in NSSA advertise locally redistributed routes using Type 7 NSSA-external 
  LSAs.
  </p>
  
  <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
    <code>
                                                                <br />
  R3#<b>show ospfv3 database nssa-external</b>                         <br />
&nbsp;                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPFv3 1 address-family ipv6 (router-id 3.3.3.3)      <br />
&nbsp;                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type-7 AS External Link States (Area 10)        <br />
&nbsp;                                                              <br />
&nbsp;Routing Bit Set on this LSA                                   <br />
&nbsp;LS age: 1701                                                  <br />
&nbsp;LS Type: AS External Link                                     <br />
&nbsp;Link State ID: 0                                              <br />
&nbsp;Advertising Router: 1.1.1.1                                   <br />
&nbsp;LS Seq Number: 80000001                                       <br />
&nbsp;Checksum: 0x63CE                                              <br />
&nbsp;Length: 28                                                    <br />
&nbsp;Prefix Address: ::                                            <br />
&nbsp;Prefix Length: 0, Options: None                               <br />
&nbsp;Metric Type: 2 (Larger than any link state path)              <br />
&nbsp;Metric: 1                                                     <br />
&nbsp;                                                              <br />
&nbsp;Routing Bit Set on this LSA                                   <br />
&nbsp;LS age: 558                                                   <br />
&nbsp;LS Type: AS External Link                                     <br />
&nbsp;Link State ID: 0                                              <br />
&nbsp;Advertising Router: 4.4.4.4                                   <br />
&nbsp;LS Seq Number: 80000001                                       <br />
&nbsp;Checksum: 0xDFEB                                              <br />
&nbsp;Length: 36                                                    <br />
&nbsp;Prefix Address: 2001:DB8:FFFF:10::                            <br />
&nbsp;Prefix Length: 64, Options: P                                 <br />
&nbsp;Metric Type: 2 (Larger than any link state path)              <br />
&nbsp;Metric: 20                                                    <br />
&nbsp;                                                              <br />
&nbsp;Routing Bit Set on this LSA                                   <br />
&nbsp;LS age: 558                                                   <br />
&nbsp;LS Type: AS External Link                                     <br />
&nbsp;Link State ID: 1                                              <br />
&nbsp;Advertising Router: 4.4.4.4                                   <br />
&nbsp;LS Seq Number: 80000001                                       <br />
&nbsp;Checksum: 0xE7E1                                              <br />
&nbsp;Length: 36                                                    <br />
&nbsp;Prefix Address: 2001:DB8:FFFF:11::                            <br />
&nbsp;Prefix Length: 64, Options: P                                 <br />
&nbsp;Metric Type: 2 (Larger than any link state path)              <br />
&nbsp;Metric: 20                                                    <br />
&nbsp;                                                              <br />
&nbsp;Routing Bit Set on this LSA                                   <br />
&nbsp;LS age: 558                                                   <br />
&nbsp;LS Type: AS External Link                                     <br />
&nbsp;Link State ID: 2                                              <br />
&nbsp;Advertising Router: 4.4.4.4                                   <br />
&nbsp;LS Seq Number: 80000001                                       <br />
&nbsp;Checksum: 0xEFD7                                              <br />
&nbsp;Length: 36                                                    <br />
&nbsp;Prefix Address: 2001:DB8:FFFF:12::                            <br />
&nbsp;Prefix Length: 64, Options: P                                 <br />
&nbsp;Metric Type: 2 (Larger than any link state path)              <br />
&nbsp;Metric: 20                                                    <br />
&nbsp;                                                              <br />
&nbsp;Routing Bit Set on this LSA                                   <br />
&nbsp;LS age: 558                                                   <br />
&nbsp;LS Type: AS External Link                                     <br />
&nbsp;Link State ID: 3                                              <br />
&nbsp;Advertising Router: 4.4.4.4                                   <br />
&nbsp;LS Seq Number: 80000001                                       <br />
&nbsp;Checksum: 0x92B6                                              <br />
&nbsp;Length: 44                                                    <br />
&nbsp;Prefix Address: 2001:DB8:FF:45:1::2                           <br />
&nbsp;Prefix Length: 127, Options: P                                <br />
&nbsp;Metric Type: 2 (Larger than any link state path)              <br />
&nbsp;Metric: 20                                                    <br />
                                                                <br />
R3#                                                                  <br />
--------------------------------------- <br />
<b>ON ROUTER R1 WHICH IS THE NSSA ABR</B> <BR />
----------------------------------- <br /><br />
R1#<b>show ospfv3 </b>                                                      <br />
&nbsp;OSPFv3 1 address-family ipv6                                        <br />
&nbsp;Router ID 1.1.1.1                                                   <br />
&nbsp;Event-log enabled, Maximum number of events: 1000, Mode: cyclic     <br />
&nbsp;It is an area border and autonomous system boundary router          <br />
&nbsp;Router is not originating router-LSAs with maximum metric           <br />
&nbsp;Initial SPF schedule delay 5000 msecs                               <br />
&nbsp;Minimum hold time between two consecutive SPFs 10000 msecs          <br />
&nbsp;Maximum wait time between two consecutive SPFs 10000 msecs          <br />
&nbsp;Minimum LSA interval 5 secs                                         <br />
&nbsp;Minimum LSA arrival 1000 msecs                                      <br />
&nbsp;LSA group pacing timer 240 secs                                     <br />
&nbsp;Interface flood pacing timer 33 msecs                               <br />
&nbsp;Retransmission pacing timer 66 msecs                                <br />
&nbsp;Number of external LSA 0. Checksum Sum 0x000000                     <br />
&nbsp;Number of areas in this router is 2. 1 normal 0 stub 1 nssa         <br />
&nbsp;Graceful restart helper support enabled                             <br />
&nbsp;Reference bandwidth unit is 100000 mbps                             <br />
&nbsp;RFC1583 compatibility enabled                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;Area BACKBONE(0)                                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of interfaces in this area is 2                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPF algorithm executed 3 times                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of LSA 22. Checksum Sum 0x0BDC02                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of DCbitless LSA 0                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of indication LSA 0                                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of DoNotAge LSA 0                                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flood list length 0                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;Area 10                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of interfaces in this area is 1                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="background-color:#DCDCDC">
 It is a NSSA area </span>                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color:#DCDCDC">
Perform type-7/type-5 LSA translation </span>                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generates NSSA default route with cost 1                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPF algorithm executed 5 times                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of LSA 23. Checksum Sum 0x091393                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of DCbitless LSA 0                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of indication LSA 0                                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of DoNotAge LSA 0                                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flood list length 0                                          <br />
                                                                     <br />
R1#                                                                  <br />
</code>
</div>  
  <p>
  This LSA contains prefix information and is flooded only to an NSSA area.
  The NSSA ABR will block type 7 NSSA-external LSAs and perform 
  type-7/type-5 LSA translation.
  </p>

  </li>
  
  <li><b>Link LSA (0x0008): </b>
  <p>
  Type 8 LSAs are flooded only on the originating local link. Link-LSAs serve three purposes:
  
  <ul>
   <li>they provide the router's link-local address to all other routers attached to the link
   <li>they information other routers attached to the link of a list of IPv6 prefixes to associate 
   with the link.
   <li>they allowthe router to advertise a collection of Options bits to associate with the network LSA that will be 
   originated for the link.
  </ul>
  
  Link-local LSAs map all global unicast address prefixes associated with an interface to the link-local 
  interface IP address of the router. Link LSA is shared only between neighbors on the same link.
  The link LSA is responsible for providing details of IPv6 prefixes associated with an interface.
  </p>
  <p>
  Link-local addresses cannot be leaned through the receipt of Hello packets alone. 
  Link-local addresses appear in OSPF link-LSAs. They are not allowed in other LSA types.
   </p>
   
  <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
    <code>
                                                                      <br />
    R6#<b>show ospfv3 database link </b>                                     <br />                                    
                                                                      <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPFv3 1 address-family ipv6 (router-id 6.6.6.6)            <br />                                
                                                                      <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link (Type-8) Link States (Area 0)                    <br />                                
                                                                      <br />                                
&nbsp;&nbsp;LS age: 740                                                         <br />                                
&nbsp;&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                             <br />                                
&nbsp;&nbsp;LS Type: Link-LSA (Interface: FastEthernet3/0)                      <br />                                
&nbsp;&nbsp;Link State ID: 7 (Interface ID)                                     <br />                                
&nbsp;&nbsp;Advertising Router: 1.1.1.1                                         <br />                                
&nbsp;&nbsp;LS Seq Number: 80000006                                             <br />                                
&nbsp;&nbsp;Checksum: 0x7E8A                                                    <br />                                
&nbsp;&nbsp;Length: 64                                                          <br />                                
&nbsp;&nbsp;Router Priority: 1                                                  <br />                                
&nbsp;&nbsp;Link Local Address: FE80::C801:3FF:FECB:54                          <br />                                
&nbsp;&nbsp;Number of Prefixes: 1                                               <br />                                
&nbsp;&nbsp;Prefix Address: 2001:DB8:0:16::                                     <br />                                
&nbsp;&nbsp;Prefix Length: 127, Options: None                                   <br />                                
&nbsp;&nbsp;                                                                    <br />                                
&nbsp;&nbsp;LS age: 1398                                                        <br />                                
&nbsp;&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                             <br />                                
&nbsp;&nbsp;LS Type: Link-LSA (Interface: FastEthernet3/0)                      <br />                                
&nbsp;&nbsp;Link State ID: 7 (Interface ID)                                     <br />                                
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                         <br />                                
&nbsp;&nbsp;LS Seq Number: 80000005                                             <br />                                
&nbsp;&nbsp;Checksum: 0x68BB                                                    <br />                                
&nbsp;&nbsp;Length: 64                                                          <br />                                
&nbsp;&nbsp;Router Priority: 1                                                  <br />                                
&nbsp;&nbsp;Link Local Address: FE80::C806:5FF:FE94:54                          <br />                                
&nbsp;&nbsp;Number of Prefixes: 1                                               <br />                                
&nbsp;&nbsp;Prefix Address: 2001:DB8:0:16::2                                    <br />                                
&nbsp;&nbsp;Prefix Length: 127, Options: None                                   <br />                                
&nbsp;&nbsp;                                                                    <br />                                
&nbsp;&nbsp;LS age: 1290                                                        <br />                                
&nbsp;&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                             <br />                                
&nbsp;&nbsp;LS Type: Link-LSA (Interface: GigabitEthernet1/0)                   <br />                                
&nbsp;&nbsp;Link State ID: 5 (Interface ID)                                     <br />                                
&nbsp;&nbsp;Advertising Router: 2.2.2.2                                         <br />                                
&nbsp;&nbsp;LS Seq Number: 80000003                                             <br />                                
&nbsp;&nbsp;Checksum: 0xAE61                                                    <br />                                
&nbsp;&nbsp;Length: 64                                                          <br />                                
&nbsp;&nbsp;Router Priority: 1                                                  <br />                                
&nbsp;&nbsp;Link Local Address: FE80::C802:3FF:FEEC:1C                          <br />                                
&nbsp;&nbsp;Number of Prefixes: 1                                               <br />                                
&nbsp;&nbsp;Prefix Address: 2001:DB8:0:26::                                     <br />                                
&nbsp;&nbsp;Prefix Length: 127, Options: None                                   <br />                                
&nbsp;&nbsp;                                                                    <br />                                
&nbsp;&nbsp;LS age: 1398                                                        <br />                                
&nbsp;&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                             <br />                                
&nbsp;&nbsp;LS Type: Link-LSA (Interface: GigabitEthernet1/0)                   <br />                                
&nbsp;&nbsp;Link State ID: 5 (Interface ID)                                     <br />                                
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                         <br />                                
&nbsp;&nbsp;LS Seq Number: 80000004                                             <br />                                
&nbsp;&nbsp;Checksum: 0xC43                                                     <br />                                
&nbsp;&nbsp;Length: 64                                                          <br />                                
&nbsp;&nbsp;Router Priority: 1                                                  <br />                                
&nbsp;&nbsp;Link Local Address: FE80::C806:5FF:FE94:1C                          <br />                                
&nbsp;&nbsp;Number of Prefixes: 1                                               <br />                                
&nbsp;&nbsp;Prefix Address: 2001:DB8:0:26::2                                    <br />                                
&nbsp;&nbsp;Prefix Length: 127, Options: None                                   <br />                                
                                                                      <br />                                
                                                                      <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link (Type-8) Link States (Area 7)                    <br />                                
                                                                      <br />                                
&nbsp;&nbsp;LS age: 1398                                                        <br />                                
&nbsp;&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                             <br />                                
&nbsp;&nbsp;LS Type: Link-LSA (Interface: GigabitEthernet0/0)                   <br />                                
&nbsp;&nbsp;Link State ID: 4 (Interface ID)                                     <br />                                
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                         <br />                                
&nbsp;&nbsp;LS Seq Number: 80000003                                             <br />                                
&nbsp;&nbsp;Checksum: 0x68A0                                                    <br />                                
&nbsp;&nbsp;Length: 44                                                          <br />                                
&nbsp;&nbsp;Router Priority: 1                                                  <br />                                
&nbsp;&nbsp;Link Local Address: FE80::C806:5FF:FE94:8                           <br />                                
&nbsp;&nbsp;Number of Prefixes: 0                                               <br />                                
&nbsp;&nbsp;                                                                    <br />                                
&nbsp;&nbsp;LS age: 671                                                         <br />                                
&nbsp;&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                             <br />                                
&nbsp;&nbsp;LS Type: Link-LSA (Interface: GigabitEthernet0/0)                   <br />                                
&nbsp;&nbsp;Link State ID: 4 (Interface ID)                                     <br />                                
&nbsp;&nbsp;Advertising Router: 7.7.7.7                                         <br />                                
&nbsp;&nbsp;LS Seq Number: 80000003                                             <br />                                
&nbsp;&nbsp;Checksum: 0xBEA6                                                    <br />                                
&nbsp;&nbsp;Length: 44                                                          <br />                                
&nbsp;&nbsp;Router Priority: 1                                                  <br />                                
&nbsp;&nbsp;Link Local Address: FE80::C807:5FF:FE33:8                           <br />                                
&nbsp;&nbsp;Number of Prefixes: 0                                               <br />                                
&nbsp;&nbsp;                                                                    <br />                                
&nbsp;&nbsp;LS age: 1228                                                        <br />                                
&nbsp;&nbsp;Options: (V6-Bit, E-Bit, R-bit, DC-Bit)                             <br />                                
&nbsp;&nbsp;LS Type: Link-LSA (Interface: GigabitEthernet0/0)                   <br />                                
&nbsp;&nbsp;Link State ID: 4 (Interface ID)                                     <br />                                
&nbsp;&nbsp;Advertising Router: 8.8.8.8                                         <br />                                
&nbsp;&nbsp;LS Seq Number: 80000004                                             <br />                                
&nbsp;&nbsp;Checksum: 0xB826                                                    <br />                                
&nbsp;&nbsp;Length: 44                                                          <br />                                
&nbsp;&nbsp;Router Priority: 1                                                  <br />                                
&nbsp;&nbsp;Link Local Address: FE80::C808:5FF:FEB3:8                           <br />                                
&nbsp;&nbsp;Number of Prefixes: 0                                               <br />                                
                                                                      <br />                                
R6#                                                                   <br />                                
R6#<b>show ipv6 interface brief </b>                                  <br />                                
Ethernet0/0            [administratively down/down]                   <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;unassigned                                                        <br />                                
GigabitEthernet0/0     [up/up]                                        <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;FE80::C806:5FF:FE94:8                                             <br />                                
GigabitEthernet1/0     [up/up]                                        <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;FE80::C806:5FF:FE94:1C                                            <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;2001:DB8:0:26::2                                                  <br />                                
GigabitEthernet2/0     [administratively down/down]                   <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;unassigned                                                        <br />                                
FastEthernet3/0        [up/up]                                        <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;FE80::C806:5FF:FE94:54                                            <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;2001:DB8:0:16::2                                                  <br />                                
FastEthernet3/1        [administratively down/down]                   <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;unassigned                                                        <br />                                
FastEthernet4/0        [administratively down/down]                   <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;unassigned                                                        <br />                                
FastEthernet4/1        [administratively down/down]                   <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;unassigned                                                        <br />                                
POS5/0                 [administratively down/down]                   <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;unassigned                                                        <br />                                
POS6/0                 [administratively down/down]                   <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;unassigned                                                        <br />                                
Loopback10             [up/up]                                        <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;FE80::C806:5FF:FE94:6                                             <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;2001:DB8:0:6:10::1                                                <br />                                
Loopback11             [up/up]                                        <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;FE80::C806:5FF:FE94:6                                             <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;2001:DB8:7:11::1                                                  <br />                                
Loopback12             [up/up]                                        <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;FE80::C806:5FF:FE94:6                                             <br />                                
&nbsp;&nbsp;&nbsp;&nbsp;2001:DB8:7:12::1                                                  <br />                                
R6#                                                                   <br />                                
R6#                                                                   <br />                                
R6#<b>show ospfv3 interface brief </b>                                       <br />                                
Interface    PID   Area            AF         Cost  State Nbrs F/C    <br />                                
Lo10         1     0               IPv6       1     LOOP  0/0         <br />                                
Fa3/0        1     0               IPv6       1000  DR    1/1         <br />                                
Gi1/0        1     0               IPv6       100   DR    1/1         <br />                                
Lo11         1     7               IPv6       1     LOOP  0/0         <br />                                
Lo12         1     7               IPv6       1     LOOP  0/0         <br />                                
Gi0/0        1     7               IPv6       100   BDR   2/2         <br />                                
R6#                                                                   <br />                                
R6#                                                                                                    
  
  </code>
</div>
<p>

</p>
  </li>
  <li><b>Type 9 Intra-area Prefix LSA(0x2009):</b> 
  <p>
  Type 9 LSA is used to advertise IPv6 prefixes that area associated with a router, stub or 
  transit segment. The router and network LSAs do not specify the IP address of the prefix for a network. LSA 9 contains all the 
networks inside an area. They are not propagated out of the area.
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R8#                                                              <br />                                           
R8#<b>show ospfv3 database prefix</b>                            <br />
                                                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPFv3 1 address-family ipv6 (router-id 8.8.8.8)       <br />
                                                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Intra Area Prefix Link States (Area 7)           <br />
                                                                 <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                    <br />
&nbsp;&nbsp;LS age: 461                                                    <br />
&nbsp;&nbsp;LS Type: Intra-Area-Prefix-LSA                                 <br />
&nbsp;&nbsp;Link State ID: 0                                               <br />
&nbsp;&nbsp;Advertising Router: 6.6.6.6                                    <br />
&nbsp;&nbsp;LS Seq Number: 80000002                                        <br />
&nbsp;&nbsp;Checksum: 0x5E54                                               <br />
&nbsp;&nbsp;Length: 72                                                     <br />
&nbsp;&nbsp;Referenced LSA Type: 2001                                      <br />
&nbsp;&nbsp;Referenced Link State ID: 0                                    <br />
&nbsp;&nbsp;Referenced Advertising Router: 6.6.6.6                         <br />
&nbsp;&nbsp;Number of Prefixes: 2                                          <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:7:11::1                               <br />
&nbsp;&nbsp;Prefix Length: 128, Options: LA, Metric: 0                     <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:7:12::1                               <br />
&nbsp;&nbsp;Prefix Length: 128, Options: LA, Metric: 0                     <br />
&nbsp;&nbsp;                                                               <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                    <br />
&nbsp;&nbsp;LS age: 1142                                                   <br />
&nbsp;&nbsp;LS Type: Intra-Area-Prefix-LSA                                 <br />
&nbsp;&nbsp;Link State ID: 0                                               <br />
&nbsp;&nbsp;Advertising Router: 7.7.7.7                                    <br />
&nbsp;&nbsp;LS Seq Number: 80000002                                        <br />
&nbsp;&nbsp;Checksum: 0xE873                                               <br />
&nbsp;&nbsp;Length: 112                                                    <br />
&nbsp;&nbsp;Referenced LSA Type: 2001                                      <br />
&nbsp;&nbsp;Referenced Link State ID: 0                                    <br />
&nbsp;&nbsp;Referenced Advertising Router: 7.7.7.7                         <br />
&nbsp;&nbsp;Number of Prefixes: 4                                          <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:7:7:10::1                             <br />
&nbsp;&nbsp;Prefix Length: 128, Options: LA, Metric: 0                     <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:7:7:11::1                             <br />
&nbsp;&nbsp;Prefix Length: 128, Options: LA, Metric: 0                     <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:7:7:13::1                             <br />
&nbsp;&nbsp;Prefix Length: 128, Options: LA, Metric: 0                     <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:7:7:14::1                             <br />
&nbsp;&nbsp;Prefix Length: 128, Options: LA, Metric: 0                     <br />
&nbsp;&nbsp;                                                               <br />
&nbsp;&nbsp;Routing Bit Set on this LSA                                    <br />
&nbsp;&nbsp;LS age: 511                                                    <br />
&nbsp;&nbsp;LS Type: Intra-Area-Prefix-LSA                                 <br />
&nbsp;&nbsp;Link State ID: 0                                               <br />
&nbsp;&nbsp;Advertising Router: 8.8.8.8                                    <br />
&nbsp;&nbsp;LS Seq Number: 80000003                                        <br />
&nbsp;&nbsp;Checksum: 0x6092                                               <br />
&nbsp;&nbsp;Length: 92                                                     <br />
&nbsp;&nbsp;Referenced LSA Type: 2001                                      <br />
&nbsp;&nbsp;Referenced Link State ID: 0                                    <br />
&nbsp;&nbsp;Referenced Advertising Router: 8.8.8.8                         <br />
&nbsp;&nbsp;Number of Prefixes: 3                                          <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:7:8:10::1                             <br />
&nbsp;&nbsp;Prefix Length: 128, Options: LA, Metric: 0                     <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:7:8:11::1                             <br />
&nbsp;&nbsp;Prefix Length: 128, Options: LA, Metric: 0                     <br />
&nbsp;&nbsp;Prefix Address: 2001:DB8:7:8:12::1                             <br />
&nbsp;&nbsp;Prefix Length: 128, Options: LA, Metric: 0                     <br />              
R8#                                                              <br />
</code>
</div>
</li>
</ul>

<h3>OSPFv3 Link-local Forwarding</h3>
<p>
The OSPFv3 LSDB creates an SPT based on links instead of networks. This means that transit links only 
require IPv6 link-local addresses for forwarding traffic.
</p>

<h3>Virtual Links</h3>
<p>
All virtual-links use a global scope IPv6 address as a source IPv6 address. 
</p>

<h2>OSPF Path Selection</h2>
<p>
The decision on the path the next hop for traffic is based on the path metric. 
Metric is the cummulative OSPF interface cost along the path. The cost is calculated as follows;  
</p>
<code>
reference bandwidth / interface bandwidth.
</code>
<p>
The default OSPF reference bandwidth is 100mbps. With this default reference bandwidth, OSPF is unable to differentiate 
between fastethernet(100mbps), gigabitethernet(1000mbps), ten gigabitethernet(10000) or high speeds. 
All interfaces from fastethernet or faster will have an OSPF cost of one (1). It is
imperative to modify the defaylt reference bandwidth in network environments with interfaces 
having gigabitethernet or faster interfaces so that OSPF can make more accurate path selection decisions. 

This default reference bandwidth can be 
modified with the OSPF router mode command:
<code>
auto-cost reference-bandwidth <i>bandwidth </i>
</code>
The bandwidth value is in megabits per second.
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R8(config-router)#<b>auto-cost reference-bandwidth 10000</b>                  <br />
% OSPF: Reference bandwidth is changed.                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please ensure reference bandwidth is consistent across all routers.   <br />
R8(config-router)#<b>do show ip ospf</b>                                      <br />
&nbsp;Routing Process "ospf 8" with ID 8.8.8.8                                     <br />
&nbsp;Start time: 00:00:40.364, Time elapsed: 01:49:26.920                         <br />
&nbsp;Supports only single TOS(TOS0) routes                                        <br />
&nbsp;.......                                                                      <br />
&nbsp;Number of DoNotAge external and opaque AS LSA 0                              <br />
&nbsp;Number of areas in this router is 2. 2 normal 0 stub 0 nssa                  <br />
&nbsp;Number of areas transit capable is 1                                         <br />
&nbsp;External flood list length 0                                                 <br />
&nbsp;IETF NSF helper support enabled                                              <br />
&nbsp;Cisco NSF helper support enabled                                             <br />
&nbsp;<span style="background-color:#DCDCDC">                                         <br />
&nbsp;Reference bandwidth unit is 10000 mbps</span>                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;Area BACKBONE(0)                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of interfaces in this area is 1                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area has no authentication                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPF algorithm last executed 01:49:00.076 ago                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPF algorithm executed 2 times                                        <br />
        ........                                                       <br>
</code>
</div>
<p>
The reference bandwidth should be set to the same value for all routers in the OSPF domain, 
otherwise sub-optimal routing may occur.
Type 1 LSAs include the cost of each link which is in the range 1 - 65535.
</p>



<h1>OSPFv3 Optimization</h1>
<h3>Multiple Instances</h3>
OSPFv3 packets include  an instance ID field that may be used to manipulate which 
routers on a network segment are allowed to form adjacencies. IP address information 
is advertised independently by two new LSA types: intra-area prefix LSA and link-local LSA.

Advertising IP address info using LSA types eliminates the need for OSPF to perform full SPF tree calculations everytime 
a new address prefix is added or changed on an interface. The OSPFv3 LSDB creates a shortest 
path topology tree based on links instead of networks.

<h4>Route Summarization</h4>
<p>
Configured on ABRs and for a specific address family:
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
#address-family ipv6 unicast <br>
#area 0 range 2001:DB8:10::/65
</code>
</div>

<h3>Network Type</h3>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
#show ospfv3 interface brief<br>
#int g0/2 <br>
#ospfv3 network broadcast
</code>
</div>

<h2>Security of OSPFv3 Adjacencies and Route Exchange</h2>
<p>
OSPFv3 does not support neighbor authentication inside the protocol but uses IPSec. 
Authentication Header (AH) or Encapsulating Security Protocol (ESP) extension headerss 
are added to OSPF packets to provide authentication, integrity and confidentiality. 
</p>

<p>
No ISAKMP support so keys must be manually configured.  Security Parameter Index (SPI) is like a sequence number 
so it needs to match on both ends. OSPF simply implements only authentication. With OSPFv3, encryption is 
implemented as well with the entire packet being encrypted. 
</p>

<ol>
  <li><b>Authentication Header (AH): </b>provides authentication. 
  <code>
  #ospfv3 authentication
  </code>
  
  </li>
  <li><b>Encapsulating Security Payload: </b> provides authentication and encryption
  <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
  <code>
  #ospfv3 encryption ipsec spi 1000 esp 3des <i>key </i> sha1 <i>key</i>
  </code>
  </div>
  Where: <br />
  Security policy index = 1000 <br />
  Encryption algorithm = 3des <br />
  Encryption key = 1234567890 <br />
  Authentication algorithm = sha1 <br />
  Authentication key: 132324sdsfdg <br />
  </li>
</ol>
<p>
Verification
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
  <code>
  #show ospfv3 interface g0/2
  </code>
</div>
<p>
OSPFv3 neighbor authentication does not perform IKE to negotiate IPSec security associations (SA) values.
Therefore IPSec security parameter index (SPI) algorithm and key must be manually defined when configuring
OSPFv3 authentication. IPSec peers cannot reuse the same SPI values.
</p>

<h1>Troubleshooting Authentication</h1>
OSPFv3 area authentication is applied to the OSPFv3 router mode command. In this mode, 
the encryption or authentication parameters are configured. This is done using the following:
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
#area 0 authentication ipsec spi 1000 sha password-key.
</code>
</div>
verification commands;
<code>show crypto ipsec policy </code>
<p>
Area authentication applies to all interfaces in the area. SAs are created for outbound and inbound connections. 
To view these, 
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
#show crypto ipsec sa <br />
#show crypto ipsec policy <br />
#show ospfv3 interface <br />
</code>
</div>

