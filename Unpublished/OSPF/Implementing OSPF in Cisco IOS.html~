<h1>Implementing OSPF in Cisco IOS</h1>
<p>
<ol>
  <li><a href="#INTRO">Introduction</a></li>
  <li><a href="#NEIGHBOR_ADJACENCY">Neighbor Adjacency</a></li>
  <ol type="i">
    <li><a href="#ADJACENCY_PRECONDITIONS">Adjacency Preconditions</a></li>
    <li><a href="#OSPF_PACKETS">OSPF Packet Types</a></li>
    <li><a href="#ADVERTISING_NETWORKS">Advertising Networks</a></li>
    <li><a href="#ADJACENCY_STATES">Adjacency States</a></li>
  	<li><a href="#OSPF_NEIGHBOR_TABLE">Neighbor Table</a></li>
  	<li><a href="#NETWORK_TYPES">OSPF Network Types</a></li>
  	<li><a href="#DR_BDR">Designated Router &amp; Backup Designated Router</a></li>
  </ol>
          
  <li><a href="#LSA">LSDB and Link State Advertisements (LSA)</a></li>
    <ol type="i">
      <li><a href="#LSDB">Link State Database</a></li>
      <li><a href="#TYPE1_LSA">Type 1 LSA</a></li>
      <li><a href="#TYPE2_LSA">Type 2 LSA</a></li>
      <li><a href="#TYPE3_LSA">Type 3 LSA</a></li>
      <li><a href="#TYPE4_LSA">Type 4 LSA</a></li>
      <li><a href="#TYPE5_LSA">Type 5 LSA</a></li>
      <li><a href="#TYPE7_LSA">Type 7 LSA</a></li>
    </ol>
  
    <li><a href="#TOPOLOGY">OSPF Hierarchy</a></li>
  <ul>
      <li><a href="#AREAS">Areas</a></li>
      <li><a href="#MULTI_AREA">Multi-area OSPF</a></li>
	  <li><a href="#VIRTUAL_LINKS">Virtual Links</a></li>
	  <li><a href="#ROUTER_TYPES">Router Types</a></li>
  </ul>
  <li><a href="#SPF">SPF Operation</a></li>
  <li><a href="#OSPF_OPTIMIZATION">OSPF Optimization</a></li>
    <ol type="i">
      <li><a href="#ACCELERATING_CONVERGENCE">Accelerating OSPF Convergence</a></li>
      <li><a href="#CTRL_LSA_GENERATION">Controlling LSA Generation and Propagation</a></li>
      <li><a href="#ALTERING_SPF">Altering SPF</a></li>
      <li><a href="#LSDB_SIZE">Reducing LSDB Size</a></li>
      <li><a href="#OSPF_RESTARTS">OSPF Restarts</a></li>
      <li><a href="#TRAFFIC_ENGINEERING">OSPF Traffic Engineering</a></li>
      
    </ol>
  <li><a href="#OSPF_SECURITY">OSPF Security</a></li>
  <li><a href="#TSHOOT">Troubleshooting OSPF Issues</a></li>
  
</ol>
</p>

<h1 id="INTRO">Introduction</h1>

<p>
OSPF is an open standard link state IP routing protocol defined by 
<a href="https://www.ietf.org/rfc/rfc2328.txt">RFC 2328</a> (written in 1998). 
Another example of a link state routing protocol is Intermediate System to Intermediate 
System (IS-IS). Like all link state routing protocols, OSPF is a classless 
routing protocol that includes the subnet mask in OSPF packets exchanged between
neighbors.
OSPF is classified as an Interior Gateway Protocol routing within a single 
autonomous system. As a link state routing protocol, a router running OSPF 
compiles a database of all the links in the network, the OSPF routers on those 
links and the cost of the links. This database is the same on all routers in an OSPF area.
Each router independently determines their best path to the destinations in this 
database. OSPF runs Dijkstra's algorithm to calculate the shortest path to any 
destination network in the OSPF domain. Dijkstra's algorithm is core to all 
link state routing alogrithms.
</p>

<p>
OSPF uses IP protocol number 89. OSPF is its own transport layer protocol.
The current versions of OSPF are OSPFv2 that supports IPv4 and OSPFv3 that supports 
IPv4 and IPv6. The two versions of OSPF are not compatible i.e., routers running OSPFv3 cannot form an 
IPv4 adjacency with routers running OSPFv2. This entire article discusses OSPFv2.
</p>

<P>
In Cisco IOS, to configure OSPF issue the global config mode command 
<code><b>router ospf <i>process_id</i></b></code> where 
process_id is a value between 1 - 65535:
</p>


<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
  R1#<b>configure terminal </b> <br />
  R1(config)#<b>router ospf 1 </b> <br />
  </code>
</div>
<p>
The process ID is locally significant and does not have to match on any 
of the routers in the OSPF domain.
</p>

<p>
For a router to learn and exchange routes with other OSPF routers in 
the OSPF domain, the router transitions through 
various stages to present accurate routing information to the global/VRF routing
information base (RIB) or routing table. These stages include:

<ul>
  <li><b>Step 1: Neighbor Adjacency;</b> this involves the discovery of neighbors 
  and formation of neighbor relationships known as adjacencies. Once formed, 
  the adjacent neighbors exchange all their learned routes.</li>
  <li><b>Step 2: Best Path Selection; </b> each router creates a local database of learned routes, known as the 
  link state database (LSDB). Using the information from the LSDB, 
OSPF generates a shortest path first tree (SPT) in which the local 
  router is at the root of the tree. The shortest path to each node in the tree 
  is determined and then presented to the global RIB for installation.</li>
  <li><b>Step 3: Neighbor and Topology Maintenance;</b> each router continually monitors the state 
  of its neighbors and their links to ensure that its knowledge of
  the network is up-to-date.</li>
</ul>

</p>

<h1 id="NEIGHBOR_ADJACENCY">OSPF Neighbor Adjacency</h1>

 <h2 id="ADJACENCY_PRECONDITIONS">Adjacency Preconditions</h2>
 
<p>
For OSPF routers to exchange route information, they need to form an adjacency. 
The following are the adjacency preconditions:
<ol>
  <li><b>Unique Router ID (RID):</b> The router identifier is a value used to uniquely 
  identify an OSPF-enabled router in the OSPF domain. The RID is a value expressed 
  in dotted decimal notation (in the form of an IPv4 address) but is not an 
  IP address!  The RID must be unique throughout the OSPF domain.
  If a router has more than one OSPF process, then the RID for each OSPF process 
  on the router must be unique. By default, the RID is determined in the 
  following order:
  <ol type="a">
    <li>Highest IPv4 address of any loopback interface.</li>
    <li>Highest IPv4 address of any physical interface if no loopback interfaces 
    are configured with IPv4 addresses. </li>
  </ol>
  
  <p>
  Once the OSPF process has a RID, it does not change until the OSPF process restarts.

  The RID can also be manually configured using the OSPF router mode command: 
  
  <code><b>router-id <i>0.0.0.1</i></b></code>; where <code><b>0.0.0.1</b></code>
  is the desired router ID. This is the preffered method of configuring a RID.
  
  The RID can be viewed using most OSPF <code><b>show</b></code> commands:
  </p>
  <p>
  <div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
  R1#<b>show ip ospf</b> <br />
 Routing Process "ospf 1" with ID <span style="background-color:#DCDCDC">1.1.1.1 </span><br />
 Start time: 00:00:32.764, Time elapsed: 00:29:01.924 <br />
 Supports only single TOS(TOS0) routes <br />
 Supports opaque LSA <br />
 Supports Link-local Signaling (LLS) <br />
 Supports area transit capability <br />
 Supports NSSA (compatible with RFC 3101) <br />
 Event-log enabled, Maximum number of events: 1000, Mode: cyclic <br />
 It is an area border and autonomous system boundary router <br />
 Redistributing External Routes from, <br />
 Router is not originating router-LSAs with maximum metric <br />
 Initial SPF schedule delay 5000 msecs <br />
 .....
  
  </code>
  </div>
  </p>
  
  </li>
  <li><b>Interfaces must be OSPF active (in an Up state):</b> The interface 
  through which the adjacency is to be formed must have OSPF enabled on it and 
  must not be in an OSPF passive state. Additionally, the interface and line 
  protocol must be up.</li>
  <li><b>Common Subnet: </b>Interfaces must share a common subnet on the primary IP address. 
  By default, OSPF advertises the secondary IP address of an interface if it is enabled 
  in the OSPF router mode or interface mode.
  This precondition for a common subnet between potential OSPF neighbors 
  does not exist for OSPFv3 as IPv6 implementation does not require a common 
  subnet. In OSPFv3, communicates using IPv6 link local addresses.
  
  </li>
  <li><b>Matching MTU:</b> Interface MTU must match. The MTU controls the size 
  of packets that are sent out of interfaces. The default MTU value is 1500. 
<p>
<b><i>Troubleshooting Tip:</i></b> If a neighborship formation stops at <b>EXSTART</b>
phase of adjacency formation, then it is probable that the IP MTUs are mismatched. 
</p>
<p>
OSPF can be configured to ignore this precondition using the interface mode 
  command:
 <code><b>ip ospf mtu-ignore</b></code>.
 </p>
 <div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
   R1(config)#<b> interface g0/0 </b> <br />
  R1(config-if)#<b>ip ospf mtu-ignore</b>
</code>
</div>
<p>
However, ignoring MTU checks is not recommeded in production networks. This is 
because if two OSPF neighbors have different MTU values and, say, the one with 
the larger MTU value has a large LSDB, then it could send the entire LSDB in a 
few packets and the neighbor may be unable to process these large packets.
</p>

  </li>
  
  <li><b>Matching OSPF Network Type:</b> 
  OSPF defines the following network types: broadcast, non-broadcast, point-to-point,
  point-to-multipoint and loopback. OSPF configures the network type on the 
  interface automatically depending on the connection medium(layer 2). The OSPF network type
  should match for a neighbor adjacency to form. Usually, the hello and dead-interval 
  timers for OSPF on the interfaces are also determined by the OSPF network type.
  <p>
  Relatedly, the need for DR on a network segment is dictated by the OSPF network 
  type.
  The broadcast and non-broadcast OSPF network types require a Designated Router 
  (DR) while the point-to-point and point-to-multipoint network types do not require a DR.
  This requirement or non-requirement of a DR must match on the interfaces of the 
  two routers for them to form an adjacency.
  </p>
  <p>
  There may be instances where the OSPF neighborships may successfully form even 
  when the OSPF network types of the connecting neighbors are different but with 
  matching timers such as broadcast and point-to-point. It has been noticed that 
  the adjacency state transitions up to FULL with LSAs being stored in the LSDB. 
  However, these LSAs do not have the routing-bit set i.e. are not moved from 
  the LSDB to the routing table even though the routing table does not have a 
  similar route in its routing table. 
  </p>
  </li>
  <li><b>Matching Hello and Dead-interval timers:</b> Unlink EIGRP, with OSPF, the 
  Hello timer and dead-interval timer values must match. A Hello packet is 
  initially used for establishment of a neighbor relationship. After establishment 
  of the neighbor relationship, the Hello packet acts as a kind of keepalive to 
  maintain the adjacency. By default, it is 10 seconds or 40 seconds 
  depending on the OSPF network type. The 10 second value for 
  the hello interval is referred to as the fast timer and the 40 second value is the 
  slow timer. The dead-interval timer is used to determine when a neighbor can be 
  considered as being down and unreachable. By default, it is 40 seconds or 120 
  seconds depending on the OSPF network type. By default, the dead-interval 
  timer is 4 times the hello interval timer.</li>
  <li><b>Matching Authentication Type and Credentials:</b> OSPF supports three 
  types of authentication: null, simple password authentication and hash digests 
  where MD5 or SHA authentication is applied. The authentication type must match 
  as well as the password. If SHA authentication is configured, then the SHA 
  type must match in addition to the key ID and password.</li>
  <li><b>Same Area ID:</b> An OSPF area is a segregation of an OSPF domain. Each 
  area is identified by the area ID value. Area ID for the segment must match.</li>
  <li><b>Matching Area Type:</b> Area type flags must match i.e. whether normal, 
  stubby or Not-So-Stubby Area(NSSA).</li>
  <li><b>Version:</b> The OSPF versions OSPv2 and OSPFv3 are not compatible. As 
  a result, the OSPF versions in use in the network must be the same.</li>
</ol>



<h2 id="ADVERTISING_NETWORKS">Advertising Networks</h2>
<p>
For OSPF to advertise connected networks, it has to be enabled on the directly 
connected interfaces with configured networks. The area that the 
network will be resident in has to be added to the configuration. 
A network can only reside in one area. This can be done in two ways: using the 
OSPF <code><b>network</b></code> command or using the <code><b>ip ospf <i>
process-id</i></b></code> command.
</p>
<h3><code>network</code> command</h3>
<p>
The OSPF router mode command 
<code><b>network <i>network_address wild-card</i> area <i>area_id</i></b></code>
is used to specify networks to be advertised. When configured, any interfaces 
whose IP address is a subset of the network configured will have OSPF enabled 
and its network advertised. The area ID can be any value from 0 to 65,535.
</p>
<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
  R1#<b>enable</b> <br />
  R1#<b>configure terminal </b> <br />
  R1(config)#<b>router ospf 1 </b> <br />
  R1(config-router)#<b>network 10.10.0.0 0.0.255.255 area 0</b> <br />
  </code>
</div>
<p>
It is possible to add all interfaces using a single <code><b>network</b></code> 
command. The following snippet adds all interfaces with a configured IP address 
to area 0; any subsequent interfaces that will be configured with IP addresses will 
have OSPF enabled and their configured networks advertised.
</p>
<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
  R1(config)#<b>router ospf 1 </b> <br />
  R1(config-router)#<b>network 0.0.0.0 0.0.0.0 area 0</b> <br />
  </code>
</div>

<h3><code>ip ospf  <i>process-id</i> area <i>area-id</i></code> command</h3> 
<p>
OSPF is enabled directly on the interface whose network is to be advertised. 
OSPF interface statement advertises the networks of primary and secondary IP addresses. 
Advertisement of the secondary IP address can be disabled by addition of the 
<code><b> secondaries none</b> </code> keyword. If the interface IP address is 
subsequently changed, the new IP address will still be automatically advertised without any further configuration.

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
  R1#<b>enable</b> <br />
  R1#<b>configure terminal </b> <br />
  Enter configuration commands, one per line.  End with CNTL/Z. <br />
  R1(config)#<b> interface g1/0 </b> <br />
  R1(config-if)#<b> ip ospf 1 area 0 </b> <br />
  </code>
</div>
</p>

<h3>Loopback Interfaces</h3>
<p>
When advertising the network of a loopback interface, these are usually advertised 
into OSPF as a host route i.e., with a subnet mask of /32. To advertise the correct 
mask of a loopback interface, the OSPF network type should be changed to 
point-to-point.
</p>

<h3>Verification</h3>
<p>
To view the OSPF configuration including which networks are being advertised and
how they were added to OSPF, use the command <code><b>show ip protocols</b></code>:
</p>
<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
 R1#<b>show ip protocols</b> <br />
*** IP Routing is NSF aware *** <br />
 <br />
Routing Protocol is "ospf 1" <br />
&nbsp;&nbsp;  Outgoing update filter list for all interfaces is not set <br />
&nbsp;&nbsp;  Incoming update filter list for all interfaces is not set <br />
&nbsp;&nbsp;  Router ID 1.1.1.1 <br />
&nbsp;&nbsp;  It is an area border and autonomous system boundary router <br />
&nbsp; Redistributing External Routes from, <br />
&nbsp;&nbsp;  Number of areas in this router is 2. 1 normal 0 stub 1 nssa <br />
&nbsp;&nbsp;  Maximum path: 4 <br />
&nbsp;  Routing for Networks: <br />
&nbsp;&nbsp;    10.0.12.1 0.0.0.0 area 0 <br />
&nbsp;  Routing on Interfaces Configured Explicitly (Area 0): <br />
&nbsp;&nbsp;    FastEthernet3/0 <br />
&nbsp;  Routing on Interfaces Configured Explicitly (Area 10): <br />
&nbsp;&nbsp;    GigabitEthernet1/0 <br />
&nbsp;  Routing Information Sources: <br />
&nbsp;&nbsp;    Gateway         Distance      Last Update <br />
&nbsp;&nbsp;    6.6.6.6              110      00:32:45 <br />
&nbsp;&nbsp;    2.2.2.2              110      00:32:45 <br />
&nbsp;  Distance: (default is 110) <br />

R1#
  </code>
</div>



<h2 id="OSPF_PACKETS">OSPF Packet Types</h2>

<p>
OSPF uses five types of packets: 
<ol>
  <li><a href="#HELLO">Hello packet</a></li> 
  <li><a href="#DBD">Database Description (DBD)</a></li>
  <li><a href="#LSR">Link State Request (LSR)</a></li>
  <li><a href="#LSU">Link State Update (LSU)</a></li>
  <li><a href="#LSAck">Link State Acknowledgement (LSAck)</a></li>
</ol>

The hello packet is used to communicate adjacency parameters during neighborship 
formation and to maintain the neighborship. The other packet types are used to exchange 
link state database information. Together, these packets ensure that the 
information in the neigbor table and the LSDB is accurate and regularly updated.
</p>
<p>
OSPF routers exchange prefix information using unicast, multicast packets or both
depending on the OSPF network type. If multicast packets are used, the OSPF 
multicast destination addresses used are:

<ul>
 <li><b>AllSPFRouters</b> <code><b>224.0.0.5</b></code> with MAC address 
 <code><b>01:00:5E:00:00:05</b></code>: 
 All OSPF-enabled routers process packets arriving at this multicast address.</li>
 <li><b>AllDRouters</b> <code><b>224.0.0.6</b></code> with MAC address 
 <code><b>01:00:5E:00:00:06</b></code>. 
 Only the DR and BDR process packets arriving at this multicast address.</li>
</ul>
</p>
<p>
In networks where multicast packets are permitted, it is possible to determine 
if OSPF has been enabled on an interface by viewing the multicast groups that have 
been joined by the interface.
</p>

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code> 
R2#<b>show ip interface</b>                                       <br>
FastEthernet0/0 is up, line protocol is up                 <br>
&nbsp;&nbsp;Internet address is 10.255.254.13/30                       <br>
&nbsp;&nbsp;Broadcast address is 255.255.255.255                       <br>
&nbsp;&nbsp;Address determined by non-volatile memory                  <br>
&nbsp;&nbsp;MTU is 1500 bytes                                          <br>
&nbsp;&nbsp;Helper address is not set                                  <br>
&nbsp;&nbsp;Directed broadcast forwarding is disabled                  <br>
&nbsp;&nbsp;<span style="background-color: gray;">Multicast reserved groups joined: 224.0.0.5 </span>               <br>
&nbsp;&nbsp;Outgoing access list is not set                            <br>
&nbsp;&nbsp;Inbound  access list is not set                            <br>
&nbsp;&nbsp;...                                                        <br>
GigabitEthernet4/0 is up, line protocol is up              <br>
&nbsp;&nbsp;Internet address is 10.255.1.34/29                         <br>
&nbsp;&nbsp;Broadcast address is 255.255.255.255                       <br>
&nbsp;&nbsp;Address determined by non-volatile memory                  <br>
&nbsp;&nbsp;MTU is 1500 bytes                                          <br>
&nbsp;&nbsp;Helper address is not set                                  <br>
&nbsp;&nbsp;Directed broadcast forwarding is disabled                  <br>
&nbsp;&nbsp;<span style="background-color: gray;">Multicast reserved groups joined: 224.0.0.5 224.0.0.6</span>      <br>
&nbsp;&nbsp;Outgoing access list is not set <br />
...
  </code></div>
<p>
From the above output, the OSPF device has the role of DROther on network segment 
connected through interface FastEthernet0/0, and DR or BDR on the segment connected 
through interface GigabitEthernet4/0.
</p>
  
<h3>OSPF Header</h3>

<p>
 All OSPF packet types have an OSPF header. This header contains information 
 that is common to all OSPF packet types and is communicated between devices. 
The following output shows a <a href="https://wireshark.org" target="_blank">Wireshark</a>
 capture of an OSPF Hello packet displaying only the OSPF header of the packet.
</p>
<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code> 
    OSPF Header                                  <br>
    &nbsp;&nbsp;&nbsp;&nbsp;Version: 2                               <br>
    &nbsp;&nbsp;&nbsp;&nbsp;Message Type: Hello Packet (1)           <br>
    &nbsp;&nbsp;&nbsp;&nbsp;Packet Length: 48                        <br>
    &nbsp;&nbsp;&nbsp;&nbsp;Source OSPF Router: 7.7.7.7              <br>
    &nbsp;&nbsp;&nbsp;&nbsp;Area ID: 0.0.0.7                         <br>
    &nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xdb87 [correct]               <br>
    &nbsp;&nbsp;&nbsp;&nbsp;Auth Type: Null (0)                      <br>
    &nbsp;&nbsp;&nbsp;&nbsp;Auth Data (none): 0000000000000000       <br>
   </code></div>

<p>
The header contains the following fields:
 <ul>
 <li><b>Version:</b> values in this field are 2 (two) for OSPv2 
 or 3 for OSPFv3. From the packet capture, the OSPF version is 2.</li>
 <li><b>Message Type:</b> type of OSPF packet. The following are the possible  
 values for the message type field:
 <ol>
     <li> Hello packet.</li>
     <li> Database description (DBD)</li>
     <li> Link State Request (LSR)</li>
     <li> Link State Update (LSU)</li>
     <li> Link State Acknowledgement (LSAck)</li>
 </ol>
 From the capture, the OSPF packet type is a hello packet (type 1).
 <li><b>Packet Length:</b> length of the packet. From the packet capture, the 
 packet length is 48 bytes.</li>
 <li><b>Source OSPF Router:</b> this field displays the router identifier (RID) 
 of the router that sent the hello packet. In the above packet capture, the 
 OSPF device that sent the hello packet has a RID of 7.7.7.7</li>
 <li><b>Area ID:</b> areas are used to define a hierarchy and control the size 
 of the flooding domain. From the capture output, the interface of the router is 
 in area 7. The area ID was configured using the dotted decimal notation.</li>
 <li><b>Checksum:</b> used to verify the integrity of the packet.</li>
 <li><b>Authentication type:</b> contains the type of authentication used in 
 the OSPF area or interface. Configured values are usually: null, simple and MD5
 or SHA. From capture output, the authentication type is type 0 which is null 
 authentication i.e., no authentication at all.</li>
 <li><b>Authentication data:</b> the password used for authentication. If MD5 or 
 SHA authentication is used, then a digest of the password is contained in this 
 field. From the packet capture, null type authentication is configured resulting 
 in no password being configured.</li>
 </ul>
</p>

<p>
Of the values in the OSPF packet header, the OSPF version, area ID, authentication 
type, and authentication data must match to partially satisfy the adjacency 
preconditions.
</p>

 <h3 id="HELLO">Hello Packet</h3> 
 
 <p>
 The hello packet (OSPF packet type 1) is sent out an OSPF device's enabled interfaces 
 to announce the router's presence on a link/segment and its neighborship adjacency 
 prerequisite conditions. The Hello packet is used for establishment and 
 maintenance of neighborships. 
 
 The following output shows a Wireshark packet capture of a Hello packet: 
  </p> 
  
  <div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code> 
&raquo;   Frame 5517: 102 bytes on wire (816 bits), 102 bytes captured (816 bits) on interface -, id 0  <br>
&raquo; Ethernet II, Src: ca:04:06:1f:00:54 (ca:04:06:1f:00:54), Dst: IPv4mcast_05 (01:00:5e:00:00:05)  <br>
&raquo; Internet Protocol Version 4, Src: 10.255.1.27, Dst: 224.0.0.5 <br>
&#8900; Open Shortest Path First                                                                  <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#8900; OSPF Header                                                                               <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version: 2                                                                            <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Message Type: Hello Packet (1)                                                        <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Packet Length: 56                                                                     <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source OSPF Router: 4.4.4.4                                                           <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area ID: 0.0.0.0 (Backbone)                                                           <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xb74b [correct]                                                            <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Type: Null (0)                                                                   <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Data (none): 0000000000000000                                                    <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#8900; OSPF Hello Packet                                                                         <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Network Mask: 255.255.255.248                                                         <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello Interval [sec]: 10                                                              <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x12, (L) LLS Data block, (E) External Routing                               <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                           <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                            <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..0. .... = (DC) Demand Circuits: Not supported                                   <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...1 .... = (L) LLS Data block: Present                                           <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                               <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                           <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                         <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                       <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Router Priority: 1                                                                    <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Router Dead Interval [sec]: 40                                                        <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Designated Router: 10.255.1.28                                                        <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Backup Designated Router: 10.255.1.25                                                 <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Active Neighbor: 2.2.2.2                                                              <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Active Neighbor: 3.3.3.3                                                              <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Active Neighbor: 5.5.5.5                                                              <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#8900; OSPF LLS Data Block                                                                       <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xfff6                                                                      <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LLS Data Length: 12 bytes                                                             <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#8900; Extended options TLV                                                                  <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TLV Type: 1                                                                       <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TLV Length: 4                                                                     <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x00000001, (LR) LSDB Resynchronization                                  <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .... .... .... .... .... .... ..0. = (RS) Restart Signal: Not set        <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.. .... .... .... .... .... .... ...1 = (LR) LSDB Resynchronization: Set    <br>
</code></div>
  
  <p>
  The hello packet body contains the following fields:
  <ul>
  <li><b>Network mask:</b> contains the subnet mask that is configured on the 
  interface. OSPF uses the network mask value to determine if the potential 
  neighbor is on the same subnet. From the above packet capture, a mask of 255.255.255.248.
  Based on the IP header, the IP address of the sender is 10.255.1.27. OSPF can 
  then deduce that the sender's IP address and network mask is 10.255.1.27/29.
  </li>
  <li><b>Hello Interval:</b> indicates the amount of time between 
  the hello packets. In this example, it is ten (10) seconds.</li>
  <li><b>Options:</b> communicates the different options that are supported by 
  a device. It contains information that is used to determine whether a potential 
  neighborship could be formed. The list of options include the following:
  
    <ul>
      <li><b> DN:</b> </li>
      <li><b> O:</b> </li>
      <li><b> Demand Circuit (DC):</b> this bit is set if the hello packet is transiting 
      a demand circuit such as a virtual link. </li>
      <li><b> LLS Data block (L):</b> support for non-stop forwarding (NSF) and 
      presence of NSF body containing features enabled.</li>
      <li><b> NSSA (N) bit:</b> If the N-bit is set to 1, then the router is in 
      a not-so-stubby area(NSSA).</li>
      <li><b> Multicast bit (MC):</b> </li>
      <li><b> External Routing bit (E):</b> If set to 1, then the router interface 
      is a normal area. If the E-bit is set to 0, then the router is in a stub 
      area.</li>
      <li><b> Multi-Topology Routing bit (MT):</b> </li>
      <li><b>V bit:</b> An optional bit that is included if the router is terminating 
      a virtual link.</li>
    </ul>
  </li>
  <li><b>Priority:</b> Used in the election of a DR/BDR roles in multi-access networks.
  The higher the priority, the more likely that the device is elected as 
  DR in that segment. The device with the second highest priority becomes the BDR.
  The priority value is in the range 0 - 255.
  </li>
  <li><b>Dead Interval:</b> used together with the hello interval to determine 
  when a device can be considered down and how much time is required before a device 
  is considered down. The dead interval resets each time a hello packet is received 
  from a neighbor. If no hello packets are received, by the time the dead Interval 
  expires, then the neighborship is dropped, the SPF tree is recalculated and 
  flooding takes place.</li>
  <li><b>Designated Router and Backup Designated Router:</b> for OSPF broadcast
  network types, these fields contain the values of the elected designated router 
  and backup designated routers respectively.</li>
  <li><b>Active Neighbor:</b> contains the list of devices that have successfully 
  formed a neighborship with the local device i.e. a bi-directional relationship 
  was established.</li>
  </ul>
  </p>
  
  
  <h3 id="DBD">Database Descriptor Packet (DBD/DDP)</h3> 
  
  <p>
  OSPF uses the DBD to communicate a summary of the link state information 
  in the LSDB. This is not the detailed link state information itself but a 
  summary of the known information.
  If the DBD packet from a neighbor contains information that the device does 
  not have, the local device requests for additional information using a 
  link state request packet.
  </p>
  
  <p>
  The following is a packet capture between routers R1 and R7:
  </p>
  
  <div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
&raquo;  Frame 92: 558 bytes on wire (4464 bits), 558 bytes captured (4464 bits) on interface -, id 0             <br/>
&raquo;  Ethernet II, Src: ca:01:05:e7:00:1c (ca:01:05:e7:00:1c), Dst: ca:07:06:4e:00:1c (ca:07:06:4e:00:1c)        <br/>
&raquo;  Internet Protocol Version 4, Src: 10.255.254.1, Dst: 10.255.254.2                                          <br/>
&#8900;  Open Shortest Path First                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; OSPF Header                                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version: 2                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Message Type: DB Description (2)                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Packet Length: 512                                                                                 <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source OSPF Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area ID: 0.0.0.7                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xd73e [correct]                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Type: Null (0)                                                                                <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Data (none): 0000000000000000                                                                 <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; OSPF DB Description                                                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Interface MTU: 1500                                                                                <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x52, O, (L) LLS Data block, (E) External Routing                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.1.. .... = O: Set                                                                             <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..0. .... = (DC) Demand Circuits: Not supported                                                <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...1 .... = (L) LLS Data block: Present                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DB Description: 0x02, (M) More                                                                     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (R) OOBResync: Not set                                                             <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (I) Init: Not set                                                                  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (M) More: Set                                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MS) Master: No                                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DD Sequence: 2574                                                                                  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; LSA-type 1 (Router-LSA), len 36                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0100 0011 = LS Age (seconds): 67                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Router-LSA (1)                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 1.1.1.1                                                                             <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xc45e                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 36                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.1.1.1                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xe543                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.1.2.1                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xda4d                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.1.3.1                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xcf57                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.1.4.1                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xc461                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0001 0010 = LS Age (seconds): 18                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.2.1.1                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xe343                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0001 0010 = LS Age (seconds): 18                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.2.2.1                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xd84d                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0001 0010 = LS Age (seconds): 18                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.2.3.1                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xcd57                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0001 0010 = LS Age (seconds): 18                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.2.3.129                                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xc8db                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.3.1.1                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xcd59                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.3.2.1                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xc263                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.3.3.1                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xb76d                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.3.4.1                                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xac77                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.1.0                                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xd55a                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.1.4                                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xad7e                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.1.8                                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0x8f97                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 0100 = LS Age (seconds): 52                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.1.16                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000002                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0x3de0                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.1.24                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xd644                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 0100 = LS Age (seconds): 52                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.1.28                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000002                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xc44d                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.1.32                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0x7c97                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0001 0010 = LS Age (seconds): 18                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.2.8                                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0x988b                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.3.0                                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xc963                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.254.8                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xa583                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1010 = LS Age (seconds): 58                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                            <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.254.12                                                                       <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0x73b2                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                         <br/>
&nbsp;&nbsp;&nbsp;&nbsp;OSPF LLS Data Block                                                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xfff6                                                                                   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LLS Data Length: 12 bytes                                                                          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extended options TLV                                                                               <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TLV Type: 1                                                                                    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TLV Length: 4                                                                                  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x00000001, (LR) LSDB Resynchronization                                               <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .... .... .... .... .... .... ..0. = (RS) Restart Signal: Not set                     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .... .... .... .... .... .... ...1 = (LR) LSDB Resynchronization: Set                 <br/>
</code></div>  

  <p>
  The DBD packet contains the following fields:
  
  <ul>
    <li><b>Interface MTU:</b> indicates the largest-sized IP datagram that is 
    allowed on a link. It is one of the fields that must match between potential 
    neighbors.</li>
    <li><b>Options:</b> Relays the same information as in the hello packet options
    field specifically, device capability information.</li>
    <li><b>DB Description: I,M, and MS bits:</b> Used to communicate the flow of information 
    between neighbors: 
    <ul type="i">
      <li><b>I (Init bit):</b> indicates that this is the first bit in a series.</li>
      <li><b>M (More):</b> indicates that additional DBD packets will be sent 
      subsequently.</li>
      <li><b>MS (Master - Slave):</b> indicates which of the devices becomes the 
      master of the neighbors and controls the exchange of database information.
      When the MS bit is set to 1, a device becomes the master.</li>
      </ul>
      <li><b>Sequence:</b> Used by devices to ensure the correct ordering of 
      information between them. The determined master controls the sequence that 
      will be used. </li>
      <li>List of summaries of LSAs contained in the device's LSDB.
  </ul>
  </p>
  
  <h3 id="LSR">Link State Request (LSR) Packet</h3> 
  
  <p>
  The LSR packet is used to request for additional information on specific 
  networks from neighbors. When an OSPF device receives a DBD packet from a 
  neighbor and it does not have some or all of the prefixes advertised in the DBD 
  in its LSDB, it sends an LSR requesting for complete information on only the 
  prefixes that are missing in its LSDB.
  </p>
   
  <div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
&raquo;  Frame 97: 346 bytes on wire (2768 bits), 346 bytes captured (2768 bits) on interface -, id 0         <br>
&raquo; Ethernet II, Src: ca:07:06:4e:00:1c (ca:07:06:4e:00:1c), Dst: ca:01:05:e7:00:1c (ca:01:05:e7:00:1c)    <br>
&raquo; Internet Protocol Version 4, Src: 10.255.254.2, Dst: 10.255.254.1                                      <br>
&#8900; Open Shortest Path First                                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; OSPF Header                                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version: 2                                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Message Type: LS Request (3)                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Packet Length: 312                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source OSPF Router: 7.7.7.7                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area ID: 0.0.0.7                                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xa50f [correct]                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Type: Null (0)                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Data (none): 0000000000000000                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Router-LSA (1)                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 1.1.1.1                                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.1.1.1                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.1.2.1                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.1.3.1                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.1.4.1                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.2.1.1                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.2.2.1                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.2.3.1                                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; Link State Request                                                                                 
</code></div>
  
  <p>
  The LSR packet contains the following fields:
   <ul>
     <li><b>Link State Type:</b> The type of LSA being requested from a neighbor.</li>
     <li><b>Link State ID:</b> The LSA ID of the LSA being requested.</li>
     <li><b>Advertising Router:</b> RID of the OSPF device that originated the 
     requested LSA.</li>
   </ul>
  </p>
  
  
  <h3 id="LSU">Link State Update (LSU) Packet</h3> 
  <p>
  The link state update packet (OSPF packet type 4) contains details on 
  one or more networks and is usually sent in response to an LSR. This packet 
  type is the envelop into which OSPF's link state Advertisements(LSAs) are enclosed.
  An LSU can contain one or many LSAs.
  </p>
  
  <p>
  The following output shows a Wireshark packet capture of an LSU packet. Some 
  of details of two LSAs contained in the LSU have been displayed:
  </p>
  
  <div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
&raquo;  Frame 98: 742 bytes on wire (5936 bits), 742 bytes captured (5936 bits) on interface -, id 0           <br>
&raquo; Ethernet II, Src: ca:01:05:e7:00:1c (ca:01:05:e7:00:1c), Dst: ca:07:06:4e:00:1c (ca:07:06:4e:00:1c)      <br>
&raquo; Internet Protocol Version 4, Src: 10.255.254.1, Dst: 10.255.254.2                                        <br>
&#8900; Open Shortest Path First                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;OSPF Header                                                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version: 2                                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Message Type: LS Update (4)                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Packet Length: 708                                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source OSPF Router: 1.1.1.1                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area ID: 0.0.0.7                                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0x2b22 [correct]                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Type: Null (0)                                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Data (none): 0000000000000000                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&#8900; LS Update Packet                                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of LSAs: 24                                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#8900; LSA-type 1 (Router-LSA), len 36                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0100 0101 = LS Age (seconds): 69                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Router-LSA (1)                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 1.1.1.1                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xc45e                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 36                                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags: 0x01, (B) Area border router                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = (H) flag: No                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (N) flag: No                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (W) Wild-card multicast receiver: No                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (V) Virtual link endpoint: No                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..0. = (E) AS boundary router: No                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...1 = (B) Area border router: Yes                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of Links: 1                                                                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#8900; Type: Stub     ID: 10.255.254.0    Data: 255.255.255.252 Metric: 1                           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link ID: 10.255.254.0 - IP network/subnet number                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link Data: 255.255.255.252                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link Type: 3 - Connection to a stub network                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of Metrics: 0 - TOS                                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 Metric: 1                                                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#8900; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1011 = LS Age (seconds): 59                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#8900; Options: 0x22, (DC) Demand Circuits, (E) External Routing                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                              <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                        <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.1.1.1                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xe543                                                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Netmask: 255.255.255.255                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS: 0                                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 3                                                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28


  </code></div>
  
  <p>
  LSU is a unicast packet and is sent in response to an LSR. It contains two fields:
  <ul>
    <li><b>Number of LSA's:</b> Lists the number of LSAs that are included with 
    the update.</li>
    <li><b>LSA's:</b> contains all the LSA information. This field can be repeated.</li>
  </ul>
  </p>
  
   <p>
OSPF packets containing prefix information are referred to as 
<b>link state advertisements (LSAs)</b>. 
LSAs contain prefixes and their associated metric and are sent to neighboring routers. 
LSAs are stored, unaltered, in a local link state database in the form in which 
the originating router sent them. 
All routers in the same area have identical LSDBs for that area. The 
Shortest Path Tree (SPT) differs for each router as each sees itself at the root of the SPT.
</p>
  
  <h3 id="LSAck">Link State Acknowledgement(LSAck) Packet</h3> 
  <p>
  The link state acknowledgement packet (OSPF packet type 5) is sent in response 
  to an LSR and LSU. It contains the sequence number of the LSU/LSR that it is 
  acknowledging.
It is used to acknowledge receipt of LSR and LSU packets.
Its format is similar to the DBD packet. 
  </p>
  
  <div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
&raquo; Frame 104: 558 bytes on wire (4464 bits), 558 bytes captured (4464 bits) on interface -, id 0     <br>
&raquo; Ethernet II, Src: ca:07:06:4e:00:1c (ca:07:06:4e:00:1c), Dst: IPv4mcast_05 (01:00:5e:00:00:05)      <br>
&raquo; Internet Protocol Version 4, Src: 10.255.254.2, Dst: 224.0.0.5                                      <br>
&#8900; Open Shortest Path First                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;OSPF Header                                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version: 2                                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Message Type: LS Acknowledge (5)                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Packet Length: 524                                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source OSPF Router: 7.7.7.7                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area ID: 0.0.0.7                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0x2518 [correct]                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Type: Null (0)                                                                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Data (none): 0000000000000000                                                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 1 (Router-LSA), len 36                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0100 0101 = LS Age (seconds): 69                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Router-LSA (1)                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 1.1.1.1                                                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xc45e                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 36                                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0011 1011 = LS Age (seconds): 59                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                               <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.1.1.1                                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000001                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xe543                                                                            <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                                  <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 3 (Summary-LSA (IP network)), len 28                                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&raquo; LSA-type 1 (Router-LSA), len 36
</code></div>


<h2 id="ADJACENCY_STATES">OSPF Adjacency States</h2>

<p>
OSPF neighbor adjacencies transition through up to eight to nine states (depending on 
the network type). In some OSPF network types, the number of stages may be less:
DOWN, ATTEMPT, WAIT, INIT, 2WAY, EXSTART, EXCHANGE, LOADING, FULL.
<ol>
  <li><b>DOWN:</b> Initial state of any neighborship. It indicates that no 
  OSPF packets have been sent to or received from any neighbor. 
  Additionally, the OSPF-enabled interface of the local router may be shutdown. </li>
  <li><b>ATTEMPT:</b> A unicast hello packet has been sent to a neighbor but no hello 
  packet has been received back. This state applies to an OSPF neighborship that 
  is manually configured using the OSPF process command <code><b>neighbor 10.2.3.4</b> </code> 
  in NBMA environments.</li>
  <li>

<b>WAIT:</b> This state exists before the INIT state and it prevents the unnecessary
election of a DR and BDR on broadcast and non-broadcast networks. Routers spend
the duration of the dead-interval in this state.

  </li>
  <li><b>INIT:</b> A hello packet has been received from the neighbor but no 
  bi-directional relationship has been established.
  The neighbor has not yet acknowledged the local router as a neighbor by including its RID in 
  its hello packet header's 'Active Neighbor' field.</li>
  <li><b>2-WAY:</b> Hello received from neighbor and neighbor has acknowledged 
  the local router as a neighbor by including the local router RID in its 
  'Active Neighbor' field of the hello packet header.
  <ul>
    <li>In <b>broadcast and non-broadcast</b> networks, DROther routers complete 
    their adjacency formation with each other at the 2-Way stage.</li> 
    <li><b>Election of the DR/BDR roles is also started</b>:
    <ol>
      <li>The router with the highest priority becomes master during DR election.</li>
      <li>If there is a tie, then the router with the highest RID becomes the DR.
      </li>
      </ol>
    </li>
    <li><b>Need for adjacency determined:</b> the need for an adjacency is determined 
    and whether the formation of an adjacency is also possible.</li>
    <li>At this point, no link state information has been exchanged yet.
  </ul>
  <li><b>EXSTART:</b> This state is reached by devices that have determined that 
  they need to reach the FULL state of adjacency such as the devices on point-
  to-point links and on broadcast links the DR and BDR. 
  <ul>
    <li>Devices begin the process to exchange complete link state information.</li>
	<li>The master/slave relationship is developed with the master being the router with 
	  the higher RID. The interface priority is not used in the determination of 
	  the master/slave relationship.</li>
	<li>The master controls aspects of the adjacency formation by choosing the 
	starting sequence number for the database descriptor packets (DDP or DBD) 
	that are used for actual exchange.</li>
	<li>The master is the only device that is permitted to retransmit database 
	descriptor packets.</li> 
	<li>The slave only sends acknowledgements for the DBD packets received from 
	the master. These packets contain the matching link state sequence number 
	of the packets from the master.</li>
	<li>The master/slave role applies only to the local network segment between
	the neighbors and does not influence the DR/BDR/DROther roles.</li>
	<li>Unicast hello packets are exchanged with devices in the 'Active Neighbor' field.</li>
	</ul>
</li>
  <li><b>EXCHANGE:</b> DDP or DBD packets are sent in unicast. A summary of the 
  LSDB is exchanged through DBD packets. DBD sequence number is used for reliable 
  acknowledgment / re-transmission.
  <ul>
    <li>Link state information is compared between devices.</li>
    <li>Database descriptor packets are used to exchange link state summary information.</li>
    <li>If no new information is required from the neighbor, the state transitions 
    to the FULL state.</li>
    <li>If new information will be added to the request list, then this list is 
    sent to the neighbor and the device transitions to LOADING.</li>
  </ul>
  </li>
  <li><b>LOADING:</b> In this stage:
  <ul>
    <li>LSRs are sent requesting for additional information about particular 
  LSAs that the local router does not have.</li>
  <li>Unicast LSUs are sent in reply to the LSRs packets.</li>
  <li>LSAcks are sent in acknowledgement for received LSUs.</li>
  </ul>
   </li>
  <li><b>FULL:</b> LSDBs of the routers in the same area are fully synchronized. 
  <ul>
    <li>Hello packets are exchanged until a network change occurs.</li>
    <li>The SPF algorithm is run against the LSDB to generate the SPT.</li>
    <li>In OSPF network types requiring the presence of DR and BDR:
    <ul>
      <li>All DROthers reach the FULL state only with the DR and BDR.</li>
      <li>DROthers remain at the 2WAY state with each other.</li>
      <li>DR and BDR reach FULL state with each other.</li>
    </ul>
  </ul>
  </li>
</ol>
<p>
To view the OSPF adjacency stages in real-time, run the privileged-exec command
<code><b>debug ospf adj</b></code>:

</p>

 <div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
  R1#<b>debug ip ospf adj</b><br />
OSPF adjacency debugging is on<br />
R1#<br />
   *Aug 11 20:39:07.311: OSPF-1 ADJ   Gi0/0: Send with youngest Key 0<br />
*Aug 11 20:39:07.375: OSPF-1 ADJ   Gi0/0: 2 Way Communication to 2.2.2.2, state <span style="background-color:#DCDCDC">2WAY</span><br />
*Aug 11 20:39:07.375: OSPF-1 ADJ   Gi0/0: Neighbor change event<br />
*Aug 11 20:39:07.375: OSPF-1 ADJ   Gi0/0: <span style="background-color:#DCDCDC">DR/BDR election</span><br />
*Aug 11 20:39:07.379: OSPF-1 ADJ   Gi0/0: Elect BDR 2.2.2.2<br />
*Aug 11 20:39:07.379: OSPF-1 ADJ   Gi0/0: Elect DR 1.1.1.1<br />
*Aug 11 20:39:07.379: OSPF-1 ADJ   Gi0/0: DR: 1.1.1.1 (Id)   BDR: 2.2.2.2 (Id)<br />
*Aug 11 20:39:07.383: OSPF-1 ADJ   Gi0/0: Nbr 2.2.2.2: Prepare dbase exchange<br />
*Aug 11 20:39:07.387: OSPF-1 ADJ   Gi0/0: Send DBD to 2.2.2.2 seq 0x24C9 opt 0x52 flag 0x7 len 32<br />
*Aug 11 20:39:07.387: OSPF-1 ADJ   Gi0/0: Send with youngest Key 0<br />
*Aug 11 20:39:07.391: OSPF-1 ADJ   Gi0/0: Neighbor change event<br />
*Aug 11 20:39:07.391: OSPF-1 ADJ   Gi0/0: DR/BDR election<br />
*Aug 11 20:39:07.391: OSPF-1 ADJ   Gi0/0: <span style="background-color:#DCDCDC">Elect BDR 2.2.2.2</span><br />
*Aug 11 20:39:07.395: OSPF-1 ADJ   Gi0/0: <span style="background-color:#DCDCDC">Elect DR 1.1.1.1</span><br />
*Aug 11 20:39:07.395: OSPF-<br />
R1#1 ADJ   Gi0/0: DR: 1.1.1.1 (Id)   BDR: 2.2.2.2 (Id)<br />
*Aug 11 20:39:07.399: OSPF-1 ADJ   Gi0/0: Neighbor change event<br />
*Aug 11 20:39:07.399: OSPF-1 ADJ   Gi0/0: DR/BDR election<br />
*Aug 11 20:39:07.403: OSPF-1 ADJ   Gi0/0: Elect BDR 2.2.2.2<br />
*Aug 11 20:39:07.403: OSPF-1 ADJ   Gi0/0: Elect DR 1.1.1.1<br />
*Aug 11 20:39:07.403: OSPF-1 ADJ   Gi0/0: DR: 1.1.1.1 (Id)   BDR: 2.2.2.2 (Id)<br />
*Aug 11 20:39:07.411: OSPF-1 ADJ   Gi0/0: Rcv DBD from 2.2.2.2 seq 0x22D5 opt 0x52 flag 0x7 len 32  mtu 1500 state <span style="background-color:#DCDCDC">EXSTART</span><br />
*Aug 11 20:39:07.411: OSPF-1 ADJ   Gi0/0: NBR Negotiation Done. We are the SLAVE<br />
*Aug 11 20:39:07.415: OSPF-1 ADJ   Gi0/0: Nbr 2.2.2.2: Summary list built, size 2<br />
*Aug 11 20:39:07.415: OSPF-1 ADJ   Gi0/0: Send DBD to 2.2.2.2 seq 0x22D5 opt 0x52 flag 0x2 len 72<br />
*Aug 11 20:39:07.419: OSPF-1 ADJ   Gi0/0: Send with youngest Key 0<br />
*Aug 11 20:39:07.531: OSPF-1 ADJ   Gi0/0: Rcv DBD from 2.2.2.2 seq 0x22D6 opt 0x52 flag 0x1 len 52  mtu 1500 state <span style="background-color:#DCDCDC">EXCHANGE</span><br />
*Aug 11 20:39:07.531: OSPF-1 ADJ   Gi0/0: Exchange Done with 2.2.2.2<br />
*Aug 11 20:39:07.535: OSPF-1 ADJ   Gi0/0: Send with youngest Key 0<br />
*Aug 11 20:39:07.535: OSPF-1 ADJ   Gi0/0: Send LS REQ to 2.2.2.2 length 36 LS<br />
R1#A count 1<br />
*Aug 11 20:39:07.539: OSPF-1 ADJ   Gi0/0: Send DBD to 2.2.2.2 seq 0x22D6 opt 0x52 flag 0x0 len 32<br />
*Aug 11 20:39:07.539: OSPF-1 ADJ   Gi0/0: Send with youngest Key 0<br />
*Aug 11 20:39:07.643: OSPF-1 ADJ   Gi0/0: Rcv LS UPD from 2.2.2.2 length 88 LSA count 1<br />
*Aug 11 20:39:07.647: OSPF-1 ADJ   Gi0/0: Synchronized with 2.2.2.2, state <span style="background-color:#DCDCDC">FULL</span><br />
*Aug 11 20:39:07.647: %OSPF-5-ADJCHG: Process 1, Nbr 2.2.2.2 on GigabitEthernet0/0 from LOADING to FULL, Loading Done<br />
*Aug 11 20:39:07.651: OSPF-1 ADJ   Gi0/0: Rcv LS REQ from 2.2.2.2 length 48 LSA count 2<br />
</code> </div>

<p>
It is important to note that once the routers in an area have converged i.e., 
they have the same LSDB, by default, the LSDB is flooded by OSPF every 30 minutes.
This process can the modified or disabled completely if so desired.
</p>

<h2 id="OSPF_NEIGHBOR_TABLE">Neighbor Table</h2> 
<p>
A router running OSPF builds and maintains two data structures or databases from 
which it develops an accurate picture of the network: neighbor table and 
link state database (LSDB).
</p>
<p>
The OSPF neighbor table contains directly connected neighbors that share network information.</b>
To view the neighbor table, issue the commands in the following sections. 
Below are the interface IP addresses of the local OSPF device:
</p>
<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
R1#<b>show ip interface brief | exclude unassigned</b><br/>
Interface&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IP-Address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OK? Method Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Protocol  <br/>
GigabitEthernet0/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;YES manual up&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;up        <br/>
GigabitEthernet1/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.254.1&nbsp;&nbsp;&nbsp;&nbsp;YES NVRAM&nbsp;&nbsp;up&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;up        <br/>
GigabitEthernet2/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;YES NVRAM&nbsp;&nbsp;up&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;up        <br/>
FastEthernet3/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.33&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;YES NVRAM&nbsp;&nbsp;up&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;up        <br/>
GigabitEthernet4/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.254.13&nbsp;&nbsp;&nbsp;YES NVRAM&nbsp;&nbsp;up&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;up
</code></div>

<h3><code>show ip ospf neighbor</code></h3>
<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
R1#<b>show ip ospf neighbor </b><br>
                                                                                        <br>
Neighbor ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pri&nbsp;&nbsp;&nbsp;State&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dead Time&nbsp;&nbsp;&nbsp;Address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Interface             <br>
9.9.9.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/BDR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:32&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GigabitEthernet0/0    <br>
2.2.2.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/DROTHER&nbsp;&nbsp;&nbsp;&nbsp;00:00:32&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.34&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FastEthernet3/0       <br>
3.3.3.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/DROTHER&nbsp;&nbsp;&nbsp;&nbsp;00:00:33&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FastEthernet3/0       <br>
9.9.9.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/BDR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:39&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FastEthernet3/0       <br>
2.2.2.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/BDR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:39&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GigabitEthernet2/0    <br>
7.7.7.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/BDR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:31&nbsp;&nbsp;&nbsp;&nbsp;10.255.254.2&nbsp;&nbsp;&nbsp;&nbsp;GigabitEthernet1/0    <br>
10.10.10.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/BDR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:33&nbsp;&nbsp;&nbsp;&nbsp;10.255.254.14&nbsp;&nbsp;&nbsp;GigabitEthernet4/0
  
  </code>
</div>
<p>
From the output, the following can be learned:
<ul>
  <li><b>Neighbor ID:</b> The RID of the neighbor. From the command output, it 
  can be noted that the local OSPF router has formed a neighborship with neighbors 
  with RID 9.9.9.9 and 2.2.2.2 over two interfaces.</li>
  <li><b>Pri:</b> the priority of the interface of the neighbor through which 
  this neighbor relationship was formed. The priority of the neighbors the default 
  value of 1 (one).</li>
  <li><b>State:</b> Adjacency state and DR/BDR/DROTHER role of the neighbor on 
  the link. On links that do not require formation of DR/BDR, such as point-to-poin 
  links, this field is blank. From the above output, it can be determined that 
  OSPF device R1 is a DR to all its neighbors on all interfaces.</li>
  <li><b>Dead time:</b> Count-down timer to zero (0). This value gets reset 
  to the value of the dead-interval timer when a hello packet is received. On 
  an Ethernet link with default dead-interval and hello timer values, the dead 
  time value will range from 31 - 39.</li>
  <li><b>Address:</b> IP address of the interface of the neighbor through which 
  this neighborship was formed.</li>
  <li><b>Interface:</b> the interface of the local device through which the adjacency 
  with the neighbor was formed.</li>
</ul>
</p>

<h3><code>show ip ospf neighbor <i>RID</i></code></h3>
<p>
The command <code><b>show ip ospf neighbor <i>RID</i></b></code> can be used to 
view details of the neighborship that a router has with its neighbor.
</p>

<div style="background-color:#f4f0ec; border-style:dotted;border-width:2px;border-color:#DCDCDC">
  <code>
  R1#<b>show ip ospf neighbor 2.2.2.2</b>                                <br/>          
 Neighbor 2.2.2.2, interface address 10.255.1.34                         <br/> 
 &nbsp;&nbsp;&nbsp;In the area 0.0.0.0 via interface FastEthernet3/0                    <br/> 
 &nbsp;&nbsp;&nbsp;Neighbor priority is 1, State is FULL, 6 state changes               <br/> 
 &nbsp;&nbsp;&nbsp;DR is 10.255.1.33 BDR is 10.255.1.36                                 <br/> 
 &nbsp;&nbsp;&nbsp;Options is 0x12 in Hello (E-bit, L-bit)                              <br/> 
 &nbsp;&nbsp;&nbsp;Options is 0x52 in DBD (E-bit, L-bit, O-bit)                         <br/> 
 &nbsp;&nbsp;&nbsp;LLS Options is 0x1 (LR)                                              <br/> 
 &nbsp;&nbsp;&nbsp;Dead timer due in 00:00:37                                           <br/> 
 &nbsp;&nbsp;&nbsp;Neighbor is up for 05:50:19                                          <br/> 
 &nbsp;&nbsp;&nbsp;Index 1/1, retransmission queue length 0, number of retransmission 1 <br/> 
 &nbsp;&nbsp;&nbsp;First 0x0(0)/0x0(0) Next 0x0(0)/0x0(0)                               <br/> 
 &nbsp;&nbsp;&nbsp;Last retransmission scan length is 1, maximum is 1                   <br/> 
 &nbsp;&nbsp;&nbsp;Last retransmission scan time is 0 msec, maximum is 0 msec           <br/> 
 Neighbor 2.2.2.2, interface address 10.255.1.2                          <br/> 
 &nbsp;&nbsp;&nbsp;In the area 0.0.0.0 via interface GigabitEthernet2/0                 <br/> 
 &nbsp;&nbsp;&nbsp;Neighbor priority is 1, State is FULL, 6 state changes               <br/> 
 &nbsp;&nbsp;&nbsp;DR is 10.255.1.1 BDR is 10.255.1.2                                   <br/> 
 &nbsp;&nbsp;&nbsp;Options is 0x12 in Hello (E-bit, L-bit)                              <br/> 
 &nbsp;&nbsp;&nbsp;Options is 0x52 in DBD (E-bit, L-bit, O-bit)                         <br/> 
 &nbsp;&nbsp;&nbsp;LLS Options is 0x1 (LR)                                              <br/> 
 &nbsp;&nbsp;&nbsp;Dead timer due in 00:00:37                                           <br/> 
 &nbsp;&nbsp;&nbsp;Neighbor is up for 05:49:56                                          <br/> 
 &nbsp;&nbsp;&nbsp;Index 2/2, retransmission queue length 0, number of retransmission 0 <br/> 
 &nbsp;&nbsp;&nbsp;First 0x0(0)/0x0(0) Next 0x0(0)/0x0(0)                               <br/> 
 &nbsp;&nbsp;&nbsp;Last retransmission scan length is 0, maximum is 0                   <br/> 
 &nbsp;&nbsp;&nbsp;Last retransmission scan time is 0 msec, maximum is 0 msec           <br/> 
R1#                                                                       
  </code></div>
<p>
From the above output, the following information can be learned about the neighborship:
<ul>
  <li><b>Interfaces through which neighborship was formed:</b> Router R1 has 
  formed a neighborship with OSPF device with RID 2.2.2.2 over 
  two interfaces FastEthernet3/0 and GigabitEthernet2/0.</li>
  <li><b>Duration of the neighborship:</b> In this instance, the neighborship has 
  been up for 5 hours and 50 minutes through the interface FastEthernet3/0 and 
  05 hours and 49 minutes via interface GigabitEthernet2/0.</li>
  <li><b>DR/BDR/DROther role:</b> on broadcast and non-broadcast networks that 
  require a DR/BDR, the role or the OSPF neighbor can be learned. In this instance, 
  the local device is a DR on network segment through interface FastEthernet 3/0 
  and GigabitEthernet2/0. Additionally, the local device transitioned through 
  six adjacency state changes with its neighbor 2.2.2.2.</li>
  <li><b>Options:</b> options have been set on the Hello packets and DBD packets:
    <ul>
      <li><b>E-bit:</b> the neighbor is capable of redistribution.</li>
      <li><b>L-bit:</b> the neighbor has enabled LLS (link-local signaling).
      LLS allows for the extension of existing OSPF packets in order to provide 
      additional bit space. The additional bit space enables greater information 
      per packet exchange between OSPF neighbors. This functionality is used, 
      for example, by the OSPF Nonstop Forwarding (NSF) Awareness feature that 
      allows customer premises equipment (CPE) routers that are NSF-aware to help
      NSF-capable routers perform nonstop forwarding of packets. 
      With the LLS option enabled, the LLS data block contains NSF relevant options.
      In this instance, the neighbor 2.2.2.2 has enabled LSDB Resynchronization 
      (LR) enabled on both interfaces. NSF is discussed in some detail in the 
      subsequent sections.</li>
    </ul>
    <li><b>Priority:</b> the neighbor 2.2.2.2 priority is set to 1 (default) on both 
    interfaces.</li>
    <li><b>Area:</b> the local device interfaces GigabitEthernet2/0 and FastEthernet3/0 
  and its neighbor 2.2.2.2 are in area 0 (backbone).</li>
</ul>
</p>
  
<h3><code>show ip ospf neighbor <i>interface-id</i></code></h3>
<p>
The above command is used to view the neighborships formed through the specified 
interface. The optional <code><b>detail</b></code> keyword can be appended to the 
command to view detailed OSPF related information regarding the neighbor.
</p>
<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
R1#<b>show ip ospf neighbor FastEthernet3/0</b>                                          <br/>
                                                                                  <br/>
Neighbor ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pri&nbsp;&nbsp;&nbsp;State&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dead Time&nbsp;&nbsp;&nbsp;Address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Interface       <br/>
2.2.2.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/DROTHER&nbsp;&nbsp;&nbsp;&nbsp;00:00:38&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.34&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FastEthernet3/0 <br/>
3.3.3.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/DROTHER&nbsp;&nbsp;&nbsp;&nbsp;00:00:31&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FastEthernet3/0 <br/>
9.9.9.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;FULL/BDR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:00:35&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.36&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FastEthernet3/0 <br/>
</code></div>


<h2 id="NETWORK_TYPES">OSPF Media Dependencies and Network Types</h2>
<h3>OSPF Network Types</h3>
Different network types are defined to deal with different network media characteristics.
Network types control:
<ul>
<li>When hello packets and updates are sent.</li>
<li>Who forms an adjacency</li>
<li>How the next-hop is calculated.</li>
</ul>
The OSPF network type does not need to match to form an adjacency but it does 
need to be compatible such as a common need for a DR/BDR for the segment and 
the hello and dead interval timers. OSPF network types include the following:
<ul>
<li><b>Broadcast networks:</b> default network type on multi-access broadcast 
media such as Ethernet. The broadcast network type has the following features:
<ul>
  <li>Dynamic neighbor discovery is supported through the use of multicast packets.</li> 
  <li>Requires the election of a designated router (DR) and back-up designated 
  router (BDR).</li>
  <li>Hello <!-- and LSU --> packets from DROthers are sent as multicast to 224.0.0.6 
(AllDRouters) and with destination MAC address. 01:00:5E:00:00:06. The DR and BDR process packets 
sent to this address. The DR acknowledges the packet with a unicast LSAck and sends a 
multicast update to all other routers (AllSPFRouters) with 
a destination address of 224.0.0.5 and MAC address 01:00:5E:00:00:05. </li>
<li>The hello interval is 10 seconds, dead interval 40 
seconds, wait time 40 seconds.</li>
<li>The hello packets are sent in multicast. A hello packet may be sent in unicast 
when a hello packet is received from a neighbor for the first time during adjacency
formation. This hello packet will usually include this new neighbor's RID in the 
active neighbor's field of the hello packet.</li>
<li>LSAck and DBD are sent in unicast. LSU packets are sent in multicast to 
DROthers by DR; DROthers send LSU packets to DR in unicast packets.  
</ul>

<li><b>Nonbroadcast: </b>default network type on NBMA networks such as frame-relay, 
DMVPN topologies.
<ul>
  <li>Interfaces do not support broadcast or multicast as a result, dynamic neighbor 
discovery is not supported.</li>
<li>Neighbors are manually configured using the router OSPF command 
<code><b>neighbor <i>neighbor_ip_address</i></b></code>.</li> 
 <li>Hello packets are sent in unicast. Information flooding is not supported</li> 
  <li>DR and BDR election is required for this network type. </li>
  <li>The hello interval is 30 seconds, dead-interval 120 seconds, wait timer 120 seconds. </li>
</ul>
<li><b>Point-to-point: </b>default on point-to-point media such as HDLC, PPP, GRE.
<ul>
  <li>Supports dynamic neighbor discovery with hello packets sent in multicast to 
  address 224.0.0.5.</li>
  <li>Supports only two neighbors on the link. </li>
  <li>The hello interval is 10 seconds, dead interval 40 seconds.</li>
  <li>A DR and BDR election is not required for this network.</li>
</ul>

<li><b>Point-to-multipoint: </b> Typically used on a spoke-hub topology. 
<ul>
  <li>This network type can be treated as a collection of point-to-point links.</li>
  <li>It assumes that all the devices on the shared network are individually 
  reachable to each other essentially like an Ethernet network lacking broadcast 
  capability.</li>
  <li>Supports dynamic neighbor discovery.</li>
  <li>Hello packets are sent to multicast address 224.0.0.5.</li>
  <li>Special next-hop processing takes place with the next hop being set to the
  neighbor's IP address that sent the LSU.</li>
  <li>Point-to-multipoint network type is usually the best design option for 
  partial mesh NBMA networks.</li>
  <li>The interface's IP address is advertised as /32 host route.</li>
  <li>Point-to-multipoint is not a default for any medium type.</li> 
  <li>The hello interval is 30 seconds, dead-interval 120 seconds. DR and BDR 
  election does not happen in this network type.</li>
 </ul>
 
 <li><b> Point-to-multipoint Non-Broadcast: </b> 
 <ul>
 <li> Similar to point-to-multipoint but neighbors are statically configured 
 using the OSPF command <code><b>neighbor <i>neighbor_ip_address</i></b></code>.</li> 
 <li> Hello packets are sent in unicast.</li>
 <li>Allows for per-VC OSPF cost over NBMA. </li>
 <li>Special next-hop processing.</li>
 </ul>
 <li><b>Loopback: </b> Special case for loopback and looped-back interfaces. 
 <ul>
   <li>Advertises link with /32 subnet mask as a host route.</li>
   <li>The Hello timer is 30 seconds and dead-interval timer is 120 seconds.</li>
 </ul>
 </li>
</ul>

<p>
The use of type 2 LSA packets determines whether OSPF network types can be compatible or not. 
Network types that use type 2 LSAs include: broadcast and non-broadcast. 
Others do not support type 2 LSA packets.
</p>

<p>
The OSPF network type of an interface can be changed from its default using the 
interface mode command: <code><b>ip ospf  network <i>network_type</i></code>.  
<code>network_type</b></code> can be any of the these values: broadcast, 
non-broadcast, point-to-point, point-to-multipoint.
<br />
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R1(config)#<b>interface fa3/0</b><br />
R1(config-if)#<b>ip ospf network point-to-point</b><br />
R1(config-if)#<b>do show ip ospf interface fa3/0</b><br />
FastEthernet3/0 is up, line protocol is up<br />
&nbsp;&nbsp;Internet Address 10.0.16.1/30, Area 0, Attached via Interface Enable<br />
&nbsp;&nbsp;Process ID 1, Router ID 1.1.1.1, Network Type<span style="background-color:#DCDCDC;"> POINT_TO_POINT</span>, Cost: 1<br />
&nbsp;&nbsp;...<br />
&nbsp;&nbsp;Enabled by interface config, including secondary ip addresses<br />
&nbsp;&nbsp;Transmit Delay is 1 sec, State POINT_TO_POINT<br />
&nbsp;&nbsp;Timer intervals configured, Hello 250 msec, Dead 1, Wait 1, Retransmit 5<br />
&nbsp;&nbsp;&nbsp;&nbsp;oob-resync timeout 40<br />
&nbsp;&nbsp;&nbsp;&nbsp;Hello due in 73 msec<br />
</code>
</div>
</p>
<p>

Broadcast networks with only two OSPF peers can be configured to point-to-point network type.
This makes the adjacency complete faster eliminating the unnecessary DR/BDR 
election and OSPF type 2 LSA advertisements.
</p>

<h3>OSPF Interfaces</h3>
<p>
To view interfaces on which OSPF has been activated i.e., interfaces whose 
IP addresses or networks are being advertised by OSPF, issue the following 
commands: 
<h3><code>show ip ospf interface brief</code></h3>
<p>
The <code><b>brief</b></code> keyword formats the output to display a list of 
the interfaces that on which OSPF is enabled. 
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R4#<b>show ip ospf interface brief</b>                                     <br />
Interface&nbsp;&nbsp;&nbsp;&nbsp;PID&nbsp;&nbsp;&nbsp;Area&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IP Address/Mask&nbsp;&nbsp;&nbsp;&nbsp;Cost&nbsp;&nbsp;State Nbrs F/C <br />
Lo1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.1.1/24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOOP&nbsp;&nbsp;0/0      <br />
Lo2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.2.1/24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOOP&nbsp;&nbsp;0/0      <br />
Lo3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.3.1/24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOOP&nbsp;&nbsp;0/0      <br />
Lo4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.4.1/24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOOP&nbsp;&nbsp;0/0      <br />
Fa3/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.27/29&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BDR &nbsp;&nbsp;3/3      <br />
Gi1/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.10/30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DR&nbsp;&nbsp;&nbsp;&nbsp;1/1
</code></div>
<p>
From the above output the following is displayed:
<ul>
  <li><b>Interface:</b> the interface on which OSPF is enabled.</li>
  <li><b>PID:</b> the OSPF process ID under which the interface network is being 
  advertised. An interface can only operate under one OSPF process. Advertising 
  the network in which the interface resides, OSPF process X, in another OSPF 
  process Y results in the interface being reassigned to the OSPF process Y and 
  its removal from OSPF process X.</li>
  <li><b>Area:</b> the area that the interface is assigned to. In this instance, 
  all interfaces are in the backbone area.</li>
  <li><b>IP Address/Mask:</b> the interface IP address and subnet mask.</li>
  <li><b>Cost:</b> the metric cost. The cost is calculated using the formula 
  <code><b>reference bandwidth &divide; interface bandwidth</b></code>
  The default reference bandwidth value is 100mbps.
  </li>
  <li><b>State:</b> the DR/BDR/DROther state of the interface.</li>
  <li><b>Nbrs F/C:</b> number of neighbors that are in the FULL adjacency state 
  and the number of OSPF devices detected through the interface.</li>
</ul>
</p>
<p>
<b>NOTE:</b> When viewing interfaces, the command <code><b>show ip ospf interface
</b></code> displays both passive and active interfaces.
</p>


<h3><code>show ip ospf interface</code></h3>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R4#<b>show ip ospf interface</b>                                                <br/>
Loopback2 is up, line protocol is up                                            <br/>
&nbsp;&nbsp;Internet Address 10.1.2.1/24, Area 0.0.0.0, Attached via Network Statement    <br/>
&nbsp;&nbsp;Process ID 4, Router ID 4.4.4.4, Network Type LOOPBACK, Cost: 1               <br/>
&nbsp;&nbsp;Topology-MTID&nbsp;&nbsp;&nbsp;&nbsp;Cost&nbsp;&nbsp;&nbsp;&nbsp;Disabled&nbsp;&nbsp;&nbsp;&nbsp;Shutdown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Topology Name              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base                    <br/>
&nbsp;&nbsp;Loopback interface is treated as a stub Host                                  <br/>
Loopback3 is up, line protocol is up                                            <br/>
&nbsp;&nbsp;Internet Address 10.1.3.1/24, Area 0.0.0.0, Attached via Network Statement    <br/>
&nbsp;&nbsp;Process ID 4, Router ID 4.4.4.4, Network Type LOOPBACK, Cost: 1               <br/>
&nbsp;&nbsp;Topology-MTID&nbsp;&nbsp;&nbsp;&nbsp;Cost&nbsp;&nbsp;&nbsp;&nbsp;Disabled&nbsp;&nbsp;&nbsp;&nbsp;Shutdown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Topology Name              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base                    <br/>

&nbsp;&nbsp;Loopback interface is treated as a stub Host                                  <br/>
Loopback4 is up, line protocol is up                                            <br/>
&nbsp;&nbsp;Internet Address 10.1.4.1/24, Area 0.0.0.0, Attached via Network Statement    <br/>
&nbsp;&nbsp;Process ID 4, Router ID 4.4.4.4, Network Type LOOPBACK, Cost: 1               <br/>
&nbsp;&nbsp;Topology-MTID&nbsp;&nbsp;&nbsp;&nbsp;Cost&nbsp;&nbsp;&nbsp;&nbsp;Disabled&nbsp;&nbsp;&nbsp;&nbsp;Shutdown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Topology Name              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base                    <br/>

&nbsp;&nbsp;Loopback interface is treated as a stub Host                                  <br/>
Loopback1 is up, line protocol is up                                            <br/>
&nbsp;&nbsp;Internet Address 10.1.1.1/24, Area 0.0.0.0, Attached via Interface Enable     <br/>
&nbsp;&nbsp;Process ID 4, Router ID 4.4.4.4, Network Type LOOPBACK, Cost: 1               <br/>
&nbsp;&nbsp;Topology-MTID&nbsp;&nbsp;&nbsp;&nbsp;Cost&nbsp;&nbsp;&nbsp;&nbsp;Disabled&nbsp;&nbsp;&nbsp;&nbsp;Shutdown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Topology Name              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base                    <br/>

&nbsp;&nbsp;Enabled by interface config, including secondary ip addresses                 <br/>
&nbsp;&nbsp;Loopback interface is treated as a stub Host                                  <br/>
FastEthernet3/0 is up, line protocol is up                                      <br/>
&nbsp;&nbsp;Internet Address 10.255.1.27/29, Area 0.0.0.0, Attached via Interface Enable  <br/>
&nbsp;&nbsp;Process ID 4, Router ID 4.4.4.4, Network Type BROADCAST, Cost: 1              <br/>
&nbsp;&nbsp;Topology-MTID&nbsp;&nbsp;&nbsp;&nbsp;Cost&nbsp;&nbsp;&nbsp;&nbsp;Disabled&nbsp;&nbsp;&nbsp;&nbsp;Shutdown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Topology Name              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base                    <br/>

&nbsp;&nbsp;Enabled by interface config, including secondary ip addresses                 <br/>
&nbsp;&nbsp;Transmit Delay is 1 sec, State DROTHER, Priority 1                            <br/>
&nbsp;&nbsp;Designated Router (ID) 5.5.5.5, Interface address 10.255.1.28                 <br/>
&nbsp;&nbsp;Backup Designated router (ID) 2.2.2.2, Interface address 10.255.1.25          <br/>
&nbsp;&nbsp;Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;oob-resync timeout 40                                                       <br/>
&nbsp;&nbsp;&nbsp;&nbsp;Hello due in 00:00:03                                                       <br/>
&nbsp;&nbsp;Supports Link-local Signaling (LLS)                                           <br/>
&nbsp;&nbsp;Cisco NSF helper support enabled                                              <br/>
&nbsp;&nbsp;IETF NSF helper support enabled                                               <br/>
&nbsp;&nbsp;Index 2/2, flood queue length 0                                               <br/>
&nbsp;&nbsp;Next 0x0(0)/0x0(0)                                                            <br/>
&nbsp;&nbsp;Last flood scan length is 1, maximum is 10                                    <br/>
&nbsp;&nbsp;Last flood scan time is 0 msec, maximum is 4 msec                             <br/>
&nbsp;&nbsp;Neighbor Count is 3, Adjacent neighbor count is 2                             <br/>
&nbsp;&nbsp;&nbsp;&nbsp;Adjacent with neighbor 2.2.2.2  (Backup Designated Router)                  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;Adjacent with neighbor 5.5.5.5  (Designated Router)                         <br/>
&nbsp;&nbsp;Suppress hello for 0 neighbor(s)                                              <br/>
GigabitEthernet1/0 is up, line protocol is up                                   <br/>
&nbsp;&nbsp;Internet Address 10.255.1.10/30, Area 0.0.0.0, Attached via Interface Enable  <br/>
&nbsp;&nbsp;Process ID 4, Router ID 4.4.4.4, Network Type BROADCAST, Cost: 1              <br/>
&nbsp;&nbsp;Topology-MTID&nbsp;&nbsp;&nbsp;&nbsp;Cost&nbsp;&nbsp;&nbsp;&nbsp;Disabled&nbsp;&nbsp;&nbsp;&nbsp;Shutdown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Topology Name              <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base                    <br/>
&nbsp;&nbsp;Enabled by interface config, including secondary ip addresses                 <br/>
&nbsp;&nbsp;Transmit Delay is 1 sec, State BDR, Priority 1                                <br/>
&nbsp;&nbsp;Designated Router (ID) 2.2.2.2, Interface address 10.255.1.9                  <br/>
&nbsp;&nbsp;Backup Designated router (ID) 4.4.4.4, Interface address 10.255.1.10          <br/>
&nbsp;&nbsp;Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5          <br/>
&nbsp;&nbsp;&nbsp;&nbsp;oob-resync timeout 40                                                       <br/>
&nbsp;&nbsp;&nbsp;&nbsp;Hello due in 00:00:03                                                       <br/>
&nbsp;&nbsp;Supports Link-local Signaling (LLS)                                           <br/>
&nbsp;&nbsp;Cisco NSF helper support enabled                                              <br/>
&nbsp;&nbsp;IETF NSF helper support enabled                                               <br/>
&nbsp;&nbsp;Index 1/1, flood queue length 0                                               <br/>
&nbsp;&nbsp;Next 0x0(0)/0x0(0)                                                            <br/>
&nbsp;&nbsp;Last flood scan length is 1, maximum is 7                                     <br/>
&nbsp;&nbsp;Last flood scan time is 4 msec, maximum is 4 msec                             <br/>
&nbsp;&nbsp;Neighbor Count is 1, Adjacent neighbor count is 1                             <br/>
&nbsp;&nbsp;&nbsp;&nbsp;Adjacent with neighbor 2.2.2.2  (Designated Router)                         <br/>
&nbsp;&nbsp;Suppress hello for 0 neighbor(s)                                              <br/>
R4#
</code></div>

<p>
The following can be learned about the configuration and operational mode of 
OSPF interfaces:
<ul>
  <li>OSPF network type </li>
  <li>RID of the local OSPF device</li>
  <li>Cost on the interface</li>
  <li>How the OSPF was enabled on the interface i.e., through the interface mode 
  command <code><b>ip ospf <i>process-id</i> area <i>area-id</i></b></code> or 
  using the OSPF router mode command <code><b>network <i>network-address wilcard</i> area <i>area-id</i> 
  </b></code>.
  <li>OSPF process ID that the interface is associated with.</li>
  <li>Hello and dead-interval timer values.</li>
  <li>Non-stop forwarding (NSF) support. Additionally, link-local signaling 
  support is confirmed.</li>
  <li>IP addresses of the DR and BDR on that segment for broadcast and nonbroadcast 
  OSPF network types.</li>
  <li>Number of adjacencies established through the interface.</li>
  <li>OSPF priority for the interface.</li>
  <li>The flood queue length.</li>
  <li>Number of hello packets suppressed from neighbors.</li>
</ul>
</p>



<h2 id="DR_BDR">Designated Router(DR) and Backup Designated Router(BDR)</h2>
<p>
If multiple routers in multi-access networks are to form adjacencies, the total number of 
adjacencies established is determined by the formula:

<code>
Total = n * (n - 1)/2.
</code>

All these routers will be sending hello and update packets to each and every one of them.
In order to reduce the number of adjacencies (and OSPF packets) on a segment in a multi-access network, 
OSPF elects one router to be a designated router and another to act as a backup designated router 
to replace the designated router in case of its failure.
</p>

<h3>DR/BDR Election</h3>
<p>
A router initialising OSPF on an interface waits the duration of the wait timer 
listening for the presence of other OSPF routers announcing their DR status before 
declaring its DR status (if more favourable). In broadcast networks, the wait 
timer is 40 seconds, nonbroadcast networks, 120 seconds.

DR election is based on interface priority and router ID (RID). Usually, the first 
router to initialize OSPF on an interface within a given number of seconds on a segment 
becomes the DR regardless of its interface priority or RID.

OSPF deems a router more preferrable for DR election if:
<ol>
 <li> The interface of the router has the highest priority for that segment. The priority is any value between 1 - 255.
 The default priority is one (1). </li>
 <li> The router has the highest OSPF RID in that segment. The RID of a router is determined by:
    <ol type=i>
	<li>if configured, the highest IP address configured on any "up" loopback interfaces.</li>
	<li>the highest physical interface IP address</li>
	<li> manual configuration of the RID using the OSPF process command: 
      <code><b>router-id <i>rid</i></b></code>
	</li>
	</ol>
 </li>
</ol>
<p>
Unlike BGP, the OSPF RID is not a routable address. It is possible to have a 
valid RID such as 255.255.255.255
</p>

<p>
The interface priority is a value from 1 to 255 inclusive. To change the router interface priority to 200:
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
  R1(config)#<b>interface g0/0</b> <br />
R1(config-if)#<b>ip ospf priority ? </b><br />
  <0-255>  Priority <br />
R1(config-if)#<b>ip ospf priority 200 </b><br />
R1(config-if)#<b>do show ip ospf interface g0/0</b> <br />
GigabitEthernet0/0 is up, line protocol is up <br />
  &nbsp;&nbsp;Internet Address 10.0.12.1/30, Area 0, Attached via Network Statement <br />
  &nbsp;&nbsp;Process ID 1, Router ID 1.1.1.1, Network Type BROADCAST, Cost: 1 <br />
  &nbsp;&nbsp; .... <br />
  &nbsp;&nbsp;Transmit Delay is 1 sec, State BDR, <span style="background-color:#DCDCDC;">Priority 200</span><br />
</code>
</div>
<p>
A value of zero makes the router ineligible for DR/BDR election.
</p>
<p>
The DR and BDR roles can not be preempted by a router with higher interface 
priority or RID values. The election of a DR/BDR can be forced by clearing the 
OSPF process of the DR and BDR. This can be done using the following command: 
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R1# <br />
R1#<b>clear ip ospf process</b> <br />
Reset ALL OSPF processes? [no]: <b>yes</b> <br />
R1# <br />
*Aug 11 22:03:11.495: %OSPF-5-ADJCHG: Process 1, Nbr 2.2.2.2 on GigabitEthernet0/0 from FULL to DOWN, Neighbor Down: Interface down or detached <br />
*Aug 11 22:03:11.767: %OSPF-5-ADJCHG: Process 1, Nbr 2.2.2.2 on GigabitEthernet0/0 from LOADING to FULL, Loading Done <br />
</code>
</div>


<h3>DR Operation</h3>
<p>
A DR is used in broadcast and non-broadcast networks and its primary role DR 
consists of the following:
<ul>
  <li>it originates updates for the network segment.</li>
  <li>It facilitates synchronization</li>
</ul>
A DR controls information exchange.
</p>

<p>
The DR acts as a pseudonode in the network segment. This pseudonode is a virtual 
network node that forms point-to-point relationships with all the other devices 
on that node. It acts as a central point forming multiple virtual point-to-point 
links with all the OSPF peers on that node. These virtual links have a cost of 
zero(0) so that they do not alter the cost of the physical link. 
The SPF algorithm calculates paths based on the point-to-point links.
</p>

<p>
A Designated Router forms a FULL adjacency with all routers on the link. 
The other routers (DROthers) form 2-WAY adjacencies with each other.
The BDR forms FULL adjacencies with all other routers as well.
The DR listens for LSUs on the multicast address 224.0.0.6. A router (DROther) 
with an update sends it to the multicast address 224.0.0.6.
After receiving an LSU, the DR sends a unicast LSAck to that router to acknowledge receiving the update.
The DR then floods the LSU(s) to the segment using AllSPFRouters address 224.0.0.5.
The DR does not modify the next-hop value of this LSU. 
</p>
<p>
The BDR is used for redundancy; if the DR fails, the BDR becomes the DR and a 
BDR is elected from the available DROther routers. The election of the BDR from 
the DROthers follows the same pattern as the election of the DR. The BDR does 
not flood any updates but receives all updates sent to the DR.
</p>

<p>
The operation of a DR can be inefficient if only two devices are connected in a segment.
On networks that require DR operation (such as broadcast) and only two devices 
are present, it may be more efficient to statically configure the interfaces with 
a network type that does not require a DR for example a point-to-point network type.
This reduces the time to form an adjacency as well as elimination of the type 2 
LSA resulting in a smaller LSDB.
</p>


<h1 id="LSA">Link State Database (LSDB) and Link State Advertisements (LSAs)</h1>

Multiple types of LSAs exist and the ones used depend on the design of the network.
LSAs are used to share link state information in an OSPF domain.
LSAs are used by OSPF routers to form and maintain neighbor relationships and to share prefix information. 
LSAs contain a sequence number as a form of version control to overcome problems that might be caused during
 LSA propagation. 
 
 All LSAs are stored in the link state database (LSDB). A summary of the LSAs 
 in the LSDB and can be viewed by running the command  
 <code><b>show ip ospf database</b></code>.
</p>

<p>
The originating router floods an LSA after every 1800 seconds (30 minutes).
OSPF continually monitors the LSDB; LSAs with LSAge of 3600 seconds (1hr) are 
deemed invalid and purged from the LSDB. OSPF uses this as a method of route withdrawal.
</p>



<h2 id="LSDB">Link State Database (LSDB)</h2> 
<p>
Every OSPF device has a link state database (LSDB). OSPF devices inside the same area 
have the same LSDB. 
The LSDB stores LSAs with the link state information in the local area and 
summary information about the link states in other areas and external networks.
 The content of LSDBs are LSAs. LSDBs are populated by type 1, type 2, type 3, 
 type 4, type 5 and type 7 LSAs. On receiving an LSA, its integrity is checked 
 and then placed into the LSDB. This process continues 
 domain wide until the LSDB of all routers in the same area are the same (synchronized).
 This process is referred to as flooding.
 To view a summary of the LSDB, use the command <code><b>show ip ospf database</b></code>.
</p>

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
R1#<b>show ip ospf database</b><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            OSPF Router with ID (1.1.1.1) (Process ID 1)<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                Router Link States (Area 0)<br />
<br />
Link ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Age&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         Seq#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       Checksum Link count<br />
1.1.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         1.1.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         477  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       0x8000000A 0x00C502 2<br />
2.2.2.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         2.2.2.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         247  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       0x8000000A 0x0066CD 3<br />
6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         3514 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       0x80000004 0x00F749 4<br />
8.8.8.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         8.8.8.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         3    &nbsp;&nbsp; (DNA) 0x80000002 0x00BDFD 1<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                Net Link States (Area 0)<br />
<br />
Link ID  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Age &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Seq#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       Checksum<br />
10.0.12.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       2.2.2.2   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      725 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        0x80000005 0x00A468<br />
10.0.26.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       2.2.2.2   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      247 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        0x80000005 0x000FDC<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                Summary Net Link States (Area 0)<br />
<br />
Link ID   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Age&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         Seq#       Checksum<br />
10.7.7.0  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      6.6.6.6   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      874&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         0x80000003 0x00E621<br />
10.7.7.0  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      8.8.8.8   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      13&nbsp;&nbsp;    (DNA) 0x80000001 0x0054B6<br />
10.10.13.0&nbsp;&nbsp;&nbsp;&nbsp;      1.1.1.1   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      477 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        0x8000000A 0x00C64A<br />
10.10.31.1&nbsp;&nbsp;&nbsp;&nbsp;      1.1.1.1   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      1130&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        0x80000001 0x0024DE<br />
10.10.34.0&nbsp;&nbsp;&nbsp;&nbsp;      1.1.1.1   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      1130&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        0x80000001 0x00FA09<br />
<br />                                                                                
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                Router Link States (Area 10)<br />
<br />
Link ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Age  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       Seq#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       Checksum Link count<br />
1.1.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         1.1.1.1   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      1134 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       0x80000005 0x0015AC 2<br />
3.3.3.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         3.3.3.3   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      1135 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       0x80000002 0x00A193 4<br />
<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       Summary Net Link States (Area 10)<br />
<br />
Link ID    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     ADV Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Age &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Seq# &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Checksum<br />
10.0.12.0  &nbsp;&nbsp;&nbsp;&nbsp;     1.1.1.1   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      720 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        0x80000003 0x00FD1F<br />
10.0.16.0  &nbsp;&nbsp;&nbsp;&nbsp;     1.1.1.1   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      477 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        0x80000005 0x00CD49<br />
10.0.26.0  &nbsp;&nbsp;&nbsp;&nbsp;     1.1.1.1   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      229 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        0x80000007 0x00BF41<br />
10.0.210.1 &nbsp;&nbsp;&nbsp;     1.1.1.1   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      229 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        0x80000007 0x007DCF<br />
10.7.7.0   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     1.1.1.1   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      229 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        0x80000007 0x00897D<br />
192.168.6.0&nbsp;&nbsp;&nbsp;     1.1.1.1   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      229 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        0x80000007 0x00E3C4<br />
R1#<br />
  </code>
</div>
</b></li>
</ol>
<p>
The ultimate goal of any OSPF network design is to make the LSDB as stable as possible.
</p>

<p>
The output of the command <code><b>show ip ospf database</b></code> displays a 
summary of the LSDB. To view the the details of any LSDB entry, one has to 
open up the LSAs that are stored in the LSDB. LSDB entries are organised 
according to the areas that the OSPF device is operating in from the lowest area
ID to the highest. For a router with 
interfaces in more than one area, the LSAs are organised according to the area 
that the router is a member of.
</p>
<p>
If a router has interfaces in more than one area, it will maintain separate LSDBs
for each area. All routers in an area must have an identical LSDB. To create a 
loop-free domain, OSPF requires a synchronised LSDB and a loop-free calculation;
this calculation is implemented by Dijkstra's algorithm.
</p>
<p>
For OSPF devices in multiple areas:
<ul>
  <li>Per-area database contains:
  <ul>
    <li>internal and inter-area routes</li>
    <li>NSSA external routes</li>
  </ul>
  </li>
  <li>Per-domain database (excluding NSSA, stub areas): external routes</li>
</ul>
</p>
<h3>Querying the LSDB</h3>
<p>
The LSDB contains alot of information that can be used to gain insights into 
the OSPF domain. Most of the commands querying the LSDB involve viewing stored 
LSA information. A few other commands provide an overview of the state of the 
LSDB.
</p>

<p>
To view the summary of the LSDB:
<code><b>show ip ospf database database-summary</b></code>
</p>

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
R1#<b>show ip ospf database database-summary</b>                   <br />
                                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (1.1.1.1) (Process ID 1)    <br />
                                                            <br />
Area 0.0.0.0 database summary                               <br />
&nbsp;&nbsp;LSA Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Count&nbsp;&nbsp;&nbsp;&nbsp;Delete&nbsp;&nbsp;&nbsp;Maxage                    <br />
&nbsp;&nbsp;Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Network&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Summary Net&nbsp;&nbsp;&nbsp;51&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Summary ASBR&nbsp;&nbsp;4 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Type-7 Ext&nbsp;&nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;Prefixes redistributed in Type-7&nbsp;&nbsp;0                     <br />
&nbsp;&nbsp;Opaque Link&nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Opaque Area&nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Subtotal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;67&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
                                                            <br />
Area 0.0.0.7 database summary                               <br />
&nbsp;&nbsp;LSA Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Count&nbsp;&nbsp;&nbsp;&nbsp;Delete&nbsp;&nbsp;&nbsp;Maxage                    <br />
&nbsp;&nbsp;Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Network&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Summary Net&nbsp;&nbsp;&nbsp;53&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Summary ASBR&nbsp;&nbsp;5 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Type-7 Ext&nbsp;&nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;Prefixes redistributed in Type-7&nbsp;&nbsp;0                     <br />
&nbsp;&nbsp;Opaque Link&nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Opaque Area&nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Subtotal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;68&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
                                                            <br />
Area 10 database summary                                    <br />
&nbsp;&nbsp;LSA Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Count&nbsp;&nbsp;&nbsp;&nbsp;Delete&nbsp;&nbsp;&nbsp;Maxage                    <br />
&nbsp;&nbsp;Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Network&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Summary Net&nbsp;&nbsp;&nbsp;48&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Summary ASBR&nbsp;&nbsp;1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Type-7 Ext&nbsp;&nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;Prefixes redistributed in Type-7&nbsp;&nbsp;0                     <br />
&nbsp;&nbsp;Opaque Link&nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Opaque Area&nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Subtotal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;56&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
                                                            <br />
Process 1 database summary                                  <br />
&nbsp;&nbsp;LSA Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Count&nbsp;&nbsp;&nbsp;&nbsp;Delete&nbsp;&nbsp;&nbsp;Maxage                    <br />
&nbsp;&nbsp;Router&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Network&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Summary Net&nbsp;&nbsp;&nbsp;152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Summary ASBR&nbsp;&nbsp;10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Type-7 Ext&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Opaque Link&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Opaque Area&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Type-5 Ext&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prefixes redistributed in Type-5&nbsp;&nbsp;0                   <br />
&nbsp;&nbsp;Opaque AS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
&nbsp;&nbsp;Non-self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;130&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                          <br />
&nbsp;&nbsp;Total&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;197&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0                         <br />
R1#
</code></div>

<p>
When viewing the details of the LSAs in the LSDB, the phrase "Routing Bit Set" on 
an LSA indicates that the route information learned from that LSA has been 
imported into the routing table from the LSDB. This can be observed in the 
following output where both paths are installed into the routing table:
</p>

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
R7#<b>show ip ospf database summary 10.1.1.0 </b>                                <br />
                                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (7.7.7.7) (Process ID 7)                  <br />
                                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Summary Net Link States (Area 7)                          <br />
                                                                          <br />
&nbsp;&nbsp;<span style="background-color: gray;">Routing Bit Set on this LSA in topology Base with MTID 0 </span>               <br />
&nbsp;&nbsp;LS age: 228                                                             <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                                <br />
&nbsp;&nbsp;LS Type: Summary Links(Network)                                         <br />
&nbsp;&nbsp;Link State ID: 10.1.1.0 (summary Network Number)                        <br />
&nbsp;&nbsp;Advertising Router: 1.1.1.1                                             <br />
&nbsp;&nbsp;LS Seq Number: 80000006                                                 <br />
&nbsp;&nbsp;Checksum: 0xE53F                                                        <br />
&nbsp;&nbsp;Length: 28                                                              <br />
&nbsp;&nbsp;Network Mask: /24                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 3                                         <br />
&nbsp;&nbsp;                                                                        <br />
&nbsp;&nbsp;<span style="background-color: gray;">Routing Bit Set on this LSA in topology Base with MTID 0</span>                <br />
&nbsp;&nbsp;LS age: 289                                                             <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                                <br />
&nbsp;&nbsp;LS Type: Summary Links(Network)                                         <br />
&nbsp;&nbsp;Link State ID: 10.1.1.0 (summary Network Number)                        <br />
&nbsp;&nbsp;Advertising Router: 2.2.2.2                                             <br />
&nbsp;&nbsp;LS Seq Number: 80000005                                                 <br />
&nbsp;&nbsp;Checksum: 0xBF63                                                        <br />
&nbsp;&nbsp;Length: 28                                                              <br />
&nbsp;&nbsp;Network Mask: /24                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 2                                         <br />
&nbsp;&nbsp;                                                                        <br />
&nbsp;&nbsp;<span style="background-color: gray;">Routing Bit Set on this LSA in topology Base with MTID 0</span>                <br />
&nbsp;&nbsp;LS age: 1819                                                            <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                                <br />
&nbsp;&nbsp;LS Type: Summary Links(Network)                                         <br />
&nbsp;&nbsp;Link State ID: 10.1.1.0 (summary Network Number)                        <br />
&nbsp;&nbsp;Advertising Router: 9.9.9.9                                             <br />
&nbsp;&nbsp;LS Seq Number: 80000004                                                 <br />
&nbsp;&nbsp;Checksum: 0xF80E                                                        <br />
&nbsp;&nbsp;Length: 28                                                              <br />
&nbsp;&nbsp;Network Mask: /24                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 3                                         <br />
&nbsp;&nbsp;                                                                        <br />
R7#<b>show ip route 10.1.1.0 </b>                                                <br />
Routing entry for 10.1.1.0/24                                             <br />
&nbsp;&nbsp;Known via "ospf 7", distance 110, metric 4, type inter area             <br />
&nbsp;&nbsp;Last update from 10.255.254.1 on GigabitEthernet1/0, 00:58:31 ago       <br />
&nbsp;&nbsp;Routing Descriptor Blocks:                                              <br />
&nbsp;&nbsp;* 10.255.254.5, from 9.9.9.9, 01:38:29 ago, via POS5/0                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Route metric is 4, traffic share count is 1                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;10.255.254.1, from 1.1.1.1, 00:58:31 ago, via GigabitEthernet1/0      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Route metric is 4, traffic share count is 1                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;10.255.2.2, from 2.2.2.2, 01:56:44 ago, via GigabitEthernet0/0        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Route metric is 4, traffic share count is 1                                                                     
</code></div>
<p>
The command <code><b>show ip route</b></code> confirms that the paths have been
installed into the routing table.
</p>

<h2>Link State Advertisements</h2>
<p>
LSA types 1, 3, 5 and 7 are used to advertise prefixes while LSA types 2 and 4 
advertise router IDs. 
Which LSA types are present on a network segment depends on the router's type, 
OSPF network type and area type.

<ol>
  <li> <b>Type 1 Router LSA: </b> advertises a router's OSPF enabled networks within an area. </li>
  <li> <b>Type 2 Network LSA: </b> advertises a multi-access network segment attached to a DR.</li>
  <li> <b>Type 3 Summary: </b> advertises network prefixes that originated from a different area.</li>
  <li> <b>Type 4 ASBR-Summary: </b> advertises a summary LSA for a specific ASBR.</li>
  <li> <b>Type 5 External: </b> advertises external redistributed routes.</li>
  <li> <b>Type 7 NSSA External: </b> advertises redistributed routes in Not-So-Stubby Areas (NSSA).</li>
</ol>
</p>
<p>
LSA types 1,2 are intra-area LSAs while LSA 3, 4 are inter-area LSAs. LSA type 5, 
7 advertise external routes. In single area topologies, type 1, 2 and 5 are utilised.
</p>

<p>
Regardless of the type of LSA used, some fields are common to all LSAs:
<ul>
  <li>LSA age</li>
 <!-- <li>Miscellaneous (Misc) options: used to indicate the type of capabilities  
  supported by the advertised portion of the routing domain.</li>-->
  <li>LSA Type: used to indicate the type of LSA to follow in the same packet 
  and the way it should be intepreted.</li>
  <li>Link State ID: Content of LS ID differs depending on the type of LSA being 
  described. 
    <ul>
      <li>Type 1 LSA: origin router ID</li>
      <li>Type 2 LSA: DR interface IP address</li>
      <li>Type 3 LSA: network address</li>
      <li>Type 4 LSA: ASBR router ID</li>
      <li>Type 5 LSA: Destination network's IP address</li>
      <li>Type 7 LSA: External network address</li>
    </ul>
  
  </li>
  <li>Advertising router</li>
  <li>Link state sequence number</li>
  <li>Checksum: used to verify the integrity of the LSA.</li>
  <li>Length</li>
</ul>
</p>


<p>
Each LSA is uniquely identified by the following parameters:
<ul>
  <li>LSA Identifier (LSA ID): the LSA ID depends on the type; router ID of 
  the advertising router, IP network being advertised.</li>
  <li>Advertising Router: router that injected a particular LSA (originator). It 
  is identified by the router ID. The advertising router in an LSA is maintained 
  in an LSA in its flooding scope. No router may modify or filter any data or 
  LSA itself.</li>
  <li>Other: various flags: border, edge, downstream, tags</li>
</ul>
If the network contains multiple versions/copies of an LSA, the link state age 
and sequence number are used to determine the version of LSA with the 
most up-to-date link state information. If multiple copies of the same LSA exist, 
the one with the newest information is used.
</p>

<h2 id="TYPE1_LSA">Type 1 Router LSA</h2>
<p>
A type 1 LSA contains lists of all OSPF-enabled interfaces on a router and their 
associated cost. It is originated by all OSPF devices in the network. It is used 
to describe the networks that a device is attached to and the device's network 
placement. 

Links advertised in a type 1 LSA include stub links, point-to-point links, transit links.

Type 1 LSAs can be used to describe one or many interfaces and networks.
A type 1 LSA is capable of advertising multiple links in one LSA.
The originator of Type 1 LSAs is all OSPF routters and flooding scope is an area.
The type of connection is indicated in the Type field. The type field contains one 
of four different values: Link Type 1, Link Type 2, Link Type 3 and Link Type 4.

<h3>Link Type 1: Point to Point Link</h3>
<p>
This represents a connection to a point to point link such as a serial connection. 
A point-to-point link, is represented by two entries in the LSDB:
 <ol>
    <li>As a point-to-point link. The link ID and link data fields contain the following data:
    <ul>
      <li><b>Link ID:</b> Neighbor router-ID.</li>
      <li><b>Link Data:</b> Local router interface IP address.</li> 
    </ul></li>
    <li>As a stub network. The stub link entry for this point-to-point link;
        <ul>
          <li><b>Link ID:</b> network address of the point-to-point link. </li>
          <li><b>Link Data:</b> subnet mask of the point-to-point network. </li>
        </ul>
      </li> 
 </ol>   
</p>
<p>
The following shows how point-to-point link state information is stored in the 
LSDB:
</p>

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
  <code>
R2#<b>show ip ospf database router 2.2.2.2</b><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (2.2.2.2) (Process ID 2)<br>
<br>            
.....<br>
<br>
<br>                                                          
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Router Link States (Area 7)<br>                
<br>                                                          
&nbsp;LS age: 1629                                                          <br>
&nbsp;Options: (No TOS-capability, DC)                                      <br>
&nbsp;LS Type: Router Links                                                 <br>
&nbsp;Link State ID: 2.2.2.2                                                <br>
&nbsp;Advertising Router: 2.2.2.2                                           <br>
&nbsp;LS Seq Number: 80000005                                               <br>
&nbsp;Checksum: 0x16B7                                                      <br>
&nbsp;Length: 48                                                            <br>
&nbsp;Area Border Router                                                    <br>
&nbsp;Number of Links: 2                                                    <br>
&nbsp;                                                                      <br>
&nbsp;&nbsp;&nbsp;Link connected to: another Router (point-to-point)        <br>
&nbsp;&nbsp;&nbsp;&nbsp;(Link ID) Neighboring Router ID: 6.6.6.6            <br> 
&nbsp;&nbsp;&nbsp;&nbsp;(Link Data) Router Interface address: 10.255.254.13 <br> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of MTID metrics: 0                     <br>      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS 0 Metrics: 1                        <br>           
&nbsp;&nbsp;&nbsp;                                                          <br>
&nbsp;&nbsp;&nbsp;Link connected to: a Stub Network                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;(Link ID) Network/subnet number: 10.255.254.12      <br> 
&nbsp;&nbsp;&nbsp;&nbsp;(Link Data) Network Mask: 255.255.255.252           <br> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of MTID metrics: 0                     <br>      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS 0 Metrics: 1                                    
</code></div>

<p>
Point-to-point links do not necessarily require IP addressing. IP unnumbered can 
be used. With IP unnumbered configuration, the IP address is borrowed from another 
interface of the router to represent the point-to-point link in the LSDB. In this 
scenario, the point-to-point link is represented in the LSDB with a single entry.
The following output shows an LSA of a point-to-point interface configured as IP 
unnumbered. 
</p>

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
<code>
R9#<b>show ip ospf database router self-originate</b> <br />
 . . . <br />
&nbsp;&nbsp;LS age: 543                                                       <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC)                                  <br />
&nbsp;&nbsp;LS Type: Router Links                                             <br />
&nbsp;&nbsp;Link State ID: 9.9.9.9                                            <br />
&nbsp;&nbsp;Advertising Router: 9.9.9.9                                       <br />
&nbsp;&nbsp;LS Seq Number: 80000007                                           <br />
&nbsp;&nbsp;Checksum: 0xA01E                                                  <br />
&nbsp;&nbsp;Length: 36                                                        <br />
&nbsp;&nbsp;Area Border Router                                                <br />
&nbsp;&nbsp;Number of Links: 1                                                <br />
&nbsp;&nbsp;                                                                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: another Router (point-to-point)    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link ID) Neighboring Router ID: 7.7.7.7        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link Data) Router Interface address: 0.0.0.10  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of MTID metrics: 0                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS 0 Metrics: 1                    <br />
</code></div>

<h3>Link Type 2: Transit Network</h3> 
<p>
Link Type 2 defines a transit network. 
For a transit network, neither the source nor the destination of the packets is 
on the link. Traffic on this link is in transit. A transit network indicates the 
presence of a Designated Router (DR) on the segment/link.
  <ul>
      <li><b>Link ID:</b> DR interface IP address.</li>
      <li><b>Link Data:</b> origin router interface IP address.</li> 
    </ul>
</p>
<p>
If the link ID and link data values are the same, then the advertising router is the DR. 
The subnet mask of a transit link is contained in a type 2 LSA that is advertised 
by the DR in that segment.

If the transit link has one neighbor and that neighbor becomes unavailable, the 
local router changes the type of link from transit to stub. Transit links imply 
the existence of a neighbor and that the network type is broadcast or non-broadcast.
</p>

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
<code>
R9#<b>show ip ospf database router self-originate</b> <br />
 . . . <br />
&nbsp;LS age: 1753                                                             <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC)                                   <br />
&nbsp;&nbsp;LS Type: Router Links                                              <br />
&nbsp;&nbsp;Link State ID: 9.9.9.9                                             <br />
&nbsp;&nbsp;Advertising Router: 9.9.9.9                                        <br />
&nbsp;&nbsp;LS Seq Number: 80000003                                            <br />
&nbsp;&nbsp;Checksum: 0xD15                                                    <br />
&nbsp;&nbsp;Length: 60                                                         <br />
&nbsp;&nbsp;Area Border Router                                                 <br />
&nbsp;&nbsp;Number of Links: 3                                                 <br />
&nbsp;&nbsp;                                                                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: a Transit Network                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link ID) Designated Router address: 10.255.1.36 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link Data) Router Interface address: 10.255.1.36<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of MTID metrics: 0                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS 0 Metrics: 1 <br />
       . . . 
</code></div>
   
    <h3>Link Type 3: Stub Network</h3> 
    <p>
    Link type 3 indicates a connection to a stub network. These are networks that 
    have no other OSPF device such as an access LAN. With a stub network, the 
    traffic in this segment is either originating from this segment or has its 
    destination in this segment.
    In addition, stub networks along with a point-to-point router LSA 
    describe the subnet that the point-to-point links occupy (Link type 1 LSA). 
   <ul>
      <li><b>Link ID:</b> network address</li>
      <li><b>Link Data:</b> subnet mask</li> 
    </ul>
    </p>
    <p>
  The following output shows a link type 3 router LSA in the LSDB:
  </p>
  
<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
<code>
R5#<b>sho ip ospf datab router self-originate</b>           <br />
&nbsp;&nbsp; ....                                                       <br />
&nbsp;&nbsp; LS age: 17                                                 <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC)                            <br />
&nbsp;&nbsp;LS Type: Router Links                                       <br />
&nbsp;&nbsp;Link State ID: 5.5.5.5                                      <br />
&nbsp;&nbsp;Advertising Router: 5.5.5.5                                 <br />
&nbsp;&nbsp;LS Seq Number: 80000008                                     <br />
&nbsp;&nbsp;Checksum: 0x3F34                                            <br />
&nbsp;&nbsp;Length: 96                                                  <br />
&nbsp;&nbsp;Number of Links: 6                                          <br />
&nbsp;&nbsp;                                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: a Stub Network                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link ID) Network/subnet number: 10.1.32.1               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link Data) Network Mask: 255.255.255.255                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of MTID metrics: 0                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS 0 Metrics: 1                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: a Stub Network                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link ID) Network/subnet number: 10.1.33.0               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link Data) Network Mask: 255.255.255.0                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of MTID metrics: 0                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS 0 Metrics: 1                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: a Stub Network                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link ID) Network/subnet number: 10.1.34.0               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link Data) Network Mask: 255.255.255.0                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of MTID metrics: 0                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS 0 Metrics: 1                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ....
</code></div>

  <h3>Link Type 4: Virtual Link</h3> 
  <p>
  Link type 4 indicates a virtual link. Virtual links are used to 
  connect OSPF areas that are unable to connect to the backbone area.
    <ul>
      <li><b>Link ID:</b> neighbor router ID.</li>
      <li><b>Link data:</b> connecting device IP address.</li>
    </ul>
  </p>
  <p>
  The following is the output of the LSDB showing an entry of the type 1 LSA with 
  link type 4:
  </p>

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
<code>
R1#<b>show ip ospf database router self-originate</b><br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (1.1.1.1) (Process ID 1)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Router Link States (Area 0.0.0.0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           <br>
&nbsp;&nbsp;LS age: 236                                                            <br>
&nbsp;&nbsp;Options: (No TOS-capability, DC)                                       <br>
&nbsp;&nbsp;LS Type: Router Links                                                  <br>
&nbsp;&nbsp;Link State ID: 1.1.1.1                                                 <br>
&nbsp;&nbsp;Advertising Router: 1.1.1.1                                            <br>
&nbsp;&nbsp;LS Seq Number: 80000004                                                <br>
&nbsp;&nbsp;Checksum: 0x78D1                                                       <br>
&nbsp;&nbsp;Length: 72                                                             <br>
&nbsp;&nbsp;Area Border Router                                                     <br>
&nbsp;&nbsp;AS Boundary Router                                                     <br>
&nbsp;&nbsp;Number of Links: 4                                                     <br>
&nbsp;&nbsp;                                                                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: a Virtual Link                          <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link ID) Neighboring Router ID: 8.8.8.8             <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link Data) Router Interface address: 10.255.254.1   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of MTID metrics: 0                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS 0 Metrics: 2                         <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                     <br>
&nbsp;&nbsp;&nbsp;&nbsp;Link connected to: a Transit Network                       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link ID) Designated Router address: 10.255.1.33     <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Link Data) Router Interface address: 10.255.1.33    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of MTID metrics: 0                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS 0 Metrics: 1                         <br>
</code></div>
<p>
A type 1 LSA link type 4 is sent in a unicast LSU with the source and destination IP 
addresses being the IP addresses of the virtual-link end points.
</p>
 <h3>Type 1 LSA Body</h3>
<p>
The Link ID value identifies the object that the link connects to, which could be: the router ID, 
IP address of the interface of the DR, network address.
</p>

<p>
Type 1 LSAs can be viewed by running the command: 
<code><b>show ip ospf database router</b></code>
</p>

<p>
The router LSA contains three different flags that indicate the role that a router 
has in a network:
  <ol>
    <li><b><a id="E_BIT">E Bit</a>:</b> used to indicate whether a device is a boundary router with
    another routing domain usually using redistribution.</li>
    <li><b>B Bit:</b> used to indicate whether a device is an area border router.</li>
    <li><b>V Bit:</b> usd to indicate whether a device is an end-point for a virtual-link. 
    A virtual-link implies an area border router.</li>
  </ol>
</p>

<p>
In multi-area OSPF domains the ABRs and ASBRs flip a bit in the OSPF packet (hello) to indicate their role as an ABR 
and/or ASBR.
</p>
<p>
In the global/VRF RIB, type 1 LSAs received from other routers in the same area appear as intra-area routers 
with the code "O"
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
  R1#<b>show ip ospf database router</b>                              <br />                                                        
&nbsp;                                                               <br />                                                      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            OSPF Router with ID (1.1.1.1) (Process ID 1)       <br />                                                      
&nbsp;                                                               <br />                                                      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                Router Link States (Area 0)                    <br />                                                      
&nbsp;                                                               <br />                                                      
&nbsp;  LS age: 73                                                   <br />                                                      
&nbsp;  Options: (No TOS-capability, DC)                             <br />                                                      
&nbsp;  LS Type: Router Links                                        <br />                                                      
&nbsp;  Link State ID: 1.1.1.1                                       <br />                                                      
&nbsp;  Advertising Router: 1.1.1.1                                  <br />                                                      
&nbsp;  LS Seq Number: 80000001                                      <br />                                                      
&nbsp;  Checksum: 0x8F5C                                             <br />                                                      
&nbsp;  Length: 48                                                   <br />                                                      
&nbsp;  Area Border Router                                           <br />                                                      
&nbsp;  AS Boundary Router                                           <br />                                                      
&nbsp;  Number of Links: 2                                           <br />                                                      
&nbsp;                                                               <br />                                                      
&nbsp;&nbsp;&nbsp;    Link connected to: a Transit Network                          <br />                                                      
&nbsp;&nbsp;&nbsp;&nbsp;     (Link ID) Designated Router address: 10.0.12.1                <br />                                                      
&nbsp;&nbsp;&nbsp;&nbsp;      (Link Data) Router Interface address: 10.0.12.1                 <br />                                                      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            Number of MTID metrics: 0                                <br />                                                      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       TOS 0 Metrics: 1                                        <br />                                                      
&nbsp;                                                               <br />                                                      
&nbsp;&nbsp;&nbsp;    Link connected to: a Stub Network                          <br />                                                      
&nbsp;&nbsp;&nbsp;&nbsp;     (Link ID) Network/subnet number: 10.0.16.0                <br />                                                      
&nbsp;&nbsp;&nbsp;&nbsp;     (Link Data) Network Mask: 255.255.255.252                 <br />                                                      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            Number of MTID metrics: 0                                <br />                                                      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       TOS 0 Metrics: 1                                        <br />                                                      
  <br />                                                                                                                   
  <br />                                                                                                                   
  <br />
&nbsp;   Adv Router is not-reachable in topology Base with MTID 0        <br />
&nbsp;  LS age: 2                                                        <br />
&nbsp;  Options: (No TOS-capability, DC)                                 <br />
&nbsp;  LS Type: Router Links                                            <br />
&nbsp;  Link State ID: 2.2.2.2                                           <br />
&nbsp;  Advertising Router: 2.2.2.2                                      <br />
&nbsp;  LS Seq Number: 80000002                                          <br />
&nbsp;  Checksum: 0xA7BD                                                 <br />
&nbsp;  Length: 60                                                       <br />
&nbsp;  Number of Links: 3                                               <br />
&nbsp;                                                                   <br />
&nbsp;&nbsp;&nbsp;    Link connected to: a Stub Network                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     (Link ID) Network/subnet number: 10.0.210.1                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     (Link Data) Network Mask: 255.255.255.255                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             Number of MTID metrics: 0                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        TOS 0 Metrics: 1                                            <br />
&nbsp;                                                                   <br />
&nbsp;&nbsp;&nbsp;    Link connected to: a Transit Network                           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     (Link ID) Designated Router address: 10.0.12.1                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     (Link Data) Router Interface address: 10.0.12.2               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             Number of MTID metrics: 0                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        TOS 0 Metrics: 100                                          <br />
&nbsp;                                                                   <br />
&nbsp;&nbsp;&nbsp;    Link connected to: a Stub Network                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     (Link ID) Network/subnet number: 10.0.26.0                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     (Link Data) Network Mask: 255.255.255.252                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;             Number of MTID metrics: 0                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        TOS 0 Metrics: 10                                           <br />
<br />                                                                                                                   
  <br />                                                                                                                   
  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                Router Link States (Area 10) <br />                                                                         
  <br />                                                                                                                   
&nbsp;  LS age: 73<br />                                                                                                         
&nbsp;  Options: (No TOS-capability, DC) <br />                                                                                  
&nbsp;  LS Type: Router Links <br />                                                                                             
&nbsp;  Link State ID: 1.1.1.1 <br />                                                                                            
&nbsp;  Advertising Router: 1.1.1.1 <br />                                                                                       
&nbsp;  LS Seq Number: 80000001 <br />                                                                                           
&nbsp;  Checksum: 0x3FC3 <br />                                                                                                  
&nbsp;  Length: 36  <br />                                                                                                       
&nbsp;  Area Border Router <br />                                                                                                
&nbsp;  AS Boundary Router       <br />                                                                                          
&nbsp;  Number of Links: 1 <br />                                                                                                
<br />                                                                                                                     
&nbsp;&nbsp;&nbsp;    Link connected to: a Stub Network <br />                                                                               
&nbsp;&nbsp;&nbsp;&nbsp;     (Link ID) Network/subnet number: 10.10.13.0 <br />                                                                    
&nbsp;&nbsp;&nbsp;&nbsp;     (Link Data) Network Mask: 255.255.255.252 <br />                                                                      
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Number of MTID metrics: 0 <br />                                                                                     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;       TOS 0 Metrics: 1                                                                                              
                                                                                                                     
</code>
</div>

<h2 id="TYPE2_LSA">Type 2 LSA Network</h2>
<p> 
The DR is the only router on a multi-access segment that advertises the type 2 LSA. 
A type 2 LSA identifies all the routers attached to that network segment. This 
shared network segment is of broadcast and non-broadcast type. The flooding 
scope for a type 2 LSA is an area.
The type 2 LSA lists the routers that are adjacent to the DR. When a DR is not used, this 
type of information is listed in a Type 1 LSA. It is important to note that 
type 2 LSA does not propage prefix information.
</p>
<p>
It is used to reduce redundant information in database and flooding scalability issues. 
Type 1 LSAs (link type 2) advertise transit networks without subnet mask information. Type 2 
LSAs include subnet mask information for transit links. The DR advertises its 
IP address, subnet mask and attached routers including itself.
If a DR is not elected, a type 2 LSA is not present. To view type 2 LSAs: 
issue the privileged command: 
<code><b>show ip ospf database network</b></code>
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>

R9#<b>show ip ospf database network self-originate</b>             <br>      
&nbsp;&nbsp;                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (9.9.9.9) (Process ID 9)           <br>
&nbsp;&nbsp;                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Net Link States (Area 0.0.0.0)                     <br>
&nbsp;&nbsp;                                                                 <br>
&nbsp;&nbsp;Routing Bit Set on this LSA in topology Base with MTID 0         <br>
&nbsp;&nbsp;LS age: 1925                                                     <br>
&nbsp;&nbsp;Options: (No TOS-capability, DC)                                 <br>
&nbsp;&nbsp;LS Type: Network Links                                           <br>
&nbsp;&nbsp;Link State ID: 10.255.1.6 (address of Designated Router)         <br>
&nbsp;&nbsp;Advertising Router: 9.9.9.9                                      <br>
&nbsp;&nbsp;LS Seq Number: 80000003                                          <br>
&nbsp;&nbsp;Checksum: 0x16C7                                                 <br>
&nbsp;&nbsp;Length: 32                                                       <br>
&nbsp;&nbsp;Network Mask: /30                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attached Router: 9.9.9.9                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attached Router: 1.1.1.1                                   <br>
&nbsp;&nbsp;                                                                 <br>
&nbsp;&nbsp;Routing Bit Set on this LSA in topology Base with MTID 0         <br>
&nbsp;&nbsp;LS age: 1925                                                     <br>
&nbsp;&nbsp;Options: (No TOS-capability, DC)                                 <br>
&nbsp;&nbsp;LS Type: Network Links                                           <br>
&nbsp;&nbsp;Link State ID: 10.255.1.36 (address of Designated Router)        <br>
&nbsp;&nbsp;Advertising Router: 9.9.9.9                                      <br>
&nbsp;&nbsp;LS Seq Number: 80000004                                          <br>
&nbsp;&nbsp;Checksum: 0x5A4C                                                 <br>
&nbsp;&nbsp;Length: 40                                                       <br>
&nbsp;&nbsp;Network Mask: /29                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attached Router: 9.9.9.9                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attached Router: 1.1.1.1                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attached Router: 2.2.2.2                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attached Router: 3.3.3.3                                   <br>
&nbsp;&nbsp;                                                                 <br>
&nbsp;&nbsp;                                                                 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Net Link States (Area 10)                          <br>
&nbsp;&nbsp;                                                                 <br>
&nbsp;&nbsp;Routing Bit Set on this LSA in topology Base with MTID 0         <br>
&nbsp;&nbsp;LS age: 1467                                                     <br>
&nbsp;&nbsp;Options: (No TOS-capability, DC)                                 <br>
&nbsp;&nbsp;LS Type: Network Links                                           <br>
&nbsp;&nbsp;Link State ID: 10.255.254.9 (address of Designated Router)       <br>
&nbsp;&nbsp;Advertising Router: 9.9.9.9                                      <br>
&nbsp;&nbsp;LS Seq Number: 80000001                                          <br>
&nbsp;&nbsp;Checksum: 0xD5E4                                                 <br>
&nbsp;&nbsp;Length: 32                                                       <br>
&nbsp;&nbsp;Network Mask: /30                                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attached Router: 9.9.9.9                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attached Router: 10.10.10.10                               <br>
&nbsp;&nbsp;                                                                 
R9#                                                                
 </code>
</div>

<p>
The following information is contained in a Type 2 LSA:
<ul>
  <li><b>Link state ID:</b> IP address of the DR interface in the segment.</li>
  <li><b>Advertising Router:</b>  RID of the DR.</li>
</ul>
The Type 2 LSA body contains the following:
<ul>
  <li><b>Network mask:</b> usd to indicate the specific addresses that are included 
  within the advertisement.</li>
  <li><b>Attached routers:</b> lists all the devices that are fully adjacent with 
  the DR.
</ul>
</p>

<p>
Type 1 and type 2 LSAs are used for building the routing topology within an area.
</p>

<h2 id="TYPE3_LSA">Type 3 LSA - Summary</h2>
<p>
Type 3 LSAs are generated by an area border router(ABR) and flooded into another 
area. ABRs act as a sort of default gateway between the backbone area and a neighboring 
non-backbone area. Type 3 LSAs contain networks that are reachable in other areas 
through the ABR based on info from type 1, type 2, and type 3 LSAs. Type 3 
LSAs include the route cost but hide the ABR's actual path to the destination.

One type 3 LSA is generated per prefix. If a type 1 LSA contains five  
prefixes, the ABR will create five type 3 LSAs with one for each prefix.
</p>
<p>
When a network change occurs in an area, SPF is not run for ABR advertised type 
3 LSA routes. This is because the ABR has already run SPF for those routes 
(in their origin area) from itself to the origin routers when they were received 
as type 1 LSAs. Additionally, the local routers have already run SPF for the route
from themselves to the ABR. LSA type 3 are used to advertise summaries of link 
state information to other areas. 
</p>
<p>
ABRs follow three fundamental rules when creating type 3 LSAs:
<ol>
  <li>Type 1 LSAs received from any area, the ABR creates a type 3 LSA for the 
  backbone area and non-backbone area.
  <li>Type 3 LSAs received from area 0, the ABR creates a new type 3 LSA for only
  non-backbone areas.
  <li>Type 3 LSAs received from a non-backbone area are only inserted into the
  LSDB of the origin area. ABRs do not create a type 3 LSA for the other areas 
  (including a segmented area 0). This enforces the two-tier hierarchy of OSPF.
</ol>

The advertising router for a type 3 LSA is the last ABR that advertises the prefix.
</p>

<p>
LSA types 1,2 do not cross borders to other areas. An ABR extracts prefix information
from type 1 and type 2 LSAs and inserts them into a type 3 LSA for advertisement 
into another area. 
 
If an ABR receives a type 3 LSA (sourced from a non-backbone area and injected to
the backbone area), it changes the advertising router to itself and forwards the 
LSA to the second non-backbone area. Unlike a type 5 LSA, a Type 3 LSA is 
modified at every ABR.

 
A type 3 LSA is advertised into the neighboring area by the ABR. If a second ABR 
is to advertise the type 3 LSA into 
a third area (after receiving it through the backbone), only the advertising 
router field is updated by the second ABR.

To view type 3 LSAs, issue the following command: 
<code><b>show ip ospf database summary</b></code>.
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
 R2#<b>show ip ospf database summary</b> <br />
                                                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            OSPF Router with ID (2.2.2.2) (Process ID 2)            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                    <br />
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                Summary Net Link States (Area 0)                    <br />
&nbsp;                                                                    <br />
&nbsp;  Routing Bit Set on this LSA in topology Base with MTID 0          <br />
&nbsp;  LS age: 69                                                        <br />
&nbsp;  Options: (No TOS-capability, DC, Upward)                          <br />
&nbsp;  LS Type: Summary Links(Network)                                   <br />
&nbsp;  Link State ID: 10.7.7.0 (summary Network Number)                  <br />
&nbsp;  Advertising Router: 6.6.6.6                                       <br />
&nbsp;  LS Seq Number: 80000002                                           <br />
&nbsp;  Checksum: 0xE820                                                  <br />
&nbsp;  Length: 28                                                        <br />
&nbsp;  Network Mask: /29                                                 <br />
&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      MTID: 0 &nbsp; &nbsp;&nbsp;        Metric: 10                                  <br />
&nbsp;                                                                    <br />
&nbsp;  Routing Bit Set on this LSA in topology Base with MTID 0          <br />
&nbsp;  LS age: 172                                                       <br />
&nbsp;  Options: (No TOS-capability, DC, Upward)                          <br />
&nbsp;  LS Type: Summary Links(Network)                                   <br />
&nbsp;  Link State ID: 10.10.13.0 (summary Network Number)                <br />
&nbsp;  Advertising Router: 1.1.1.1                                       <br />
&nbsp;  LS Seq Number: 80000003                                           <br />
&nbsp;  Checksum: 0xD443                                                  <br />
&nbsp;  Length: 28                                                        <br />
&nbsp;  Network Mask: /30                                                 <br />
&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      MTID: 0   &nbsp; &nbsp;&nbsp;      Metric: 1                                   <br />
&nbsp;                                                                    <br />
&nbsp;  Routing Bit Set on this LSA in topology Base with MTID 0          <br />
&nbsp;  LS age: 1571                                                      <br />
&nbsp;  Options: (No TOS-capability, DC, Upward)                          <br />
&nbsp;  LS Type: Summary Links(Network)                                   <br />
&nbsp;  Link State ID: 10.10.31.1 (summary Network Number)                <br />
&nbsp;  Advertising Router: 1.1.1.1                                       <br />
&nbsp;  LS Seq Number: 80000001                                           <br />
&nbsp;  Checksum: 0x24DE                                                  <br />
&nbsp;  Length: 28                                                        <br />
&nbsp;  Network Mask: /32                                                 <br />
&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      MTID: 0   &nbsp;&nbsp;&nbsp;      Metric: 2                                   <br />
&nbsp;                                                                    <br />
&nbsp;  Routing Bit Set on this LSA in topology Base with MTID 0          <br />
&nbsp;  LS age: 1571                                                      <br />
&nbsp;  Options: (No TOS-capability, DC, Upward)                          <br />
&nbsp;  LS Type: Summary Links(Network)                                   <br />
&nbsp;  Link State ID: 10.10.34.0 (summary Network Number)                <br />
&nbsp;  Advertising Router: 1.1.1.1                                       <br />
&nbsp;  LS Seq Number: 80000001                                           <br />
&nbsp;  Checksum: 0xFA09                                                  <br />
&nbsp;  Length: 28                                                        <br />
&nbsp;  Network Mask: /30                                                 <br />
&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      MTID: 0 &nbsp; &nbsp;&nbsp;        Metric: 2
&nbsp;
</code>
</div>

<p>
The following is a Wireshark packet capture of a Type 3 LSA:
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
&#8900;LSA-type 3 (Summary-LSA (IP network)), len 28                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 1010 1110 = LS Age (seconds): 174               <br />
&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No           <br />
&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (IP network) (3)                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 10.255.1.24                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 1.1.1.1                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000005                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xce48                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;Netmask: 255.255.255.248                                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;TOS: 0                                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;Metric: 2
</code></div>

<p>
A type 3 LSA contains the following information:
<ul>
  <li><b>Link state ID:</b> the advertised summary network</li>
  <li><b>Advertising Router:</b> RID of the last ABR advertising the LSA.</li>
  <li><b>Netmask:</b> subnet mask value for the summary network.</li>
</ul>

 Type 3 LSAs appear as inter-area routes with the code "O IA" in the global / 
 VRF RIB. 
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R2#<b>show ip route ospf</b>                                                           <br />
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E1 - OSPF external type 1, E2 - OSPF external type 2                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ia - IS-IS inter area, * - candidate default, U - per-user static route  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ - replicated route, % - next hop override                              <br />
                                                                                <br />
Gateway of last resort is not set                                               <br />
                                                                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.0.0/8 is variably subnetted, 11 subnets, 4 masks                     <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.16.0/30 [110/101] via 10.0.12.1, 00:57:46, GigabitEthernet0/0     <br />
<span style="background-color:#DCDCDC">
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.7.7.0/29 [110/20] via 10.0.26.2, 00:47:06, GigabitEthernet1/0       <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.10.13.0/30 [110/101] via 10.0.12.1, 00:57:46, GigabitEthernet0/0    <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.10.31.1/32 [110/102] via 10.0.12.1, 00:42:34, GigabitEthernet0/0    <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.10.34.0/30 [110/102] via 10.0.12.1, 00:42:34, GigabitEthernet0/0    <br />
</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.0.0/30 is subnetted, 1 subnets                                     <br />
O E2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.45.0 [110/20] via 10.0.12.1, 00:19:44, GigabitEthernet0/0       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.31.0.0/24 is subnetted, 3 subnets                                     <br />
O E2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.31.10.0 [110/20] via 10.0.12.1, 00:19:35, GigabitEthernet0/0       <br />
O E2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.31.11.0 [110/20] via 10.0.12.1, 00:19:35, GigabitEthernet0/0       <br />
O E2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.31.12.0 [110/20] via 10.0.12.1, 00:19:35, GigabitEthernet0/0       <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.6.0/24 [110/20] via 10.0.26.2, 00:47:06, GigabitEthernet1/0       <br />
</code>
</div>


<h2 id="TYPE5_LSA">Type 5 External LSA</h2>
<p>
Type 5 LSAs are used to advertise prefixes that were redistributed from another 
routing domain i.e., redistributed external routes.
Type 5 LSAs are generated by an Autonomous-System Boundary Router (ASBR) to advertise 
the routes that the ASBR is redistributing. Type 5 LSAs are flooded  
throughout the OSPF domain to non-stubby areas. Only the LSAge parameter is 
modified during this flooding. 
Type 5 LSAs do not belong to any specific area. In the LSDB, type 5 LSAs are listed at 
the bottom of the output and are not associated with any area.
</p>
<p>
Fields included with an external LSA:
<ul>
  <li><b>Network mask:</b> indicates specific advertised addresses.</li> 
  <li><b>Metric:</b> Indicates the cost to reach the destination. Its calculation 
  and use is determined by the external metric type bit.</li>
  <li><b>External metric type:</b> determines metric interpretation and calculation.
  two available types include:
    <ol>
      <li><b>Type 1:</b> advertises a route with a seed metric. OSPF then adds to 
      it.</li>
      <li><b>Type 2:</b> advertises a route with a static cost. This cost does 
      not change within the OSPF network. This metric type is the default Type 5 
      LSA with most vendors. It most often works fine with a single connection 
      point. If there are multiple connection points, the Type 1 external metric 
      type is preferred.</li>
    </ol>
  </li>
  <li><b>Forwarding address:</b> indicates where traffic is forwarded to reach 
  the advertised destination. Often set to 0.0.0.0 indicating a destination of LSA 
  source i.e., the originator of the LSA should be forwarded the traffic.</li>
</ul>
</p>
 <p>
Type 5 LSAs can be viewed in greater detail using the privileged mode command: 
<code><b>show ip ospf database external</b></code>.
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>       
R8#<b>show ip ospf database external</b>                        <br />
&nbsp;&nbsp;                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (8.8.8.8) (Process ID 8)        <br />
&nbsp;&nbsp;                                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type-5 AS External Link States                  <br />
&nbsp;&nbsp;                                                              <br />
&nbsp;&nbsp;Routing Bit Set on this LSA in topology Base with MTID 0      <br />
&nbsp;&nbsp;LS age: 1218                                                  <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                      <br />
&nbsp;&nbsp;LS Type: AS External Link                                     <br />
&nbsp;&nbsp;Link State ID: 172.30.0.0 (External Network Number )          <br />
&nbsp;&nbsp;Advertising Router: 11.11.11.11                               <br />
&nbsp;&nbsp;LS Seq Number: 80000002                                       <br />
&nbsp;&nbsp;Checksum: 0x6C3C                                              <br />
&nbsp;&nbsp;Length: 36                                                    <br />
&nbsp;&nbsp;Network Mask: /24                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0                                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 20                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forward Address: 0.0.0.0                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;External Route Tag: 0                                   <br />
&nbsp;&nbsp;                                                              <br />
&nbsp;&nbsp;Routing Bit Set on this LSA in topology Base with MTID 0      <br />
&nbsp;&nbsp;LS age: 1218                                                  <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                      <br />
&nbsp;&nbsp;LS Type: AS External Link                                     <br />
&nbsp;&nbsp;Link State ID: 172.30.1.0 (External Network Number )          <br />
&nbsp;&nbsp;Advertising Router: 11.11.11.11                               <br />
&nbsp;&nbsp;LS Seq Number: 80000002                                       <br />
&nbsp;&nbsp;Checksum: 0x6146                                              <br />
&nbsp;&nbsp;Length: 36                                                    <br />
&nbsp;&nbsp;Network Mask: /24                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0                                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 20                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forward Address: 0.0.0.0                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;External Route Tag: 0                                   <br />
&nbsp;&nbsp;                                                              <br />
&nbsp;&nbsp;Routing Bit Set on this LSA in topology Base with MTID 0      <br />
&nbsp;&nbsp;LS age: 1218                                                  <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                      <br />
&nbsp;&nbsp;LS Type: AS External Link                                     <br />
&nbsp;&nbsp;Link State ID: 172.30.2.0 (External Network Number )          <br />
&nbsp;&nbsp;Advertising Router: 11.11.11.11                               <br />
&nbsp;&nbsp;LS Seq Number: 80000002                                       <br />
&nbsp;&nbsp;Checksum: 0x5650                                              <br />
&nbsp;&nbsp;Length: 36                                                    <br />
&nbsp;&nbsp;Network Mask: /24                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0                                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 20                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forward Address: 0.0.0.0                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;External Route Tag: 0                                   <br />
&nbsp;&nbsp;                                                              <br />
&nbsp;&nbsp;Routing Bit Set on this LSA in topology Base with MTID 0      <br />
&nbsp;&nbsp;LS age: 1218                                                  <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                      <br />
&nbsp;&nbsp;LS Type: AS External Link                                     <br />
&nbsp;&nbsp;Link State ID: 172.30.3.0 (External Network Number )          <br />
&nbsp;&nbsp;Advertising Router: 11.11.11.11                               <br />
&nbsp;&nbsp;LS Seq Number: 80000002                                       <br />
&nbsp;&nbsp;Checksum: 0x4B5A                                              <br />
&nbsp;&nbsp;Length: 36                                                    <br />
&nbsp;&nbsp;Network Mask: /24                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0                                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 20                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forward Address: 0.0.0.0                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;External Route Tag: 0                                   <br />
&nbsp;&nbsp;                                                              <br />
&nbsp;&nbsp;Routing Bit Set on this LSA in topology Base with MTID 0      <br />
&nbsp;&nbsp;LS age: 1218                                                  <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                      <br />
&nbsp;&nbsp;LS Type: AS External Link                                     <br />
&nbsp;&nbsp;Link State ID: 172.255.255.0 (External Network Number )       <br />
&nbsp;&nbsp;Advertising Router: 11.11.11.11                               <br />
&nbsp;&nbsp;LS Seq Number: 80000002                                       <br />
&nbsp;&nbsp;Checksum: 0xC306                                              <br />
&nbsp;&nbsp;Length: 36                                                    <br />
&nbsp;&nbsp;Network Mask: /30                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0                                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 20                                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forward Address: 0.0.0.0                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;External Route Tag: 0                                   <br />
&nbsp;&nbsp;                                                              <br />
R8#

</code>
</div>

<p>
By default, external routes are redistributed as type 2 external routes (with 
code "O E2") with a metric of 20.
A type 5 LSA includes a forwarding address field that directs where traffic 
should be routed towards to reach the advertised link. Usually, this is the ASBR 
but it could be set to another router in some designs. A route tag is included in this LSA.

A forwarding address of 0.0.0.0 implies that traffic to the external routes should be forwarded to the ASBR that is 
the advertising router for the external routes. If the forwarding address is not 0.0.0.0, 
and this address is not configured on the advertising router, then one implication 
is that the advertising router is implementing Type 7 to Type 5 LSA translation and 
is there an ABR to an NSSA area. In this case, this ABR will double as an ASBR because of the type 7/type 5 LSA translation.
</p>
<p>
From the routing table, type 5 LSAs have the code "O E1" or "O E2" to denote 
OSPF external type 1 LSA and external type 2 LSAs respectively.
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>                                                                                                              

R8#<b>show ip route ospf</b>                                                    <br />
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E1 - OSPF external type 1, E2 - OSPF external type 2                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ia - IS-IS inter area, * - candidate default, U - per-user static route  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ - replicated route, % - next hop override                              <br />
                                                                                <br />
Gateway of last resort is not set                                               <br />
                                                                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.0.0/8 is variably subnetted, 36 subnets, 6 masks                     <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.1.0/24 [110/4] via 10.255.2.9, 01:34:59, GigabitEthernet1/0       <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.2.0/24 [110/4] via 10.255.2.9, 01:15:26, GigabitEthernet1/0       <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.3.0/24 [110/4] via 10.255.2.9, 01:15:16, GigabitEthernet1/0       <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.4.0/24 [110/4] via 10.255.2.9, 01:15:16, GigabitEthernet1/0       <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.2.8.0/24 [110/2] via 10.255.2.9, 01:12:44, GigabitEthernet1/0       <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.2.9.0/24 [110/2] via 10.255.2.9, 01:12:44, GigabitEthernet1/0       <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.2.10.0/24 [110/2] via 10.255.2.9, 01:12:34, GigabitEthernet1/0      <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.3.1.0/24 [110/6] via 10.255.2.9, 01:11:59, GigabitEthernet1/0       <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.3.2.0/24 [110/6] via 10.255.2.9, 01:11:55, GigabitEthernet1/0       <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.3.3.1/32 [110/6] via 10.255.2.9, 01:30:32, GigabitEthernet1/0       <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.3.4.0/23 [110/6] via 10.255.2.9, 01:11:06, GigabitEthernet1/0       <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.0/30 [110/3] via 10.255.2.9, 01:34:59, GigabitEthernet1/0     <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.4/30 [110/4] via 10.255.2.9, 01:34:59, GigabitEthernet1/0     <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.8/30 [110/3] via 10.255.2.9, 01:34:59, GigabitEthernet1/0     <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.16/30 [110/4] via 10.255.2.9, 01:34:59, GigabitEthernet1/0    <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.24/29 [110/3] via 10.255.2.9, 01:34:59, GigabitEthernet1/0    <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.28/30 [110/4] via 10.255.2.9, 01:34:59, GigabitEthernet1/0    <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.32/29 [110/3] via 10.255.2.9, 01:34:59, GigabitEthernet1/0    <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.2.0/30 [110/2] via 10.255.2.9, 01:50:45, GigabitEthernet1/0     <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.3.0/30 [110/5] via 10.255.2.9, 01:30:32, GigabitEthernet1/0     <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.254.0/30 [110/11] via 10.255.2.5, 01:50:40, GigabitEthernet0/0  <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.254.4/30                                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  [110/1563] via 10.255.2.5, 01:50:40, GigabitEthernet0/0              <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.254.8/30 [110/4] via 10.255.2.9, 01:34:59, GigabitEthernet1/0   <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.255.254.12/30 [110/2] via 10.255.2.9, 03:50:43, GigabitEthernet1/0  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.0.0/24 is subnetted, 4 subnets                                     <br />
O E2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.0.0 [110/20] via 10.255.2.9, 01:00:46, GigabitEthernet1/0       <br />
O E2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.1.0 [110/20] via 10.255.2.9, 01:00:46, GigabitEthernet1/0       <br />
O E2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.2.0 [110/20] via 10.255.2.9, 01:00:46, GigabitEthernet1/0       <br />
O E2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.3.0 [110/20] via 10.255.2.9, 01:00:46, GigabitEthernet1/0       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.255.0.0/30 is subnetted, 1 subnets                                    <br />
O E2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.255.255.0 [110/20] via 10.255.2.9, 01:00:46, GigabitEthernet1/0    <br />

</code>
</div>

<h3>External Type 1 vs Type 2 </h3>
External routes are classified as type 1 or type 2. The main differences between 
type 1 and type 2 external OSPF routes are as follows:
<ul> 
  <li>The type 1 metric equals the redistribution metric plus the total path metric to the ASBR. In other
words, as the LSA propagates away from the originating ASBR, the metric increases.
  <li>The type 2 metric equals only the redistribution metric (by default 20). The metric is the same for the router next to
the ASBR as the router 30 hops away from the originating ASBR. This is the default external metric
type used by OSPF.
</ul>
When making a path selection decision, an external type 1 path is preferred to 
an external type 2 path. If there's a tie in type 2 routes, then the cost 
to reach the ASBR (forwarding metric) is the tie-breaker.
</p>
<p>
When making design considerations on whether to configure external routes as 
external type 1 or type 2 routes: 
<ul>
  <li>If the external metric is more important than the internal metric, then 
  choose type 2 metric.</li> 
  <li>External type 2 metric can also be used if there is only one redistribution 
point for the specific redistributed prefixes. </li>
  <li>Use external type 1 metric if the internal metric is more important to the 
  external redistribution metric.</li>
</ul>
</p>
<!--
<p>
If more than one ABR is connected to the same external non-OSPF domain, only 
one ABR gets selected to perform the generation of Type 5 LSAs/Type 7 LSAs. This 
selected ASBR is the router with the highest RID.
</p>
-->

<h2 id="TYPE4_LSA">Type 4 LSA (ASBR-Summary)</h2>
<p>
Type 4 LSAs are generated by the ABR of the area with ASBR(s). Type 4 LSAs 
provide a way for routers to locate the ASBR when the router is in a different 
area from the ASBR. They provide information on the ABR's reachability to the 
ASBR in other areas. It includes the cost but does not include the ABR's actual 
path to the destination. SPF is not run for type 4 LSAs when a network change 
occurs.

It is created by the first ABR in the area where the ASBR is resident and provides 
a summary route strictly for the ASBR of a type 5 LSA. 
</p>
<p>
The ASBR generates a type 1 LSA with a flipped <a href="#E_BIT">E-bit</a> to identify as an ASBR. ABRs 
in the same area as the ASBR will notice the flipped bit triggering the 
 generation of type 4 LSA to enable routers forward traffic to external networks 
 towards the ASBR. Type 4 LSAs have the advertising router field updated by the 
 ABR as the advertising router.
</p>

<p>
The structure of type 3 and type 4 LSAs are identical. The only difference is 
how the information is populated. The LS ID is set to the ASBR router-ID. The 
network mask is set to 0.0.0.0 indicating that a single address is being advertised.
</p>
<p>
To view type 4 LSAs: <code><b>show ip ospf database asbr-summary</b></code>
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R8#<b>show ip ospf database asbr-summary</b>                   <br />
&nbsp;&nbsp;                                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (8.8.8.8) (Process ID 8)       <br />
&nbsp;&nbsp;                                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Summary ASB Link States (Area 7)               <br />
&nbsp;&nbsp;                                                             <br />
&nbsp;&nbsp;Routing Bit Set on this LSA in topology Base with MTID 0     <br />
&nbsp;&nbsp;LS age: 3345                                                 <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                     <br />
&nbsp;&nbsp;LS Type: Summary Links(AS Boundary Router)                   <br />
&nbsp;&nbsp;Link State ID: 11.11.11.11 (AS Boundary Router address)      <br />
&nbsp;&nbsp;Advertising Router: 1.1.1.1                                  <br />
&nbsp;&nbsp;LS Seq Number: 80000001                                      <br />
&nbsp;&nbsp;Checksum: 0x7594                                             <br />
&nbsp;&nbsp;Length: 28                                                   <br />
&nbsp;&nbsp;Network Mask: /0                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 2                              <br />
&nbsp;&nbsp;                                                             <br />
&nbsp;&nbsp;Routing Bit Set on this LSA in topology Base with MTID 0     <br />
&nbsp;&nbsp;LS age: 1399                                                 <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                     <br />
&nbsp;&nbsp;LS Type: Summary Links(AS Boundary Router)                   <br />
&nbsp;&nbsp;Link State ID: 11.11.11.11 (AS Boundary Router address)      <br />
&nbsp;&nbsp;Advertising Router: 2.2.2.2                                  <br />
&nbsp;&nbsp;LS Seq Number: 80000002                                      <br />
&nbsp;&nbsp;Checksum: 0x5FA4                                             <br />
&nbsp;&nbsp;Length: 28                                                   <br />
&nbsp;&nbsp;Network Mask: /0                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 3                              <br />
&nbsp;&nbsp;                                                             <br />
&nbsp;&nbsp;LS age: 1461                                                 <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                     <br />
&nbsp;&nbsp;LS Type: Summary Links(AS Boundary Router)                   <br />
&nbsp;&nbsp;Link State ID: 11.11.11.11 (AS Boundary Router address)      <br />
&nbsp;&nbsp;Advertising Router: 9.9.9.9                                  <br />
&nbsp;&nbsp;LS Seq Number: 80000002                                      <br />
&nbsp;&nbsp;Checksum: 0x8266                                             <br />
&nbsp;&nbsp;Length: 28                                                   <br />
&nbsp;&nbsp;Network Mask: /0                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 2                              <br />
&nbsp;&nbsp;                                                             <br />
R8#
</code>
</div>
<p>
The following output shows a Wireshark packet capture of an LSU containing a 
type 4 LSA.
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
&raquo; Frame 9166: 90 bytes on wire (720 bits), 90 bytes captured (720 bits) on interface -, id 0     <br />
&raquo; Ethernet II, Src: ca:05:06:30:00:38 (ca:05:06:30:00:38), Dst: IPv4mcast_05 (01:00:5e:00:00:05) <br />
&raquo; Internet Protocol Version 4, Src: 10.255.254.14, Dst: 224.0.0.5                                <br />
&#8900; Open Shortest Path First                                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;OSPF Header                                                                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version: 2                                                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Message Type: LS Update (4)                                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Packet Length: 56                                                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source OSPF Router: 6.6.6.6                                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area ID: 0.0.0.7                                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xa4f9 [correct]                                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Type: Null (0)                                                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Auth Data (none): 0000000000000000                                                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;LS Update Packet                                                                           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of LSAs: 1                                                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LSA-type 4 (Summary-LSA (ASBR)), len 28                                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.000 0000 0000 0011 = LS Age (seconds): 3                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... .... .... = Do Not Age Flag: 0                                           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options: 0x22, (DC) Demand Circuits, (E) External Routing                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0... .... = DN: Not set                                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.0.. .... = O: Not set                                                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..1. .... = (DC) Demand Circuits: Supported                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...0 .... = (L) LLS Data block: Not Present                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... 0... = (N) NSSA: Not supported                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... .0.. = (MC) Multicast: Not capable                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ..1. = (E) External Routing: Capable                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.... ...0 = (MT) Multi-Topology Routing: No                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LS Type: Summary-LSA (ASBR) (4)                                                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link State ID: 11.11.11.11                                                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Advertising Router: 9.9.9.9                                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequence Number: 0x80000002                                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0x8266                                                                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length: 28                                                                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Netmask: 0.0.0.0                                                                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS: 0                                                                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 2
</code></div>

<p>
The type 4 LSA does not contain prefix information but router ID information on how the ASBR 
can be accessed from another area. Therefore, type 4 LSA information does not appear in the RIB.
</p>

<h2 id="TYPE7_LSA">Type 7 LSA NSSA</h2>
<p>
Stubby areas prevent type 5 LSA propagation. Route redistribution is therefore 
not possible in a stubby area.
However, local redistribution can be implemented in a not-so-stubby area (NSSA) 
while still preventing type 5 LSAs from being propagated into the NSSA. An NSSA 
is a stubby area that is tweaked to permit redistribution through a type 7 LSA
while still enforcing the filtering of type 5 LSAs.
</p>
<p>
An ASBR advertises networks external to OSPF into NSSA as type 7 LSAs. Type 7 
LSAs cannnot be advertised outside the NSSA. This LSA includes a route tag.
The ASBR advertises the type 7 LSA with the P-bit set. This P-bit instructs the 
ABR of the NSSA to convert the type 7 LSA to a type 5 LSA. This makes the ABR have dual 
role of ABR and ASBR for other areas. This second ABR generates a type 4 LSA. 
To view type 7 LSAs: <code><b>show ip ospf database nssa-external</b></code>
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R3#<b>show ip ospf database nssa-external </b>                                 <br />
&nbsp;                                                                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (3.3.3.3) (Process ID 3)                 <br />
&nbsp;                                                                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type-7 AS External Link States (Area 10)                 <br />
&nbsp;                                                                         <br />
&nbsp;  Routing Bit Set on this LSA in topology Base with MTID 0               <br />
&nbsp;  LS age: 415                                                            <br />
&nbsp;  Options: (No TOS-capability, Type 7/5 translation, DC, Upward)         <br />
&nbsp;  LS Type: AS External Link                                              <br />
&nbsp;  Link State ID: 172.30.45.0 (External Network Number )                  <br />
&nbsp;  Advertising Router: 4.4.4.4                                            <br />
&nbsp;  LS Seq Number: 80000006                                                <br />
&nbsp;  Checksum: 0x5EF5                                                       <br />
&nbsp;  Length: 36                                                             <br />
&nbsp;  Network Mask: /30                                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 20                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forward Address: 10.10.34.2                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;External Route Tag: 0                                            <br />
&nbsp;                                                                         <br />
&nbsp;  Routing Bit Set on this LSA in topology Base with MTID 0               <br />
&nbsp;  LS age: 414                                                            <br />
&nbsp;  Options: (No TOS-capability, Type 7/5 translation, DC, Upward)         <br />
&nbsp;  LS Type: AS External Link                                              <br />
&nbsp;  Link State ID: 172.31.10.0 (External Network Number )                  <br />
&nbsp;  Advertising Router: 4.4.4.4                                            <br />
&nbsp;  LS Seq Number: 80000006                                                <br />
&nbsp;  Checksum: 0xE68C                                                       <br />
&nbsp;  Length: 36                                                             <br />
&nbsp;  Network Mask: /24                                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 20                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forward Address: 10.10.34.2                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;External Route Tag: 0                                            <br />
&nbsp;                                                                         <br />
&nbsp;  Routing Bit Set on this LSA in topology Base with MTID 0               <br />
&nbsp;  LS age: 414                                                            <br />
&nbsp;  Options: (No TOS-capability, Type 7/5 translation, DC, Upward)         <br />
&nbsp;  LS Type: AS External Link                                              <br />
&nbsp;  Link State ID: 172.31.11.0 (External Network Number )                  <br />
&nbsp;  Advertising Router: 4.4.4.4                                            <br />
&nbsp;  LS Seq Number: 80000006                                                <br />
&nbsp;  Checksum: 0xDB96                                                       <br />
&nbsp;  Length: 36                                                             <br />
&nbsp;  Network Mask: /24                                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 20                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forward Address: 10.10.34.2                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;External Route Tag: 0                                            <br />
&nbsp;                                                                         <br />
&nbsp;  Routing Bit Set on this LSA in topology Base with MTID 0               <br />
&nbsp;  LS age: 415                                                            <br />
&nbsp;  Options: (No TOS-capability, Type 7/5 translation, DC, Upward)         <br />
&nbsp;  LS Type: AS External Link                                              <br />
&nbsp;  Link State ID: 172.31.12.0 (External Network Number )                  <br />
&nbsp;  Advertising Router: 4.4.4.4                                            <br />
&nbsp;  LS Seq Number: 80000006                                                <br />
&nbsp;  Checksum: 0xD0A0                                                       <br />
&nbsp;  Length: 36                                                             <br />
&nbsp;  Network Mask: /24                                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 20                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forward Address: 10.10.34.2                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;External Route Tag: 0                                            <br />
                                                                   
R3#                                                                
</code>
</div>

<p>
The default NSSA route type advertisement is NSSA LSA type 2 and appear in the RIB as "O N2" routes.
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R3#<b>show ip route ospf</b>                                                                                       <br />
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E1 - OSPF external type 1, E2 - OSPF external type 2                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ia - IS-IS inter area, * - candidate default, U - per-user static route  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ - replicated route, % - next hop override                              <br />
                                                                                                                   <br />
Gateway of last resort is not set                                                                                  <br />
                                                                                                                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.0.0/8 is variably subnetted, 11 subnets, 4 masks                          <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.12.0/30 [110/2] via 10.10.13.1, 04:39:36, GigabitEthernet1/0                <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.16.0/30 [110/2] via 10.10.13.1, 04:39:36, GigabitEthernet1/0                <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.26.0/30 [110/12] via 10.10.13.1, 04:39:36, GigabitEthernet1/0               <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.210.1/32 [110/3] via 10.10.13.1, 04:39:36, GigabitEthernet1/0               <br />
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.7.7.0/29 [110/12] via 10.10.13.1, 04:38:30, GigabitEthernet1/0                <br />
<span style="background-color:#DCDCDC">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.0.0/30 is subnetted, 1 subnets                                          <br />
O N2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.30.45.0 [110/20] via 10.10.34.2, 00:16:51, GigabitEthernet0/0                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.31.0.0/24 is subnetted, 3 subnets                                          <br />
O N2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.31.10.0 [110/20] via 10.10.34.2, 00:16:51, GigabitEthernet0/0                <br />
O N2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.31.11.0 [110/20] via 10.10.34.2, 00:16:51, GigabitEthernet0/0                <br />
O N2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.31.12.0 [110/20] via 10.10.34.2, 00:16:51, GigabitEthernet0/0                <br />
</span>
O IA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.6.0/24 [110/12] via 10.10.13.1, 04:38:30, GigabitEthernet1/0             <br />
R3#
</code>
</div>

<p>
Other LSAs include:
<ul>
 <li><b>Type 6 LSA - Group membership:</b> Not supported by IOS. can be gracefully ignored 
 using the command <code><b>router ospf 1<br>ignore lsa mospf</code></b>
 <li><b>Type 9 LSA - Link-local Opaque:</b> used by NSF extensions</li>
 <li><b>Type 10 LSA - Area-local Opaque:</b> used by MPLS-TE for constrained SPF in service 
 provider networks. In metric calculation it includes: Link attributes 
 (affinity or "color"), and bandwidth.</li>
 <li><b>Type 11 LSA - Domain-local opaque:</b></li>
</ul>
</p>


<h1 id="TOPOLOGY">OSPF Hierarchy</h1>

<h2 id="AREAS">OSPF Areas</h2>
<p>
An OSPF area is used to segment a large OSPF domain. 
An area defines a flooding domain. All devices in the area agree on the topology
with features such as authentication type, area ID, area type i.e. normal, stubby, 
not-so-stubby area (NSSA). Changes inside the area require LSA flooding and 
full SPF execution.
All routers in an area execute SPF algorithm when the network changes for 
example when links fail, when failed links are restored, new routes added, 
existing routes withdrawn.
</p>
<p>
It is important to note that a router becomes member of an area when any one or 
more of its interfaces are configured into an area.
</p>

<p>
To determine the OSPF areas that a router is participating in:

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
<code>
R1(config-if)#<b>do show ip ospf interface brief </b><br />
Interface&nbsp;&nbsp;    PID&nbsp;&nbsp;&nbsp;&nbsp;   <span style="background-color:#DCDCDC;">Area</span>&nbsp;&nbsp;&nbsp;&nbsp;            IP Address/Mask&nbsp;&nbsp;&nbsp;&nbsp;    Cost&nbsp;&nbsp;&nbsp;&nbsp;  State&nbsp;&nbsp;&nbsp;&nbsp; Nbrs F/C<br />
Gi0/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              10.0.12.1/30 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     DR &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   1/1<br />
Fa3/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              10.0.16.1/30 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     P2P&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   0/0<br />
Gi1/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              10.10.13.1/30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     P2P&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   0/0<br />
R1(config-if)#<b>do show ip ospf</b><br />
 Routing Process "ospf 1" with ID 1.1.1.1<br />
 Start time: 00:00:32.764, Time elapsed: 01:57:36.228<br />
 Supports only single TOS(TOS0) routes<br />
 Supports opaque LSA<br />
 Supports Link-local Signaling (LLS)<br />
 Supports area transit capability<br />
 Supports NSSA (compatible with RFC 3101)<br />
 Event-log enabled, Maximum number of events: 1000, Mode: cyclic<br />
 It is an area border and autonomous system boundary router<br />
 Redistributing External Routes from,<br />
 Router is not originating router-LSAs with maximum metric<br />
 Initial SPF schedule delay 5000 msecs<br />
 Minimum hold time between two consecutive SPFs 10000 msecs<br />
 Maximum wait time between two consecutive SPFs 10000 msecs<br />
 Incremental-SPF disabled<br />
 Minimum LSA interval 5 secs<br />
 Minimum LSA arrival 1000 msecs<br />
 LSA group pacing timer 240 secs<br />
 Interface flood pacing timer 33 msecs<br />
 Retransmission pacing timer 66 msecs<br />
 Number of external LSA 0. Checksum Sum 0x000000<br />
 Number of opaque AS LSA 0. Checksum Sum 0x000000<br />
 Number of DCbitless external and opaque AS LSA 0<br />
 Number of DoNotAge external and opaque AS LSA 0<br />
 <span style="background-color:#DCDCDC;">Number of areas in this router is 2. 1 normal 0 stub 1 nssa</span><br />
 Number of areas transit capable is 0<br />
 External flood list length 0<br />
 IETF NSF helper support enabled<br />
 Cisco NSF helper support enabled<br />
 Reference bandwidth unit is 100 mbps<br />
&nbsp;&nbsp;&nbsp;    Area BACKBONE(0)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of interfaces in this area is 2<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Area has message digest authentication<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        SPF algorithm last executed 00:58:20.520 ago<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        SPF algorithm executed 3 times<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Area ranges are<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of LSA 4. Checksum Sum 0x03233A<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of opaque link LSA 0. Checksum Sum 0x000000<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of DCbitless LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of indication LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of DoNotAge LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Flood list length 0<br />
&nbsp;&nbsp;&nbsp;    Area 10<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of interfaces in this area is 1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        It is a NSSA area<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Perform type-7/type-5 LSA translation<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Area has no authentication<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        SPF algorithm last executed 01:57:24.284 ago<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        SPF algorithm executed 2 times<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Area ranges are<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of LSA 5. Checksum Sum 0x035534<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of opaque link LSA 0. Checksum Sum 0x000000<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of DCbitless LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of indication LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Number of DoNotAge LSA 0<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        Flood list length 0<br />
<br />
R1(config-if)#<br />
</code>
</div>
</p>
<p>
If the output of the command <code><b>show ip ospf </b></code> shows that the router is 
participating in more than one area, then the router is an ABR.
</p>
 
<p>
As more routers are added to the OSPF domain, the flooding domain 
increases along with the size of the LSDB. To control the size of the OSPF 
flood domain, it is necessary to modify the flat OSPF topology (referred to as 
single-area OSPF), into a two hierarchical topology (usually referred to as multi-area OSPF).
</p>


<h2 id="MULTI_AREA">Multi-area OSPF</h2>
<p>
Multi-area OSPF involves the the deployment of a two-tier hierarchical topology 
that consists of the backbone area (area 0) and non-backbone area(s).

Multi-area OSPF topology is the better option to handle scalability. A 
combination of the following factors may influence the decision to delopy a 
multi-area OSPF topology:
<ul>
  <li>High processor utilization in routers in the OSPF area.</li>
  <li>High number of SPF executions.</li>
  <li>Large number of prefixes in the RIB.</li>
  <li>Large number of routers in the OSPF domain.</li>
  <li>Presence of low-capacity routers i.e., low memory, processing power, 
  in the OSPF domain.</li>
  <li>Inherent challenges with optimizing OSPF when using single area topology 
  such as inability to implement route summarization and filtering.</li>
</ul>
</p>

<h3 id="SCALABILITY">Factors Influencing OSPF Scalability</h3>

Scaling is determined by the utilization of three router resources: memory, CPU, 
and interface bandwidth. The workload that 
<a target="blank" href="https://www.ciscopress.com/articles/article.asp?p=1763921&seqNum=6">
OSPF imposes on a router depends on these factors</a>:
<ul>
<li><b>Number of adjacent neighbors for any one router:</b> OSPF floods all link state 
changes to all routers in an area. Routers with many neighbors have the most work 
to do when link state changes occur. In general, any one router should have no more than 60 neighbors.
</li>
   <li> <b>Number of adjacent routers in an area:</b> OSPF uses a CPU-intensive algorithm.
   The number of calculations that must be performed given <code><b>n</b></code> link state packets
   is proportional to <code><b>n log n</b></code>. As a result, the larger and more unstable the area,
   the greater the likelihood for performance problems associated with routing
   protocol recalculation. Generally, an area should have no more than 50 routers. 
   Areas that suffer with unstable links should be smaller.</li>
   <li> <b>Number of areas supported by any one router:</b> A router must run the 
   link state algorithm for each link state change that occurs for every area in
   which the router resides. Every ABR is in at least two areas (the backbone 
   and one adjacent area). In general, to maximize stability, one router should
   not be in more than three areas.</li>
   <li> <b>Designated router (DR) selection:</b> In general, the DR and backup
   designated router (BDR) on a multiaccess link (for example, Ethernet) have 
   the most OSPF work to do. It is a good idea to select routers that are not 
   already heavily loaded with CPU-intensive activities to be the DR and BDR. 
   In addition, it is generally not a good idea to select the same router to be 
   the DR on many multiaccess links simultaneously.</li>
</ul>

<p>

The first and most important decision when designing an OSPF network is to 
determine which routers and links are to be included in the backbone area and 
which are to be included in each adjacent area.
</p>

<p>
When configuring single area OSPF, any area ID can be used and prefix exchange 
will take place. In multi-area OSPF networks, area zero (0) must be configured with 
inter-area traffic transiting area 0.
</p>

<p>
Inter-area routing is similar to distance vector because routers in another area
do not have a detailed view of the local area. So they rely on the type 3 network 
summary LSAs. Changes such as the addition of a new network, link flapping/failure
outside the area don't always require LSA flooding or SPF limiting the impact on 
router resources.
</p>

<h3 id="BACKBONE_AREA">Backbone Area (Area 0)</h3>
<p>  
  At the center of an OSPF hierarchy is area 0 also known as the backbone area. 
  
  It is used to summarize topology information from other areas. Traffic from 
  one area to another must transit area 0. Area 0 must be contiguous. The only 
  exception to this is the use of a virtual link.
  </p>
  <p>
  Multi-area OSPF domains are governed by the following OSPF design guides:
  <ul>
    <li>In any multi-area OSPF domain, a backbone area must exist.</li>
    <li>All other areas must connect to the backbone area.</li>
    <li>The backbone area must be contiguous. There must be one single OSPF area.</li>
  </ul>
  </p>
  
  <h3 id="NON_BACKBONE_AREA">Non-backbone Area</h3> 
 
  <p>
  Non-backbone areas are OSPF areas that connect to the backbone area. There are 
  two types of non-backbone areas: normal areas and stub areas. All non-backbone 
  areas must connect to the backbone area which can act as a sort of transit area
  interconnecting two areas. 
  If scenario occurs where a non-backbone area cannot connect directly to the 
  backbone area, then a virtual link can be configured to ensure that the 
  non-backbone area connects to the backbone area.
 </p>
 
  <p>
Non-backbone areas configured 
as stub areas affect the way link state information is shared between the different 
areas and the types of LSAs used. The types of stub areas include: stubby 
area, not-so-stubby-area (NSSA), totally stubby area and totally NSSA.

To configure a stub area, every router in the stub area needs to be configured as a stub. 
Stub areas are identified by the area flag in the hello packet.
Stubby areas and not-so-stubby-areas are based on the OSPF  
<a href="https://www.ietf.org/rfc/rfc2328.txt">RFC 2328</a>  while totally 
stubby and totally NSSA are non-standard (vendor specific) area types.
</p>

<h4 id="STUBBY_AREA">Stubby Area</h4>
<p>
Stubby areas prohibit type 5 LSAs and thereby preventing type 4 LSAs from being propagated. 
When a type 5 LSA reaches the ABR, it generates a type 3 default route for the 
stub area. All external routes (originated from outside the stub area) are replaced 
with a single entry, a default route.
Configuration of stubby areas is reduces the processing and memory load on low-end 
or heavily-loaded routers as the number of SPF executions reduces as well as the 
size of the LSDB.
</p>

<p>
Stub areas are often used when there is a single exit point from an area into 
the backbone. If multiple exit points exist, sub-optimal routing may result if 
an area is configured as a stub area.
</p>

<p>
 The three rules of stubby areas:
<ol>
  <li>Area 0 cannot be a stubby area.</li>
  <li>A stubby area can not be transit area for a virtual link.</li>
  <li>An ASBR can not be present in a stubby area.</li>
</ol>

Configuration
<code><b>#area 1 stub</b></code>. As the stub area flag must match on all routers
in the area, all routers in the stub area should have the above command configured.
</p>
<p>
When troubleshooting stub area mismatches, use the command <code><b>debug ip 
ospf hello</b></code>. The debug command <code><b>debug ip ospf adjacencies</b></code>
also works.
</p>

<h4 id="TOTALLY_STUBBY_AREA">Totally Stubby Area</h4>
<p>
A totally stubby area is similar to a stubby area. However, in addition to prohibiting 
type 4 and type 5 LSAs, totally stubby areas prohibit type 3 LSAs. The ABR 
generates a type 3 default route after receiving type 3 and 5 LSAs. 
Totally stubby areas do not allow redistribution inside of them implying that 
ASBRs are not allowed in stub or totally stubby areas.
</p>
<p>
To configure a totally stubby area, on the ABR, enter the following configuration;
<code><b>area 1 stub no-summary</b></code>. The other routers in the totally 
stubby area can be configured with the stub area 
command <code><b>#area 1 stub</b></code> and the adjacency will still be formed.
However, to ensure consistency in configuration, it may be preferrable to enter 
the same totally stubby area configuration command on all the routers in the 
totally stubby area as for the ABR.
</p>
<p>
Totally stubby areas are suitable for areas with a single exit point to the 
backbone i.e., one ABR. Multiple ABRs for a totally stubby area runs the risk 
of introducing suboptimal external and inter-area route paths.
</p>

<h4 id="NSSA">Not-So-Stubby Area (NSSA)</h4>
<p>
NSSAs provide a way to get around the ASBR restriction of stubby areas and totally 
stubby areas. Like stubby areas, NSSA areas apply stub area rules such as 
prohibiting type 5 LSA from entering at the ABR. However, NSSAs allow for local 
redistribution. The ASBR advertises external networks with Type 7 LSAs (NSSA 
LSA). Type 7 LSAs carry information common to type 5 LSAs. The format of a Type 
7 LSA is almost identical to a Type 5 LSA. The only exceptions are:
<ul>
 <li>Link state type is different</li>
 <li>Additional propagate(P) flag is added. The P bit tells the ABR to translate 
 Type 7 LSA to Type 5 LSA (Type 7/5 translation) and advertise it to the rest of 
 the OSPF domain. This effectively makes this ABR have the dual role of ABR and 
 ASBR from the perspective of the routers in the other OSPF areas.</li>
 <li>
 For propagation, the forwarding address must be set in this type of LSA. If it 
 is not set, the ABR does not process the translation. If this happens, then 
 the Type 7 LSA link state information is limited to being advertised only 
 within the NSSA.
 </li>
</ul>

The ABR does not automatically advertise a default route when a type 5 LSA is 
blocked. The ABR of an NSSA area can be configured to advertise a default route 
using the command:
<code><b>area 1 nssa default-information-originate</b></code>
If the optional <code><b>default-information-originate</b></code> keyword is 
appended, the ABR generates a type 7 default route into the NSSA.
</p>

<h5>Verification</h5>
<div>
<code><b>
#show ip ospf <br>
#show ip protocols</b>
</code>
</div>
<p>
A Type 7 LSA can only be flooded in its source area. A type 7 LSA is structurally
similar to LSA Types 1 and 2 interms of how it is flooded. 
The ABR of an NSSA translates a type 7 LSA to type 5 LSA for area 0.
While an NSSA cannot be a transit area, it can host an ASBR.
</p>
<p>
NSSAs are often seen with service providers.
</p>

<h4>Totally Not-So-Stubby Area (Totally NSSA)</h4>
<p>
NSSAs prohibit type 4 and type 5 LSAs. Totally NSSAs prohibit Type 3,4,5 LSAs but 
allow for local redistribution. When the ABR in a totally NSSA receives a Type 3 or 5 LSA, it 
generates a default route automatically on Cisco devices. Not all implementations 
of OSPF generate this default route automatically. This default route is 
a type 3 LSA route. The type 7 LSA arriving at the ABR of a totally NSSA is 
translated into a Type 5 LSA.</p>
<p>
To configure a totally NSSA, on the ABR, enter the following command: 
<code><b>area 1 nssa no-summary</b></code>. Other routers in the totally NSSA 
area can be configured with the command <code><b>area 1 nssa</b></code> and 
adjacency will be formed. However, to maintain consistency in the configuration,
some prefer to configure the same command across all routers in the totally NSSA 
area with the same command <code><b>area 1 nssa no-summary</b></code>.
</p>

<h3 id="VIRTUAL_LINKS">OSPF Virtual Links</h3>
<p>
Discontiguous areas arise when a non-backbone area is not directly connected to 
the backone. Another scenario where discontiguous areas exist is where the 
backbone area is split-up into two or more sections with each section separated by a non-backbone area.

Discontiguous areas cause the ABR of the discontiguous area not to be reachable 
via SPT. An ABR can only advertise routes between areas when one of the areas it
is connected to is the backbone(area 0).
 Some preconditions of virtual-link include the following:</h3>
<ul>
  <li>End-points must be reachable via a normal area (not a stub area). 
  OSPF stubby areas cannot be a transit area for a virtual-link.</li> 
  <li>Transit area  must not have filtering applied i.e. LSA type 3 filters, distribute-lists.</li>
  <li>The virtual link end-points are members of the transit area.</li>
</ul>
</p>
<p>
Discontiguous areas are eliminated by adding new area 0 links and adjacencies. The links could be either physical
 or virtual for example GRE.
 
 OSPF virtual-links are a form of virtual area 0 adjacencies. They are used to 
 form multi-hop unicast area 0 adjacency. Virtual-links follow the already built shortest path first tree (SPT) 
 between ABRs to connect to the backbone.
</p>
<p>
As part of a two-tier hierarchy, area zero (0) must be contiguous. As indicated earlier, ABRs follow three fundamental rules when creating
type 3 LSAs:
</p>

<ol>
  <li>Type 1 LSAs received from any area, the ABR creates a type 3 LSA for the backbone area and non-backbone area.
  <li>Type 3 LSAs received from area 0, the ABR creates a new type 3 LSA for only non-backbone areas.
  <li>Type 3 LSAs received from a non-backbone area are only inserted into the LSDB of the source area. ABRs do not create
  a type 3 LSA for the other areas (including a segmented area 0).
</ol>
<p>
A virtual link is characterized by the following features:
<ul>
  <li>It is considered as a point-to-point unnumbered interface; it will not 
  have an IP address.</li>
  <li>Virtual link interfaces are part of area 0 or backbone area.</li>
  <li>Only OSPF overhead traffic transits the virtual link; this includes OSPF 
  packets such as Hello, DBD, LSR, LSU and LSAck. OSPF adjacencies can therefore 
  be formed through the virtual link.</li>
  <li>The virtual terminal end-points (routers where the virtual terminal is 
  configured): 
    <ul>
      <li>Virtual terminal endpoints become ABRs.</li>
      <li>belong to the same non-backbone area.</li>
    </ul>
  </li>
</ul>
The tunnel (of a virtual-link) belongs to the backbone area and therefore the 
router terminating the virtual link becomes an ABR. The area in which the 
virtual-link endpoints are established is known as the transit area.  Each router 
identifies the remote router by its RID. The virtual-link 
can be one hop or multiple hops away from the remote virtual-link endpoint.

The virtual link is built using type 1 LSAs with link-type 4.

A virtual-link inherits costs from SPT cost between end-points. The cost must be below 65535
otherwise the virtual link will enter a down state.
A virtual-link runs as a demand circuit so errors in configuration could be hidden until flooding 
occurs. As a demand circuit, when making configurations to the virtual link such 
as authentication, the virtual link will have to be cleared first before the 
configurations take effect.
</p>
<p>
Configuration: (on both virtual-link endpoints)
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R8(config)#<b>router ospf 8</b>                                                      <br />
R8(config-router)#<b>area 7 virtual-link 1.1.1.1</b>                          <br />
R8(config-router)#<b>end</b>                                                         <br />
<br />
------------------------------------ <br />
<br />
R1(config)#<b>router ospf 1</b>                                                      <br />
R1(config-router)#<b>area 7 virtual-link 8.8.8.8</b>                          <br />
R1(config-router)#<b>end</b>                                                         <br />                                                                                                         
*Aug 15 14:59:34.035: %SYS-5-CONFIG_I: Configured from console by console     <br /> 
R1# <br />
R1#<b>show ip ospf virtual-links</b>                                                 <br />                 
Virtual Link OSPF_VL0 to router 1.1.1.1 is up                                 <br />                 
&nbsp;&nbsp;<span style="background-color: #dcdcdc;">Run as demand circuit</span>                                                       <br />                 
&nbsp;&nbsp;DoNotAge LSA allowed.                                                       <br />                 
&nbsp;&nbsp;Transit area 7, via interface GigabitEthernet0/0                            <br />                 
&nbsp;Topology-MTID  &nbsp;&nbsp;&nbsp;  Cost &nbsp;&nbsp;&nbsp;   Disabled  &nbsp;&nbsp;&nbsp;   Shutdown  &nbsp;&nbsp;&nbsp;    Topology Name            <br />                 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     no      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Base                  <br />                 
&nbsp;&nbsp;Transmit Delay is 1 sec, State POINT_TO_POINT,                              <br />                 
&nbsp;&nbsp;Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5        <br />                 
&nbsp;&nbsp;&nbsp;&nbsp;Hello due in 00:00:03                                                     <br />                 
&nbsp;&nbsp;&nbsp;&nbsp;Adjacency State FULL (Hello suppressed)                                   <br />                 
&nbsp;&nbsp;&nbsp;&nbsp;Index 1/2, retransmission queue length 0, number of retransmission 0      <br />                 
&nbsp;&nbsp;&nbsp;&nbsp;First 0x0(0)/0x0(0) Next 0x0(0)/0x0(0)                                    <br />                 
&nbsp;&nbsp;&nbsp;&nbsp;Last retransmission scan length is 0, maximum is 0                        <br />                 
&nbsp;&nbsp;&nbsp;&nbsp;Last retransmission scan time is 0 msec, maximum is 0 msec                <br />                 
&nbsp;&nbsp;Message digest authentication enabled                                       <br />                 
&nbsp;&nbsp;&nbsp;&nbsp;Youngest key id is 1  <br />
</code></div>

<p>
The commands <code><b>show ip ospf virtual-link</b></code> and <code><b>show ip 
ospf interface</b></code> can be used to verify the operational state of the virtual-link.
</p>

<h3>Virtual Link Interfaces</h3>
<p>
When a virtual link is configured, a virtual link interface is created through 
which the virtual link is maintained. 
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R1#<b>show ip ospf interface</b><br />
<span style="background-color:#DCDCDC;">OSPF_VL0 is up, line protocol is up</span><br />
&nbsp;&nbsp;Internet Address 10.255.2.6/30, Area 0, Attached via Not Attached     <br />
&nbsp;&nbsp;Process ID 1, Router ID 1.1.1.1, Network Type<span style="background-color:#DCDCDC;"> VIRTUAL_LINK</span>, Cost: 2 <br />
&nbsp;&nbsp;Topology-MTID  &nbsp;&nbsp;&nbsp;  Cost &nbsp;&nbsp;&nbsp;   Disabled  &nbsp;&nbsp;&nbsp;   Shutdown  &nbsp;&nbsp;&nbsp;    Topology Name            <br />                 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     no      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      Base                  <br />                 
&nbsp;&nbsp;Configured as demand circuit                                        <br />
&nbsp;&nbsp;Run as demand circuit                                               <br />
&nbsp;&nbsp;DoNotAge LSA allowed                                                <br />
&nbsp;&nbsp;Transmit Delay is 1 sec, State POINT_TO_POINT                       <br />
&nbsp;&nbsp;Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5<br />
&nbsp;&nbsp;&nbsp;  oob-resync timeout 40                                             <br />
&nbsp;&nbsp;&nbsp;  Hello due in 00:00:02                                             <br />
&nbsp;&nbsp;Supports Link-local Signaling (LLS)                                 <br />
&nbsp;&nbsp;Cisco NSF helper support enabled                                    <br />
&nbsp;&nbsp;IETF NSF helper support enabled                                     <br />
&nbsp;&nbsp;Index 1/2, flood queue length 0                                     <br />
&nbsp;&nbsp;Next 0x0(0)/0x0(0)                                                  <br />
&nbsp;&nbsp;Last flood scan length is 1, maximum is 1                           <br />
&nbsp;&nbsp;Last flood scan time is 0 msec, maximum is 0 msec                   <br />
&nbsp;&nbsp;Neighbor Count is 1, Adjacent neighbor count is 1                   <br />
&nbsp;&nbsp;  Adjacent with neighbor 8.8.8.8  (Hello suppressed)                <br />
&nbsp;&nbsp;Suppress hello for 1 neighbor(s)                                    <br />
&nbsp;&nbsp;Message digest authentication enabled                               <br />
&nbsp;&nbsp;&nbsp;  Youngest key id is 1                                              <br />

</code>
</div>

</p>

<p>
The following are the characteristics of a 
virtual link interface:
<ul>
  <li>The IP address of the virtual link is referenced from the IP address of 
  the exit interface of the local router through which the router at the remote 
  end of the virtual link is reached.</li>
  <li>The OSPF network type of the virtual link is virtual link but the operational
  state is point-to-point.</li>
  <li>Hello packets are suppressed for virtual-links.</li>
  
</ul>
</p>

	  
<h3 id="ROUTER_TYPES">OSPF Router Types </h3>
<ul>
  <li><b>Internal Routers: </b> all links of the router are in one non-backbone 
  area.</li>
  <li><b>Backbone Router: </b>these are routers that have at least one interface in 
  area 0 (backbone). It can be an internal router as well as an ABR</li>
  <li><b>Area Border Router (ABR): </b>router has links in the backbone area and 
  a non-backbone area. The ABR interconnects the two areas. The ABR is the point 
  at which summarization and filtering is implemented in an OSPF domain.</li>
  <li><b>Autonomous System Boundary Router (ASBR): </b>has at least one link in 
  the OSPF domain and another link in a non-OSPF domain for example IS-IS, EIGRP, 
  BGP, RIP domain. The ASBR redistributes routes to and/or from other routing 
  domains and OSPF. ASBRs can be connected to any OSPF area except the stubby 
  and totally stubby area.</li>
</ul>
<p>
The router type can be verified by using the following commands:
</p>
<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
<code>
R1#<b>show ip protocols</b><br />
*** IP Routing is NSF aware ***<br />
<br />
Routing Protocol is "ospf 1"<br />
&nbsp;&nbsp;  Outgoing update filter list for all interfaces is not set<br />
&nbsp;&nbsp;  Incoming update filter list for all interfaces is not set<br />
&nbsp;&nbsp;  Router ID 1.1.1.1<br />
&nbsp;&nbsp;  <span style="background-color:#DCDCDC;">It is an area border and autonomous system boundary router</span><br />
&nbsp; Redistributing External Routes from,<br />
&nbsp;&nbsp;  Number of areas in this router is 2. 1 normal 0 stub 1 nssa<br />
&nbsp;&nbsp;  Maximum path: 4<br />
&nbsp;&nbsp;  Routing for Networks:<br />
&nbsp;&nbsp;&nbsp;&nbsp;    10.0.12.1 0.0.0.0 area 0<br />
  ...<br />
</code>
</div>
<p>
Other commands such <code><b>#show ip ospf </b></code> can display the router's type.
</p>

<p>
To view all ABRs and ASBRs in the OSPF domain, 
run the command <code><b>show ip ospf border-routers</b></code> with the optional
keyword <code><b>detail</b></code> can be appended for additional information.
</p>

<div style="background-color:#f4f0ec; border-style:dotted;border-width:1px;border-color:#DCDCDC">
<code>
R1#<b>show ip ospf border-routers</b>                                          <br />
                                                                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (1.1.1.1) (Process ID 1)                       <br />
                                                                               <br />
                                                                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base Topology (MTID 0)                                         <br />
                                                                               <br />
Internal Router Routing Table                                                  <br />
Codes: i - Intra-area route, I - Inter-area route                              <br />
                                                                               <br />
i 9.9.9.9 [1] via 10.255.1.36, FastEthernet3/0, ABR, Area 0.0.0.0, SPF 8       <br />
i 9.9.9.9 [1] via 10.255.1.6, GigabitEthernet0/0, ABR, Area 0.0.0.0, SPF 8     <br />
i 9.9.9.9 [2] via 10.255.254.14, GigabitEthernet4/0, ABR, Area 10, SPF 8       <br />
i 9.9.9.9 [2] via 10.255.254.2, GigabitEthernet1/0, ABR, Area 0.0.0.7, SPF 6   <br />
i 2.2.2.2 [1] via 10.255.1.34, FastEthernet3/0, ABR, Area 0.0.0.0, SPF 8       <br />
i 2.2.2.2 [1] via 10.255.1.2, GigabitEthernet2/0, ABR, Area 0.0.0.0, SPF 8     <br />
i 2.2.2.2 [3] via 10.255.254.2, GigabitEthernet1/0, ABR, Area 0.0.0.7, SPF 6   <br />
i 11.11.11.11 [2] via 10.255.254.14, GigabitEthernet4/0, ASBR, Area 10, SPF 8  <br />
                                                                               <br />
R1#<b>show ip ospf border-routers detail </b>                                         <br />
                                                                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (1.1.1.1) (Process ID 1)                       <br />
                                                                               <br />
                                                                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base Topology (MTID 0)                                         <br />
                                                                               <br />
Internal Router Routing Table                                                  <br />
Codes: i - Intra-area route, I - Inter-area route                              <br />
                                                                               <br />
i 9.9.9.9 [1] via 10.255.1.36, FastEthernet3/0, ABR, Area 0.0.0.0, SPF 10      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source 9.9.9.9, PDB SPF 31, path flag: none                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags: PathList                                                           <br />
i 9.9.9.9 [1] via 10.255.1.6, GigabitEthernet0/0, ABR, Area 0.0.0.0, SPF 10    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source 9.9.9.9, PDB SPF 31, path flag: none                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags: PathList                                                           <br />
i 9.9.9.9 [2] via 10.255.254.14, GigabitEthernet4/0, ABR, Area 10, SPF 8       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source 9.9.9.9, PDB SPF 25, path flag: none                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags: PathList                                                           <br />
i 9.9.9.9 [2] via 10.255.254.2, GigabitEthernet1/0, ABR, Area 0.0.0.7, SPF 6   <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source 9.9.9.9, PDB SPF 25, path flag: none                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags: PathList                                                           <br />
i 2.2.2.2 [1] via 10.255.1.34, FastEthernet3/0, ABR, Area 0.0.0.0, SPF 10      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source 2.2.2.2, PDB SPF 31, path flag: none                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags: PathList                                                           <br />
i 2.2.2.2 [1] via 10.255.1.2, GigabitEthernet2/0, ABR, Area 0.0.0.0, SPF 10    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source 2.2.2.2, PDB SPF 31, path flag: none                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags: PathList                                                           <br />
i 2.2.2.2 [3] via 10.255.254.2, GigabitEthernet1/0, ABR, Area 0.0.0.7, SPF 6   <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source 2.2.2.2, PDB SPF 25, path flag: none                               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags: PathList                                                           <br />
i 11.11.11.11 [2] via 10.255.254.14, GigabitEthernet4/0, ASBR, Area 10, SPF 8  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source 11.11.11.11, PDB SPF 25, path flag: none                           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags: PathList
R1#
</code></div>

<h4>Area Border Routers (ABRs)</h4>
<p>
An area border router connects a backbone area to one or more non-backbone areas.
This definition is extremely important; a router that connects two non-backbone
areas and is not connected to a backone area will have separate LSDBs for each 
area but will not allow traffic from one non-backbone area to cross to the other 
non-backbone area.
</p>
<p>
ABRs have the following features:
<ul>
  <li>ABR is a suitable point for filtering and summarization of inter-area 
  routes.</li>
  <li>ABRs maintain separate LSDBs for each area that their interfaces are part of. The 
number of LSDBs maintained by an ABR is equal to the number of distinct areas 
that it is participating in.</li>
<li> In the Type 1 LSA header of an ABR, the B-bit is set to 1. This is how other 
routers know that a router is an ABR.</li>
</ul> 
</p>

<p>
Assuming that an, ABR R2, is connected to the bonebone area and another area 
(say Area 2); when this ABR, R2, receives Type 1 and Type 2 LSAs from Area 2, it 
generates a Type 3 LSA which is a summary of the Type 1 and Type 2 LSA information
from Area 2. The cost of this Type 3 LSA will be the cost of the path from the 
ABR to the originating router in Area 2. This Type 3 LSA is then flooded into 
the backbone area with the cost being the cost from the ABR to the 
originating router in Area 2.
</p>
<p>
If another ABR, R3, in the backbone area receives this Type 3 LSA flooded by R2,
it floods this Type 3 LSA into the non-backbone area, Area 3. R3 will calculate 
the cost of its path to R2 and add this cost to the cost of the Type 3 LSA that 
was calculated by R2. R3 will then flood this Type 3 LSA into non-backbone area 
Area 3 with this new cummulative cost.
</p>

<p>
In a multi-area OSPF topology where a non-backbone area is connected to the 
backbone area using two or more ABRs, if a Type 3 LSA is flooded into the 
non-backbone area of ABR R1, ABR R2 which is connected to the same non-backbone 
area will receive this Type 3 LSA from its interface(s) in the non-backbone area.
R2 will install these Type 3 LSAs into its LSDB but will not transfer the route 
information from these LSAs to the routing table.
</p>
<h4>Autonomous System Boundary Router</h4>
<p>
An ASBR is a router that connects the OSPF domain to a non-OSPF domain. It 
redistributes routes from the non-OSPF domain into the OSPF domain.
</p>
<p>
An ABR that is connected to an NSSA by default also becomes an ASBR as it generates 
a type 5 LSA and floods it into the backbone area.
</p>

<h2 id="ROUTE_TYPES">OSPF Route Types and Preferences</h2>
<p>
OSPF routes are classified based on how they are sourced. These OSPF route types 
include: intra-area routes, inter-area routes and external routes. 
<ul>
  <li><b>Intra-area:</b> these are routes that are sourced within an area. 
  In OSPF areas without an other area attached have intra-area routes.</li>
  <li><b>Inter-area:</b> route sourced from OSPF area X that appears in another 
  OSPF area Y.</li>
  <li><b>External routes:</b> Sourced from another routing domain. These are advertised 
  as Type 5 LSAs and appear as external type 1 and external type 2 routes.
</ul>
</p>


<h1 id="SPF">Shortest Path First (SPF) Operation</h1>
<p>
Dijkstra's algorithm (SPF) uses the link state database as input to generate 
the loop-free shortest path tree (SPT) which is the shortest path to any destination 
in the network. During a change on the network, 
the SPT is rebuilt and the SPF algorithm runs again to calculate new shortest 
paths from the changed network topology. These shortest paths are then presented 
to the routing table for installation. If the path presented by OSPF is the most 
specific or has the lowest administrative distance, then these paths are installed 
into the routing table. If there is a tie in cost, then these paths are installed
into the routing table, a concept known as Equal Cost Multiple Paths (ECMP).
</p>
<p>
The SPF algorithm runs many complex 
calculations which may be recursive. These calculations are resource intensive
consuming more processor time and memory. In OSPF areas that experience many 
network changes such as flapping links, a significant amout of processor time is 
spent on SPF execution. This may affect other functions of the router.
If the number of SPF calculations for an area is high, then it is a sign of an unstable network.
Care should be taken to ensure a proper design of the OSPF domain and configuration 
of OSPF optimization features to ensure a stable network with few SPF executions.
</p>

<h2>Neighbor and Topology Maintenance</h2>
Once adjacencies have been established and SPT built, the OSPF state machine 
tracks neighbor and topology changes. Hello packets are used to monitor the 
availability of neighbors. LSUs are used to update neighbors of network changes.

<h3>Tracking Topology Changes</h3>
When a new LSA is received, it is checked against the LSDB for changes such as:
<ul>
 <li>Sequence number: to track new LSAs.</li>
 <li>Age: used to keep information updated and withdraw old information. Periodic
 flooding occurs every 30 minutes (1800 secs). LSAs whose LSA age 
 is equal to the MaxAge value of 3600 seconds are purged from the LSDB as they 
 are considered invalid.</li>
 <li>Checksum: used to verify that transmission and memory corruption have not 
 affected a packet.
</ul>

<h3>LSA Flooding</h3>
<p>
When a change is detected in the network, a new LSA is generated and flooded out 
all OSPF links in the area. OSPF does not use split-horizon. Self-originated LSAs are simply 
dropped.
</p>
<p>
The method used for flooding will depend on the following factors: 
<ul>
  <li>The state of a device's LSDB.</li>
  <li>Specific network types used on a device's network interfaces</li>
  </ul>
  If new information is found within the contents of a database descripter packet,
  the local device sends an LSR requesting for the missing updates. The 
  determination of whether information should be updated if a copy already 
  exists in the LSDB is primarily based on the link state sequence number. The 
  sequence number of an LSA is updated when new information is received through 
  an LSU.
  It is this sequence number that is used for comparison by OSPF devices where multiple 
  copies of the same LSA exist. If a device finds a copy that is more up-to-date 
  than the one in its LSDB, then the local OSPF device includes it in the LSR 
  sent to the originator of the LSA.
</p>
<p>
If multiple devices use the same sequence number when flooding an LSA:
<ul>
  <li>First, the checksum is verified.</li>
  <li>The link state age is used to break any tie.</li>
</ul>
</p>

<p>
Flooding method depends on the network type:
<ul>
  <li>Multicast is used if multiple devices are being updated at the same time.
  This is often seen on broadcast and non-broadcast networks that use a DR. 
  The DR sends the update to the address 224.0.0.5. 
  </li>
  <li>For OSPF network types where multicast is not supported, OSPF packets are 
  transmitted in unicast. Here, OSPF adjacencies are usually configured statically
  using the <code><b>neighbor</b></code> command.
</ul>
</p>


<h2 id="PATH_SELECTION">OSPF Path Selection</h2>
<h3>Metrics</h3>
<p>
The decision on the path to the next hop for traffic is based on the path metric. 
Metric is the cummulative OSPF interface cost along the path. 
The OSPF metric is called cost. The cost is calculated based on the bandwidth of 
the exit interface. The cost is calculated as follows;  
</p>
<code><b>reference bandwidth &divide; interface bandwidth</b></code>
<p>
The default OSPF reference bandwidth is 100mbps. With this default reference 
bandwidth, OSPF is unable to differentiate 
between fastethernet(100mbps), gigabitethernet(1000mbps), ten gigabitethernet(10000) or high speeds. 
All interfaces from fastethernet or faster will have an OSPF cost of one (1). It is
imperative to modify the default reference bandwidth in network environments with interfaces 
having gigabitethernet or higher capacity interfaces so that OSPF can make more accurate path selection decisions. 

This default reference bandwidth can be modified with the OSPF router mode command:
<code><b>auto-cost reference-bandwidth &lt;1-4294967&gt;</b></code>.
The bandwidth value is in megabits per second. It is recommended tha the reference 
bandwidth be one order of magnitude higher than the largest bandwidth link in the 
OSPF domain. If the network has ten gigabit links, 
then set the reference bandwidth to 100Gps.
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
<code>
R8(config-router)#<b>auto-cost reference-bandwidth 10000</b>                  <br />
% OSPF: Reference bandwidth is changed.                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please ensure reference bandwidth is consistent across all routers.   <br />
R8(config-router)#<b>do show ip ospf</b>                                      <br />
&nbsp;Routing Process "ospf 8" with ID 8.8.8.8                                     <br />
&nbsp;Start time: 00:00:40.364, Time elapsed: 01:49:26.920                         <br />
&nbsp;Supports only single TOS(TOS0) routes                                        <br />
&nbsp;.......                                                                      <br />
&nbsp;Number of DoNotAge external and opaque AS LSA 0                              <br />
&nbsp;Number of areas in this router is 2. 2 normal 0 stub 0 nssa                  <br />
&nbsp;Number of areas transit capable is 1                                         <br />
&nbsp;External flood list length 0                                                 <br />
&nbsp;IETF NSF helper support enabled                                              <br />
&nbsp;Cisco NSF helper support enabled                                             <br />
&nbsp;<span style="background-color:#DCDCDC">                                         <br />
&nbsp;Reference bandwidth unit is 10000 mbps</span>                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;Area BACKBONE(0)                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of interfaces in this area is 1                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area has no authentication                                            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPF algorithm last executed 01:49:00.076 ago                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPF algorithm executed 2 times                                        <br />
        ........                                                       <br>
</code>
</div>
<p>
The reference bandwidth should be set to the same value for all routers in the OSPF domain, 
otherwise the risk of introducing sub-optimal routing to the OSPF domain may be high.
Type 1 LSAs include the cost of each link which is in the range 1 - 65535.
</p>

<p>
The OSPF cost of a path is calculated based on the outgoing interface of a router.

</p>

<h3>Best Path Selection</h3>
<p>
When an OSPF device receives an LSA with the same link state information but different 
properties, the best path selection process determines which path is selected 
for installation into the routing table. OSPF uses the following criteria 
for selecting the best path (in order of preference);
<ol>
<li>Intra-area path with the lowest metric</li>
<li>Inter-area path with the lowest metric</li>
<li>External type 1 path with the lowest metric</li>
<li>NSSA type 1 path with the lowest metric</li>
<li>External type 2 paths with the lowest metric</li>
<li>External type 2 paths with the lowest forwarding metric</li>
<li>NSSA type 2 path with the lowest metric.</li>
</ol>
</p>
<p>
Existence of N1 or N2 routes implies that E1 and E2 routes will not be existent in that area. 
</p>
<p>
The above listed best path selection criteria supersedes the path metric; an 
intra-area route will always be preferred to an inter-area route regardless of 
the route cost of the intra-area route. This is OSPF's loop-prevention technique
in addition to the hub and spoke topology of the OSPF hierarchy which inherently 
creates a loop-free topology.
</p>
<p>
In a proper network design, the above mentioned path criteria should not be used 
in path selection. Ideally, routes should only be advertised from a single source.
The path selection criteria should only be used as a tie-breaker in a network 
with extraordinary design considerations.
</p>


<h3 id="VIRTUAL_LINKS">Virtual-Link Costs</h3>
<p>
Virtual-links inherit their cost from cost between the virtual-link endpoints.
A virtual-link must have a cost below 65535 (maximum metric) to initialise. 
Link costs higher than 65535 could occur if reference bandwidth is higher and 
virtual-link transits legacy links.
</p>


<h1 id="OSPF_OPTIMIZATION">OSPF Optimization</h1>
<p>
OSPF optimization aims to achieve the following objectives:
<ul>
  <li>To reduce convergence time.</li>
  <li>To minimise SPF executions</li>
  <li>To improve traffic patterns</li>
  <li>To reduce LSDB size</li>
</ul>
The default settings of OSPF work. However, network conditions may require tweaking 
OSPF to improve performance while minimizing the load on the routers.

There are a variety of configurations that can improve the performance of OSPF. 
These can be categorized into the following:
<ul>
 <li>Accelerating OSPF convergence: by modifying default dead-interval and hello 
 interval timers and the use of BFD.</li>
 <li>Controlling OSPF LSA generation and propagation through LSA throttling, 
 LSA flood pacing, LSA group pacing and LSA retransmission pacing.</li>
 <li>Altering Shortest Path First behaviour through SPF throttling and enabling 
 incremental SPF (iSPF).</li>
 <li>Reducing the size of the LSDB through prefix summarization, creation of 
 OSPF areas, filtering</li>
 <li>Reducing the effects of restarts on OSPF through grace LSAs and NSF.</li>
 <li>OSPF traffic engineering by altering the administrative distance, 
 interface bandwidth and link cost, default route propagation.</li>
</ul>
</p>

<h2 id="ACCELERATING_CONVERGENCE">Accelerating OSPF Convergence</h2>
<p>
The process of network convergence can be categorized into a set of 
<a target="_blank" href="https://www.cisco.com/en/US/technologies/tk648/tk365/tk480/technologies_white_paper0900aecd80244005.html">discreet events</a>:
<ul>
  <li><b>Failure detection:</b> the speed at which a device on the network can
  detect and react to a failure of one of its own components, or the failure of 
  a peer.</li>
  <li><b>Information dissemination:</b> the speed at which a detected failure 
  can be communicated to all OSPD devices in an area.</li>
  <li><b>Repair:</b> the speed at which all devices on the network having been 
  notified of the failure calculate an alternate path through which data can 
  flow.</li>
  </ul>

  An improvement in any one of these stages lowers the convergence time. The 
  first of these stages, failure detection, can be the most problematic and 
  inconsistent:
<ul>
  <li>Different routing protocols use varying methods and timers to detect the 
  loss of a routing adjacency with a peer.</li>
   <li>Link-layer failure detection times can vary widely depending on the 
   physical media and the Layer 2 encapsulation used.</li>
   <li>Intervening devices (eg: layer 2 switch) can hide link-layer failures 
   from routing protocol peers.</li>
   </ul>
</p>

<p>
OSPF convergence time can be decreased through modification of default hello and 
dead interval timer values and the use of Bi-Directional Forward Detection (BFD).
</p>


<h3 id="TIMERS">Hello and Dead Interval Timers</h3>
<p>
OSPF default timer values are not often the best method to rely on for failure 
detection.  The hello and dead-interval timers
can be modified to lower values to increase the speed of failure detection by OSPF.

In today's converged high-bandwidth networks, the 40 second dead 
interval timer to detect a failed neighbor are considered unacceptable. 
To modify the hello interval, use the interface mode command 
<code><b>ip ospf hello-interval <i>seconds</i></b></code> and the dead interval 
<code><b>ip ospf dead-interval <i>seconds</i></b></code>. 

Modifying the default hello interval timer, results in the dead interval timer 
being automatically modified to four times the value of the hello-interval.
</p>
<p>
The following configuration sets the hello interval timer value to 5 
seconds and dead interval to 20 seconds:
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
  <code>
R1(config)#<b>interface Te3/0</b> <br />  
R1(config-if)#<b>ip ospf hello-interval 5 </b> <br>
R1(config-if)#<b>ip ospf dead-interval 20 </b> </code>
</code>
</div>

<p>
An interface can be configured to send hello packets in sub-seconds using the 
interface command <code><b>ip ospf dead-interval minimal hello-multiplier 
&lt;3-20&gt;</b></code>.
The <code><b>multiplier</b></code> is the number of hello packets sent per second;
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
  <code>
R1(config)#<b>interface fa3/0</b> <br />  
R1(config-if)#<b>ip ospf dead-interval minimal hello-multiplier 4 </b><br />
R1(config-if)#<b>end</b><br />
R1#<b>show ip ospf interface fa3/0</b><br />
FastEthernet3/0 is up, line protocol is up<br />
  Internet Address 10.0.16.1/30, Area 0, Attached via Interface Enable<br />
  Process ID 1, Router ID 1.1.1.1, Network Type <span style="background-color:#DCDCDC";>BROADCAST </span>, Cost: 1<br />
  . . . . <br />
  Enabled by interface config, including secondary ip addresses<br />
  Transmit Delay is 1 sec, State DR, Priority 1<br />
  Designated Router (ID) 1.1.1.1, Interface address 10.0.16.1<br />
  No backup designated router on this network<br />
  Timer intervals configured, <span style="background-color:#DCDCDC;">Hello 250 msec, Dead 1, Wait 1, Retransmit 5</span><br />
    oob-resync timeout 40<br />
    Hello due in 58 msec<br />
  Supports Link-local Signaling (LLS)<br />
  Cisco NSF helper support enabled<br />
  IETF NSF helper support enabled<br />
  ..... <br />
R1#<br />
</code>
</div>
<p>
Where 4 implies four hello packets are to be sent per second.
</p>
<p>
Configuration of a lower hello interval timer value to detect neighbor failure considerably 
improves neighbor failure detection. However, it increases network traffic considerably 
particularly if many OSPF devices exist on the network segment.

BFD is a preferred option for failure detection.
</p>

<h3>BFD</h3>
<p>
BFD is a light-weight protocol designed for rapid failure detection while 
maintaining low overhead. BFD is not specific to OSPF and can be used as a single 
failure detection mechanism by other IP routing protocols that support it such as 
BGP. BFD operates at the line-card level with little involvement of the processor. 
This implies that BFD operates primarily at the data plane and not at the control 
plane. For BFD to be used in failure detection, OSPF must first be configured with 
adjacencies established.

Client protocols such as OSPF register with BFD to receive notifications when 
failures are detected. Failure detection is usually in sub-seconds.
</p>
<p>
BFD supports two operating modes: asynchronous and demand modes.
<ul>
  <li><b>Asynchronous mode:</b> supporting systems send packets back and forth 
  to one another. If BFD control packets are not detected, then client protocol 
  is notified and the session drops. Asynchronous mode is generally used in 
  production networks.</li>
  <li><b>Demand Mode:</b> BFD assumes that another method is used to verify 
  connectivity. </li>
</ul>
</p>
<h4>Echo Function</h4>
<p>
Echo function can be used in either BFD demand mode or asynchronous mode. If the 
BFD echo function is enabled, devices are configured to send echo packets towards 
a control system with the expectation of having them loopback to the remote system. 
This verifies the path to the remote system as well as the forwarding path of the 
remote system. BFD sessions can be configured independently in both directions. 
</p>
<h4>Configuration</h4>
<p>
Configuration of BFD takes two steps: enabling BFD on the interface and registering 
failure detection using BFD in OSPF.
<ul>
  <li><b>Step 1- BFD Configuration:</b>
  BFD is configured on the interface through which the OSPF adjacency is formed 
  using the interface command <code><b>bfd interval &lt;50-999&gt; min_rx 
  &lt;50-999&gt; multiplier &lt;3-50&gt;</b></code>:
  <ul>
    <li><b>interval:</b> determines how frequently (in milliseconds) BFD packets will 
    be sent to BFD peers.</li>
     <li><b>min_rx:</b> determines how frequently (in milliseconds) BFD packets 
     will be expected to be received from BFD peers.</li>
     <li><b>multiplier:</b> The number of consecutive BFD packets which must be missed 
     from a BFD peer before declaring that peer unavailable, and informing the 
     higher-layer protocols of the failure.</li>
  </ul>
  </li>
  <li><b>Step 2 - OSPF BFD Configuration:</b> In the OSPF process, register BFD 
  as the failure detection mechanism using the command <code><b>bfd all-interfaces</b></code>
  to configure BFD on all OSPF enabled interfaces. To configure BFD on individual 
  interfaces, use the interface configuration command <code><b>ip ospf bfd</b></code>.
</ul>
</p>
<h4>Verification</h4>
<p>
BFD operation and statistics can be verified using the commands: <code><b>show bfd summary</b></code>
</p>


<h2 id="CTRL_LSA_GENERATION">Controlling OSPF LSA Generation and Propagation</h2>
<p>
LSA generation and propagation in OSPF are controlled by the following features:
<ul>
  <li>LSA throttling</li>
  <li>LSA Pacing</li>
  <ul>
  <li>LSA flood pacing</li>
  <li>LSA group pacing</li>
  <li>LSA retransmisssion pacing</li>
  </ul>
</ul>
</p>
<h3>LSA Throttling</h3>
<p>
LSA throttling provides a way of limiting the generation of LSAs specifically the generation of 
repeat same LSAs (with same LSA ID, LSA type and advertising router ID) during 
network instability. Prior to LSA throttling, LSA generation was rate-limited to 
5 seconds because of the default LSA wait timer interval. 

When an initial LSU is sent, it is rate limited and can't be 
resent for another five seconds. A similar condition occurs on received updates. 
Waiting for 5 seconds slows convergence and sub-second network convergence was not possible.
</p>
<p>
LSA throttling alters how OSPF handles the generation of OSPF update packets.
This is done through the modification of the LSA start-interval, LSA 
hold-interval and LSA max-interval:
<ol>
  <li><b>LSA start-interval:</b> initial wait interval for LSA generation. The default 
  value is 0 milliseconds resulting in the first LSA being generated immediately.</li>
  <li><b>LSA hold-interval:</b> minimum interval between the generation of another 
  same LSA. The default value is 5000 milliseconds. This value doubles every 
  time the same LSA is regenerated.</li>
  <li><b>LSA max-interval:</b> the maximum wait time interval between LSA generation. 
  The LSA hold-interval cannot become greater than the max-interval. The default 
  value is 5000 milliseconds. If the max-interval is the same as the hold-interval,
  then the hold-interval cannot double when an LSA is regenerated.</li>
</ol>
</p>

<p>
An initial LSA is sent immediately on a network change. The generation of the 
second LSA in based on the start-interval. If an event occurs and the OSPF 
device needs to send an additional update packet, it waits until the OSPF start 
interval expires. At this point, the OSPF hold interval begins. If an event occurs 
during this hold interval, the device waits to send that update packet till that 
hold interval expires. If this happens, the next LSA hold interval is doubled. 
This means that at the end of the initial hold interval, the update is sent but 
the next update packet is held until the twice the hold interval unless the 
LSA max-interval is reached. The LSA max-interval in this case is used as a 
ceiling controlling how long the hold-interval could eventually become. This 
doubling happens everytime an additional event occurs within the current hold 
interval. When the max-interval is reached, it is used as the hold-interval to 
delay LSA update packet generation until it expires. This remains true until 
no events occur within two hold-intervals or max-intervals depending on the  
situation. At this point, the process repeats and the start interval is used 
if an event occurs.
</p>
<p>
LSA throttling sub-second values improves convergence and slows down update 
generation time during periods of instability in the network.
</p>
<h4>Configuration</h4>
<p>
LSA throttling is enabled by default. The default LSA start-interval, hold-interval 
and max-interval can be modified using the command <code><b>timers throttle lsa 
&lt;0-600000&gt; &lt;0-600000&gt; &lt;0-600000&gt;</b></code>. These values are 
in milliseconds. The following 
example sets the LSA start-interval, hold-interval and max-interval to 0, 5 seconds 
and 60 seconds respectively:
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
  <code>
R1#<b>configure terminal</b>                                                <br>
Enter configuration commands, one per line.  End with CNTL/Z.               <br>
R1(config)#<b>router ospf 1</b>                                             <br>
R1(config-router)#<b>timers throttle lsa 0 5000 60000</b>                   <br>
R1(config-router)#<b>end </b>                                                   <br>                                                                                     
*Nov  5 11:18:30.007: %SYS-5-CONFIG_I: Configured from console by console   <br>      
R1#<b>show ip ospf</b>                                                      <br>             
 Routing Process "ospf 1" with ID 1.1.1.1                                   <br>      
 Start time: 00:00:52.732, Time elapsed: 01:06:26.896                       <br>      
 Supports only single TOS(TOS0) routes                                      <br>      
 Supports opaque LSA                                                        <br>      
 Supports Link-local Signaling (LLS)                                        <br>      
 Supports area transit capability                                           <br>      
 Supports NSSA (compatible with RFC 3101)                                   <br>      
 Event-log enabled, Maximum number of events: 1000, Mode: cyclic            <br>      
 It is an area border and autonomous system boundary router                 <br>      
 Redistributing External Routes from,                                       <br>      
 Router is not originating router-LSAs with maximum metric                  <br>      
 Initial SPF schedule delay 5000 msecs                                     <br>      
 Minimum hold time between two consecutive SPFs 10000 msecs                 <br>      
 Maximum wait time between two consecutive SPFs 10000 msecs                 <br>      
 Incremental-SPF disabled                                                   <br>      
 <span style="background-color:gray;">Initial LSA throttle delay 0 msecs </span>                                         <br>      
 <span style="background-color:gray;">Minimum hold time for LSA throttle 5000 msecs</span>                               <br>      
 <span style="background-color:gray;">Maximum wait time for LSA throttle 60000 msecs </span>                             <br>      
 Minimum LSA arrival 1000 msecs                                             <br>      
 LSA group pacing timer 240 secs                                            <br>      
 Interface flood pacing timer 33 msecs                                             
</code></div>
<p>
It is recommended to set the minimum interval for accepting the same LSA.
If the same LSA is received earlier than the configured interval, it is dropped.
It is recommended that the arrival interval be less than or equal to the LSA 
hold interval timer. To control the receipt of the same LSA packets, use the 
command <code><b>timers lsa arrival &lt;0-600000&gt;</b></code>.
</p>

<h3>Update Packet Pacing</h3>
<p>
This is different from LSA throttling because it affects the behaviour of OSPF 
packets that are not locally generated. Three different update timers that can 
be modified include: flood pacing, retransmission pacing, group pacing.  
<ul>
   <li><b>Flood pacing:</b> controls the packet spacing between consecutive update packets in the 
OSPF transmission queue. By default, on Cisco equipment, if multiple packets 
exist in the transmission queue, they are sent every 33ms. This can be modified 
using the command <code><b>timers pacing flood &lt;5-100&gt;</b></code>. The value
is in milliseconds.</li>
   <li><b>Retransmission Pacing:</b> feature is similar to flood pacing feature but it affects 
the retransmission queue. By default, on Cisco equipment, if multiple packets 
exist in the retransmission queue, they are sent every 66ms. The retransmission
pacing can be configured using the OSPF command <code><b>timers pacing retransmission 
&lt;5-200&gt;</b></code>. The value is in milliseconds.</li> 
   <li><b>Group pacing:</b> controls how LSAs are refreshed by an OSPF device. The typical 
LSA refresh rate is 30 minutes. If each individual LSA works on its own independent 
timer, then packets could be transmitted all the time especially in large networks. 
To mitigate this, LSA group pacing was introduced. Group pacing allows LSAs that 
are expiring within the same general time to be sent simultaneously. On Cisco 
equipment, the default is set to 240 seconds. All LSAs expiring within 240 seconds 
are updated at the same time. This increases efficiency and lowers demand. To 
configure group pacing value, use the OSPF command <code><b>timers pacing lsa-group 
&lt;1-1800&gt;</b></code>. The value is in seconds.</li>
</ul>
<p>
Pacing timers defaults generally work well and are not recommended to be modified.
Modification will require extensive testing to ensure that the intended result is 
accomplished. To view the LSA pacing values, use the command <code><b>show ip 
ospf</b></code>:
</p>

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
  <code>
R1#<b>show ip ospf</b>                                             <br />
&nbsp;Routing Process "ospf 1" with ID 1.1.1.1                          <br />
&nbsp;Start time: 00:00:52.732, Time elapsed: 03:02:31.124              <br />
&nbsp;Supports only single TOS(TOS0) routes                             <br />
&nbsp;Supports opaque LSA                                               <br />
&nbsp;Supports Link-local Signaling (LLS)                               <br />
&nbsp;Supports area transit capability                                  <br />
&nbsp;Supports NSSA (compatible with RFC 3101)                          <br />
&nbsp;Event-log enabled, Maximum number of events: 1000, Mode: cyclic   <br />
&nbsp;It is an area border and autonomous system boundary router        <br />
&nbsp;Redistributing External Routes from,                              <br />
&nbsp;Router is not originating router-LSAs with maximum metric         <br />
&nbsp;Initial SPF schedule delay 5000 msecs                             <br />
&nbsp;Minimum hold time between two consecutive SPFs 10000 msecs        <br />
&nbsp;Maximum wait time between two consecutive SPFs 10000 msecs        <br />
&nbsp;Incremental-SPF disabled                                          <br />
&nbsp;Initial LSA throttle delay 0 msecs                                <br />
&nbsp;Minimum hold time for LSA throttle 5000 msecs                     <br />
&nbsp;Maximum wait time for LSA throttle 60000 msecs                    <br />
&nbsp;Minimum LSA arrival 1000 msecs                                    <br />
&nbsp;<span style="background-color:gray;">LSA group pacing timer 240 secs</span>                                   <br />
&nbsp;<span style="background-color:gray;">Interface flood pacing timer 33 msecs</span>                             <br />
&nbsp;<span style="background-color:gray;">Retransmission pacing timer 66 msecs </span>                             <br />
&nbsp;Number of external LSA 1. Checksum Sum 0x007B7D                   <br />
&nbsp;Number of opaque AS LSA 0. Checksum Sum 0x000000                  <br />
&nbsp;Number of DCbitless external and opaque AS LSA 0                  <br />
&nbsp;Number of DoNotAge external and opaque AS LSA 0                   <br />
&nbsp;Number of areas in this router is 3. 3 normal 0 stub 0 nssa       <br />
&nbsp;Number of areas transit capable is 0                              <br />
&nbsp;External flood list length 0                                      <br />
&nbsp;IETF NSF helper support enabled                                   <br />
&nbsp;Cisco NSF helper support enabled                                  <br />
&nbsp;Reference bandwidth unit is 100 mbps                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;Area BACKBONE(0.0.0.0)                                         <br />
</code></div>

<h2 id="ALTERING_SPF">Altering Shortest Path First Behaviour</h2>
<p>
Processing of SPF algorithm can be altered using SFP throttling and incremental SPF.
Altering the SPF behaviour may lower the processor load. However, it may result 
in an increase in convergence time.
</p>
<h3>Shortest Path First Throttling</h3>
<p>
SPF throttling operates similar to LSA throttling. It controls when SPF is run 
after an event occurs. This is done through the configuration of three parameters:
SPF start-interval, SPF hold-interval and SPF max-interval. 
<ul>
  <li><b>SPF start-interval:</b> the initial SPF schedule delay. By 
  default, the SPF-start timer is 5000 milliseconds.</li>
  <li><b>SPF hold-interval:</b>  the minimum hold time between two 
  consecutive SPF calculations. By default, the SPF-hold timer is 10000 milliseconds.</li>
  <li><b>SPF max-interval:</b> the maximum wait time between two consecutive SPF 
  calculations. By default, the SPF-maximum timer is 10000 milliseconds.
  </li>
</ul>

When an event initially 
occurs, the start-interval begins, once it expires, SPF is run using the new 
information. At this point, the hold-interval starts to count down. If any new 
event occurs during this hold-interval, then the SPF process is run once it expires. 
A new hold-interval begins but with twice the configured hold-interval time. If 
no event occurs within two hold-intervals, then the process resets and is governed 
by the start-interval. The process of doubling the hold-interval when additional 
events occur continues until the hold-interval timer reaches the max-interval time. 
The max-interval acts as a timer ceiling. Once it is reached, SPF runs every 
max-interval as long as additional events continue to occur. If no events occur 
within two max-intervals, then the process resets. By default, on Cisco equipment, 
the start-interval is 5 seconds and max-interval 10 seconds. 
</p>
<p>
SPF throttling can be configured using the command <code><b>timers throttle spf
&lt;start-interval&gt; &lt;hold-interval&gt; &lt;max-interval&gt;</b></code>
. The three interval values range from 1-600000 milliseconds.
</p> 

<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
  <code>
R1(config-router)#<b>timers throttle spf 10000 20000 60000</b>       <br />
R1(config-router)#<b>do show ip ospf</b>                             <br />
&nbsp;Routing Process "ospf 1" with ID 1.1.1.1                            <br />
&nbsp;Start time: 00:00:52.732, Time elapsed: 03:45:13.896                <br />
&nbsp;Supports only single TOS(TOS0) routes                               <br />
&nbsp;Supports opaque LSA                                                 <br />
&nbsp;Supports Link-local Signaling (LLS)                                 <br />
&nbsp;Supports area transit capability                                    <br />
&nbsp;Supports NSSA (compatible with RFC 3101)                            <br />
&nbsp;Event-log enabled, Maximum number of events: 1000, Mode: cyclic     <br />
&nbsp;It is an area border and autonomous system boundary router          <br />
&nbsp;Redistributing External Routes from,                                <br />
&nbsp;Router is not originating router-LSAs with maximum metric           <br />
&nbsp;<span style="background-color:gray;">Initial SPF schedule delay 10000 msecs</span>                              <br />
&nbsp;<span style="background-color:gray;">Minimum hold time between two consecutive SPFs 20000 msecs</span>          <br />
&nbsp;<span style="background-color:gray;">Maximum wait time between two consecutive SPFs 60000 msecs</span>          <br />
&nbsp;Incremental-SPF disabled                                            <br />
&nbsp;Initial LSA throttle delay 0 msecs                                  <br />
&nbsp;Minimum hold time for LSA throttle 5000 msecs                       <br />
&nbsp;Maximum wait time for LSA throttle 60000 msecs                      <br />
&nbsp;Minimum LSA arrival 1000 msecs                                      <br />
&nbsp;LSA group pacing timer 240 secs                                     <br />
&nbsp;Interface flood pacing timer 33 msecs                               <br />
&nbsp;Retransmission pacing timer 66 msecs                                <br />
&nbsp;Number of external LSA 1. Checksum Sum 0x00797E
</code></div>

<h3>Incremental SPF (iSPF)</h3>
<p>
When enabled, iSPF changes when and how SPF is run. Normally, when a type 1 or 
type 2 LSA change occurs, all devices within an area process it and SPF is run. Often 
this is not required as it may not affect the SPT for every device. This results 
in many nodes running SPF when they do not need to.
</p>
<p>
iSPF changes the rules making the running of SPF conditional based on three 
conditions:
<ul>
  <li><b>Addition of a new leaf node:</b>
  Events such as the addition of a new leaf node do not affect SPT on existing 
devices. Additional full SPF run is not needed. iSPF prevents full SPF run on 
non-local devices. On local devices however, a full SPF run is still required.
  </li>
  <li><b>Change alters the SPT of a device: </b> If a link failure occurs on 
  a path that is not the shortest path, then full SPF run is not required. iSPF 
  steps in and limits it.</li>
  <li><b>Whether a limited change happens to the current SPT:</b> iSPF limits 
  the devices that fully run SPF to only the local devices and devices that are 
  downstream from the failure. Upstream devices do not need to run SPF.</li>
</ul>
</p>
<p>
To configure iSPF, use the command <code><b>ispf</b></code> in OSPF router mode.
</p>
<div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
  <code>
R1(config)#<b>router ospf 1</b>                                       <br />
R1(config-router)#<b>ispf</b>                                         <br />
R1(config-router)#do show ip ospf                                     <br />
&nbsp;Routing Process "ospf 1" with ID 1.1.1.1                        <br />
&nbsp;Start time: 00:00:52.732, Time elapsed: 04:01:26.532            <br />
&nbsp;Supports only single TOS(TOS0) routes                           <br />
&nbsp;Supports opaque LSA                                             <br />
&nbsp;Supports Link-local Signaling (LLS)                             <br />
&nbsp;Supports area transit capability                                <br />
&nbsp;Supports NSSA (compatible with RFC 3101)                        <br />
&nbsp;Event-log enabled, Maximum number of events: 1000, Mode: cyclic <br />
&nbsp;It is an area border and autonomous system boundary router      <br />
&nbsp;Redistributing External Routes from,                            <br />
&nbsp;Router is not originating router-LSAs with maximum metric       <br />
&nbsp;Initial SPF schedule delay 10000 msecs                          <br />
&nbsp;Minimum hold time between two consecutive SPFs 20000 msecs      <br />
&nbsp;Maximum wait time between two consecutive SPFs 60000 msecs      <br />
&nbsp;<span style="background-color:gray;">Incremental-SPF enabled</span><br />
&nbsp;Initial LSA throttle delay 0 msecs                              <br />
&nbsp;Minimum hold time for LSA throttle 5000 msecs                   <br />
&nbsp;Maximum wait time for LSA throttle 60000 msecs                  <br />
&nbsp;Minimum LSA arrival 1000 msecs                                  <br />
&nbsp;LSA group pacing timer 240 secs                                 <br />
&nbsp;Interface flood pacing timer 33 msecs                           <br />
&nbsp;Retransmission pacing timer 66 msecs                            <br />
&nbsp;Number of external LSA 1. Checksum Sum 0x00777F                 <br />
&nbsp;Number of opaque AS LSA 0. Checksum Sum 0x000000                <br />
&nbsp;Number of DCbitless external and opaque AS LSA 0                <br />
&nbsp;Number of DoNotAge external and opaque AS LSA 0
</code></div>

<p>
 iSPF reduces the load on the router processor.
</p>

<h2 id="LSDB_SIZE">Reducing the Size of the LSDB</h2>
<p>
Reducing the size of the LSDB can be accomplished through the following features:
<ul>
  <li>Stub areas</li>
  <li>Summarization</li>
  <li>Filtering</li>
  <li>Prefix suppression</li>
</ul>
</p>

<h3>Stub Areas</h3>
<p>
Stub areas limit type 4 and 5 LSAs. These are 
replaced with a summary Type 3 LSA. Totally stubby areas extend this restriction 
to include Type 3 LSAs. These features reduce the size of the LSAs. Stub areas 
need to be configured for areas that have a single exit to the backbone area.
 Network layer reachability information removed is replaced with a default route.
All routers in the area must agree on the stub area flag.
</p>

<h3>Summarization</h3>
<p>
OSPF scalability is achieved by minimising the number of routers (topology 
summarization) and number of prefixes (prefix summarization). Topology 
summarization is achieved through implementation of OSPF areas. 
Prefix summarization reduces the number of routes in the RIB.
OSPF prefix summarization can only occur at the border between areas and at the 
OSPF domain boundary with an external domain.
The two types of prefix summarization in OSPF are: area summarization and
external summarization.
<h4>Area Summarization</h4>
<p>  
Area summarization is configured between areas on the ABR. Area summarization 
filters type 3 LSAs containing component routes and only the type 3 LSA containing 
the summary route is permitted across the ABR. When performing area summarization; 
  <ul>
  <li> Only intra-area routes are summarized. Inter-area routes in the area are 
  regenerated as normal.</li>
  <li>Summarization is configured on the ABR connected to the area with the 
  source component routes. An ABR must be part of the area where the component 
  prefixes to be summarised are sourced. </li>
  </li>
  <li>The metric of the summary route is the lowest metric of the component 
  routes of the summary. In some circumstances, it may be better to 
  configure a static summary metric to reduce SPF executions if the metric of the 
  lowest cost component route changes.</li>
  <li>If multiple ABRs exist to a given area, summarization should be implemented 
  on all the ABRs that connect to the area whose routes are to be summarized.</li>
  </ul>
  Area summarization performed by ABR summarizes type 1 LSAs into a type 3 LSA.
  Area summarization reduces the number of type 3 LSAs in the LSDB. This provides 
  protection from processing remote network changes as they occur in other 
  areas. Link flaps in aggregate prefixes do not trigger SPF calculations in other areas.
  Area summarization can be configured using the command 
  <code><b>area 0 range <i>summary-address netmask</i></b></code> 
 </p>
 <div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
 R9(config-router)#<b>area 0 range 10.1.32.0 255.255.252.0</b>
 </code></div>
 
<p>
 A summary discard route is installed in the RIB of the ABR as a loop prevention mechanism.
The default metric for the summary LSA is the smallest metric associated with any 
component prefix in the summary route.  The summary route can have a static metric
configured to reduce CPU load or as part of traffic engineering by appending the 
keyword <code><b>cost <i>metric</i></b></code> to the area summarization command.
</p>
 <div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
 R9(config-router)#<b>area 0 range 10.1.32.0 255.255.252.0 cost 10</b>
 </code></div>
 

  <h4>External summarization</h4> 
  <p>
  External summarization is configured on the ASBR for external routes 
  being redistributed into the OSPF domain. It is a good idea to limit the number 
  of individual routes being redistributed. This summary can be configured at the 
  ASBR. If the IP addressing of the external routes is not contiguous, external 
  summarization may introduce sub-optimal routing problems.
  External summarization summarizes type 5 into type 5 and type 7 into type 7 LSAs 
by ASBR.
</p>

<p>
External summarisation is performed on the redistributing ASBR. In the OSPF process
<code><b>summary-address <i>network-address subnetmask</i></b></code>. 
A discard route is installed.
</p>

 <div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R11(config-router)#<b>summary-address 172.30.0.0 255.255.252.0 tag 172300</b>
</code></div>
<p>
The <code><b>summary-address</b></code> command includes the following options: 
<ul>
  <li>not-advertise: filter external prefixes from being redistributed.</li>
  <li>nssa-only: limit the summary route to NSSA area only.</li>
  <li>tag: to add a route-tag, advertise the summary address. This tag can be
  matched in a route-map.</li>
  </ul>
</p>

<h4>Summary Discard Route</h4>
<p>
When creating a summary route using the <code><b>area range</b></code> and 
<code><b>summary-address</b></code> commands, a discard route is installed into 
the routing table with an exit interface of Null0. The goal is to 
drop traffic if longest match is summary or the destination network is a 
component prefix of the summary address but matches no specific network. 
Summary router cannot fall back to default route. The administrative distance 
of the discard route for redistributed routes and internal routes can be modified 
using the OSPF <code><b>discard-route</b></code> command.
The following configuration modifies the administrative distance of the discard 
route to 30 for intra-area routes and 40 for redistributed routes.
</p>

<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R11(config-router)#<b>discard-route internal 30 external 40</b>
</code></div>

<p>
Discard route can be disabled with the command:
<code><b>no discard-route</b></code>
</p>


<h3>Filtering</h3>
<p>
OSPF filtering can be implemented at the following locations:
 <ul>
   <li>Internal i.e., between the database and the routing table.</li>
   <li>Inter-area filtering: inter-area filtering is implemented at the Area 
   border router. Inter-area filtering can be implemented by changing the area 
   type to one of the stub types.</li>
   <li>External filtering: this can be implemented at the ASBR. Changing the 
   area type can also apply filtering.</li>
 </ul>
</p>

<h4>Type 3 LSA Filtering</h4>
<p>
Type 3 LSA filtering provides for granular control of the type 3 LSAs that can 
be advertised into an area or advertised out of an area at the ABR.
</p>
<h5><code>area ... filter-list</code> command</h5>
<p>
An ABR is able to filter type 3 LSAs from areas that it is not directly connected 
to using the <code><b>filter-list</b></code> keyword to the <code><b>area</b></code>
command.
Using the filter list, routes can be filtered as they leave an area or as the 
enter an area.
Filtering routes using a filter list at the ABR is a two-step process that 
involves creation of a prefix list and referencing the prefix-list using <code>
<b>filter-list</b></code> keyword of the <code><b>area</b></code> command.

<div style="background-color: #f4f0ec">
<code>
R9(config)#<b>ip prefix-list PL_10.255.1.0 deny 10.255.1.0/24 le 32</b><br>
R9(config)#<b>ip prefix-list PL_10.255.1.0 permit 0.0.0.0/0 le 32</b> <br>
R9(config)#<b>router ospf 9</b> <br>
R9(config-router)#<b>area 10 filter-list prefix PL_10.255.1.0 in</b>
</code> </div>

<h5><code>area ... range</code> command</h5>
<p>
Type 3 LSAs can be filtered using the area summarization command by preventing type 3 
LSAs from being advertised into another
area by appending the <code>not-advertise</code> keyword. The above filtering 
can alternatively be accomplished using the following configuration:
</p>
<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R9(config-router)#<b>area 0 range 10.255.1.0 255.255.255.0 not-advertise</b>
</code>
</div>

<p>
Unlike filtering using the <code><b>area ... filter-list</b></code> command, 
filtering routes using the <code><b>not-advertise</b></code> keyword only works 
on ABRs that are directly connected to the area whose networks are to the filtered.
</p>


<h4>Prefix Suppression</h4>
<p>
Implemented in Cisco's version of OSPF, prefix suppression provides for the 
suppression of all connected prefixes. This can be implemented globally using 
the OSPF mode command <code><b>prefix-suppression</b></code> or at the interface
using the command <code><b>ip ospf prefix-suppression</b></code>. When
configured globally, all connected prefixes that are not configured on loopback 
interfaces, configured as secondary, or configured on passive interfaces are 
suppressed. When configured this way, individual interfaces can have prefix 
suppression disabled to allow their configured prefixes advertised. When 
prefix suppression is configured on a local interface, all addresses configured 
are suppressed including secondary addresses. 
</p>

<p>
Prefix suppression is very handy especially on large networks to reduce the size
of the LSDB with a large number of transit links whose addresses are not often 
used. The suppression of these addresses domain-wide can considerably reduce the 
size of the LSDB. Such prefix suppression, though does complicate troubleshooting
because these intermediate links cannot be accessed.
</p>

<h4>Local OSPF Route Filtering</h4>
<p>
Local OSPF route filtering involves preventing a router from installing a network 
from the LSDB into the RIB. This involves two steps: (1) identification of the 
route (using an ACL, prefix-list, route-map) and applying the filtering using a 
distribute-list command.
</p>

<div style="background-color: #f4f0ec">
<code>
R7(config)#<b>ip access-list standard ACL_10.3.4.0</b> <br />
R7(config-std-nacl)#<b>deny 10.3.4.0 0.0.0.255</b>     <br />
R7(config-std-nacl)#<b>permit any </b>                 <br />
R7(config-std-nacl)#<b>exit </b>                       <br />
R7(config)#<b>router ospf 7 </b>                       <br />
R7(config-router)#<b>distribute-list ACL_10.3.4.0 in</b>
</code></div>

<p>
The filtered route still exists in the LSDB. It is advertised to other routers in 
LSUs. However, it is not installed into the global/VRF RIB from the LSDB.
</p>

<h4>OSPF Network Types</h4>
<p>
Some OSPF network types utilize additional LSAs. It is a good idea to comprehensively 
assess whether it is appropriate from a network design perspective to maintain 
the network type defaults. This is often seen with Ethernet used to connect two 
only two devices. Broadcast networks require the use of Type 2 LSAs, perform a 
master/slave election; actions which increase the neighbor formation process and 
also increase the size of the LSDB. In such cases, a broadcast network type can 
be replaced with a point-to-point link to reduce the LSDB size and reduce the 
neighbor formation process.
</p>


<h4>External Filtering: Filtering at ASBR</h4>
<p>
Filtering can be applied on the ASBR during redistribution or "special treatment" 
of routes can be implemented such as configuration of a seed metric, metric type 
for specific routes using a route-map. It involves the following steps:
</p>

<ol>

<li><b>Step 1:</b> Identify the "interesting" using an ACL or prefix list.

<div style="background-color: #f4f0ec">
<code>
#access-list 1 permit 10.1.1.0
</code>
</div>

<li><b>Step 2: </b>Create a route-map:
<div style="background-color: #f4f0ec">
<code>
#route-map no16 deny 10
#match ip address 1

#route-map no16 permit 20
#set metric 6789
#set metric-type type-1
</code>
</div>
<li><b>Step 3</b>: Apply the route-map
<div style="background-color: #f4f0ec">
<code>
#redistribute static subnets route-map no16
</code>
</div>
</ol>
<p>
Filtering of redistributed routes can also be implemented using the command 
<code><b>summary-address</b></code> with the keyword <code><b>no-advertise</b></code>.
</p>
<h4>Troubleshooting Filtering</h4>
<p>
When troubleshooting filtering errors, beware of the following:
<ul>
  <li><b>Type 3 LSA Filtering:</b>
    <ul>
      <li>Check that the prefix-list is correct.</li>
     <li>Be sure that the filtering is applied to the correct area.</li>
     <li>Ensure that the filtering is applied in the right direction.</li>
     <li>Ensure that filtering is applied to the appropriate ABRs. If an area 
     has more than one ABR, then filtering may need to be applied to all 
     ABRs unless traffic engineering is being applied.</li>
</ul>
</li>
</ul>
</p>

<h2 id="OSPF_RESTARTS">Reducing the Effects of Restarts on OSPF</h2>
<p>
These actions are covered in <a href="https://www.ietf.org/rfc/rfc3623.txt" 
target="_blank">RFC 3623</a> through graceful restart. Graceful restart
allows for the restarting of OSPF without affecting the forwarding of traffic. 
This is done by tweaking normal OSPF operation.
</p> 
<p>
In normal operation, a device is restarted through a hard restart (powered off 
and on using the power switch) or a soft restart (through software). In a hard 
restart, there is no way to avoid dropping adjacencies as no Hello packets will 
be received. This type of restart is not recommended in production networks.
</p>
<p>
In a soft restart, the OSPF devices alert neighbors of an impending restart by 
flushing all LSAs that it originated and sending out empty Hello packets that 
result in neighborships being dropped immediately. With this type of shutdown, 
neighbors know immediately that a device is going to become unavailable and are 
able to make the appropriate adjustments to the link state database and eventually 
the routing table. Regardless of the selection, traffic is interrupted especially 
if the routing device does not separately implement duties of the control plane 
and data plane. Many routing devices offload data-plane functions to the line cards
and the processor handles the control-plane functions. 
</p>
<p>
With graceful restart, the control-plane can be restarted without affecting 
traffic. For this to function, the data-plane and control-plane functions must be 
separated. The device must modify the normal behaviour of OSPF when a restart 
occurs.
</p>
<p>
 Normally, a device notifies its neighbors of a shutdown by advertising LSAs 
 with a max age. The neighbors rerun SPF to determine how the SPT is affected 
 affecting normal traffic. With graceful restart: 
 <ul>
   <li>The restarting device communicates with its neighbors and lets them know 
   that a restart is upcoming. </li>
   <li>If the neighbors support this, they lock the neighborship between them 
   and the restarting device and maintain the appearance of a full adjacency.</li>
   <li>The neighbors continue to send traffic to the device as normal even though 
   the normal OSPF messages expected to be received are not.</li> 
   <li>The communications between the restarting device and its neighbors are 
   made possible through the use of the <b>Grace LSA</b>. This LSA is sent out  
   all the OSPF interfaces with a link-local scope and lets its neighbors prepare 
   for a restart. It also includes an expected grace period. This period indicates 
   the amount of time that these neighboring devices should expect to maintain the
   illusion of a full adjacency.</li>
   <li>Grace LSAs continue to be sent until they are acknowledged. If no 
   acknowledgement is received, then the restarting device terminates the 
   graceful restart and restarts normally.</li> 
   <li>On restart, the restarting device does not originate or flush any LSAs. It 
   continues to use its re-restart routing tables until all neighborships come 
   back into normal operation. Part of this process is similar to a device 
   coming up normally. When successful, the data-path through the device remains 
   uninterrupted.</li>
   <li>Once this process is complete, the restarting router flushes the Grace LSA,
   runs through the normal SPF process and re-originates its LSAs.</li>
   </ul>
   
   </p>
 <p>
   The graceful restart feature defines duties for two modes of operation: one for 
   the restarting device and another for the neighboring devices (helper devices).
   The mode for these devices is typically referred to as helper mode. On Cisco 
   devices, the functions of graceful restart are referred to as <b> non-stop 
   forwarding (NSF)</b>. Devices that support NSF directly are referrred to as 
   <b>NSF-capable</b>. Those devices that support helper mode are referred to as 
   <b>NSF-aware</b>
</p>
<p>

</p>


<h2 id="TRAFFIC_ENGINEERING">OSPF Traffic Engineering</h2>
<h3>Interface Cost</h3>

<p>
The link cost considered in the metric calculation is always of the exit 
interface. This cost can be modified using the interface command <code><b>bandwidth 
</b></code> or <code><b>ip ospf cost</b></code>:
<ul>
 <li><b>Interface bandwidth: </b>using the interface command <code>bandwidth <i>value</i></code> 
 with the bandwidth value in kilobits per second:
 <p>
 <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
 <code>
 R8(config)#<b>interface g0/0</b> <br />
 R8(config-if)#<b>bandwidth 10000</b> <br />
R8(config-if)#<b>do show interface g0/0 </b> <br />
GigabitEthernet0/0 is up, line protocol is up                                               <br />
&nbsp;&nbsp;Hardware is i82543 (Livengood), address is ca08.05b3.0008 (bia ca08.05b3.0008)  <br />
&nbsp;&nbsp;Internet address is 10.7.7.3/29                                                 <br />
&nbsp;&nbsp;MTU 1500 bytes, <span style="background-color:#DCDCDC;">BW 10000 Kbit/sec</span>, DLY 10 usec,                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;reliability 255/255, txload 1/255, rxload 1/255                     <br />
&nbsp;&nbsp;Encapsulation ARPA, loopback not set                                            <br />
&nbsp;&nbsp;Keepalive set (10 sec)                                                          <br />
&nbsp;&nbsp;Full Duplex, 1Gbps, link type is auto, media type is SX                         <br />
 ... <br/>
 </code> 
 </div>
 </p>
 <p>
 However, it is not recommended to modify the OSPF interface cost by modifying the interface bandwidth as this modification 
 affects not only OSPF metric calculation but potentially other metric calculations say for any other routing protocol.
 </p>
 </li>
 <li><b>Interface cost: </b>modifying the OSPF interface cost using the interface mode command:
 <code><b>ip ospf cost <i>value</i></b></code> where value is between 1 - 65535.
 <p>
 <div style="background-color:#f4f0ec; border-style:solid;border-width:1px;border-color:#DCDCDC">
 <code>
 R8(config-if)#<b>do show ip ospf interface brief </b>                                <br />    
Interface&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PID &nbsp;  Area &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           IP Address/Mask  &nbsp;&nbsp;&nbsp;&nbsp;  Cost &nbsp;&nbsp; State &nbsp;&nbsp; Nbrs F/C     <br />   
VL0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8 &nbsp;&nbsp;&nbsp;  0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           10.7.7.3/29&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1000 &nbsp;&nbsp; P2P &nbsp;&nbsp;&nbsp;&nbsp; 1/1          <br />   
Gi0/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8 &nbsp;&nbsp;&nbsp;  7 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           10.7.7.3/29&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1000 &nbsp;&nbsp; BDR &nbsp;&nbsp;&nbsp;&nbsp; 1/1          <br />   
R8(config-if)#<b>ip ospf cost ? </b>                                                  <br />   
  <1-65535>  Cost                                                              <br />   
                                                                               <br />   
R8(config-if)#<b>ip ospf cost 1 </b>                                                   <br />   
R8(config-if)#do show ip ospf interface brief                                  <br />   
Interface&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PID &nbsp;  Area &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           IP Address/Mask    Cost  State Nbrs F/C     <br />   
VL0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8 &nbsp;&nbsp;&nbsp;  0               10.7.7.3/29        1000  P2P   1/1          <br />   
Gi0/0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8 &nbsp;&nbsp;&nbsp;  7               10.7.7.3/29        1     BDR   1/1          <br />   
R8(config-if)#                                                                 <br />
</code>
</div>
</p>
 </li>
 <li><b>Process auto-cost: </b>Modification of the default reference bandwidth implicitly changes the OSPF cost for 
 certain paths. </li>
 <li><b>Process neighbor cost: </b>In NBMA networks, neighbors are statically configured using the OSPF router mode command 
 <code>neighbor <i>RID</i></code>. A static cost can be assigned for the link to this neighbor.</li>
</ul>


<h3>Administrative Distance</h3>
<p>
There may be scenarios where more than one routing source is informing a router about the path to 
a given network. Routers use the administrative distance as a measure of the trustworthiness of a 
routing source. Administrative distance is a value ranging from 1 to 255 with 255 being an untrustworthy source.
The lower the AD, the more trustworthy the routing source.

The default administrative distance of OSPF is 110. When implementing traffic engineering, some scenarios may 
require the modification of the default AD of OSPF so that paths through 
OSPF are preferred to paths from other routing protocols or paths from other 
routing protocols are preferred to OSPF sourced routes. To change the default AD
of OSPF, use the router OSPF mode command <code><b>distance <i>value</i></b></code> 
where value is in the range 1 - 255.
</p>

<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1(config)#<b>router ospf 1</b><br />
R1(config-router)#<b>distance 80</b>
</code>
</div>
<p>
To modify the AD of routes from a specific router use the OSPF command 
<code><b>distance <i>AD RID wildcard</i></b></code> where <code><b><i>AD</i></b>
</code> is the administrative distance, RID is the router ID of the originating 
router and <code><b><i>wildcard</i></b></code> is the wildcard mask.
;
</p>
<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1(config-router)#<b>distance 89 11.11.11.11 0.0.0.0</b>
</code>
</div>

<p>
The AD of specific routes from a specific router can be modified by appending an 
access control list (ACL) to the command.
</p>
<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1(config)#<b>ip access-list standard ACL_172.30.3.0 </b>                      <br />
R1(config-std-nacl)#<b>10 permit 172.30.3.0 0.0.0.255 </b>                     <br />
R1(config-std-nacl)#<b>20 deny any </b>                                        <br />
R1(config-std-nacl)#<b>exit </b>                                               <br />
R1(config)#<b>router ospf 1 </b>                                               <br />
R1(config-router)#<b>distance 60 11.11.11.11 0.0.0.0 ACL_172.30.3.0 </b>       <br />
</code>
</div>

<p>
Verification of the modification of the AD of the routes identified by the ACL:
</p>
<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1#<b>show ip route 172.30.3.0</b>                                             <br>      
Routing entry for 172.30.3.0/24                                                <br>
&nbsp;&nbsp;Known via "ospf 1", distance 60, metric 20, type extern 2, forward metric 2  <br>
&nbsp;&nbsp;Last update from 10.255.254.14 on GigabitEthernet4/0, 00:05:49 ago           <br>
&nbsp;&nbsp;Routing Descriptor Blocks:                                                   <br>
&nbsp;&nbsp;* 10.255.254.14, from 11.11.11.11, 00:05:49 ago, via GigabitEthernet4/0      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Route metric is 20, traffic share count is 1                             <br>
R1#                                                                           
</code></div>

<p>
The command <code><b>show ip protocols</b></code> can also be used to verify 
modification of the AD:
</p>

<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1#<b>show ip protocols</b>                                      <br />
*** IP Routing is NSF aware ***                                  <br />
                                                                 <br />
Routing Protocol is "ospf 1"                                     <br />
&nbsp;&nbsp;Outgoing update filter list for all interfaces is not set      <br />
&nbsp;&nbsp;Incoming update filter list for all interfaces is not set      <br />
&nbsp;&nbsp;Router ID 1.1.1.1                                              <br />
&nbsp;&nbsp;It is an area border and autonomous system boundary router     <br />
&nbsp;Redistributing External Routes from,                            <br />
&nbsp;&nbsp;Number of areas in this router is 3. 3 normal 0 stub 0 nssa    <br />
&nbsp;&nbsp;Maximum path: 4                                                <br />
&nbsp;&nbsp;Routing for Networks:                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.0 0.0.0.3 area 0.0.0.0                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.5 0.0.0.0 area 0.0.0.0                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;10.255.1.33 0.0.0.0 area 0.0.0.0                             <br />
&nbsp;&nbsp;&nbsp;&nbsp;10.255.254.0 0.0.0.3 area 0.0.0.7                            <br />
&nbsp;&nbsp;Routing on Interfaces Configured Explicitly (Area 0.0.0.0):    <br />
&nbsp;&nbsp;&nbsp;&nbsp;GigabitEthernet0/0                                           <br />
&nbsp;&nbsp;Routing on Interfaces Configured Explicitly (Area 10):         <br />
&nbsp;&nbsp;&nbsp;&nbsp;GigabitEthernet4/0                                           <br />
&nbsp;&nbsp;Routing Information Sources:                                   <br />
&nbsp;&nbsp;&nbsp;&nbsp;Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Distance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Last Update                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;2.2.2.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:02:44                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;5.5.5.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:02:44                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;4.4.4.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:02:44                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;9.9.9.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:02:44                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;10.10.10.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:02:44                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;11.11.11.11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:02:44                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;8.8.8.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:02:44                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;7.7.7.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:02:44                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;6.6.6.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00:02:44                       <br />
&nbsp;&nbsp;Distance: (default is 80)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;Address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Wild mask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Distance&nbsp;&nbsp;List               <br />
&nbsp;&nbsp;&nbsp;&nbsp;11.11.11.11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;60&nbsp;&nbsp;ACL_172.30.3.0
</code></div>

<h3>Default Route Propagation</h3>
<p>
On a router with a default route (usually static), the default route can be propagated 
through OSPF using the command:
</p>
<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1(config)#<b>router ospf 1</b> <br />
R1(config-router)#<b>default-information originate</b>
</code>
</div>

<p>
The above command only works if the local router has a default route. To 
propagate a default route regardless of whether the local router has a default 
route;
<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1(config-router)#<b>default-information originate always</b>
</code>
</div>
</p>
<p>
By default, the default route gets propagated as a type 5 external route with 
metric type 2 LSA. This makes the router an ASBR.
</p>

<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R2#<b>show ip route</b>                                                                         <br />
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E1 - OSPF external type 1, E2 - OSPF external type 2                              <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2             <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ia - IS-IS inter area, * - candidate default, U - per-user static route           <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ - replicated route, % - next hop override                                       <br />
                                                                                         <br />
Gateway of last resort is 10.255.1.33 to network 0.0.0.0                                 <br />
                                                                                         <br />
O*E2&nbsp;&nbsp;0.0.0.0/0 [110/1] via 10.255.1.33, 00:00:14, GigabitEthernet4/0                    <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[110/1] via 10.255.1.1, 00:00:14, GigabitEthernet1/0                     <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.0.0/8 is variably subnetted, 35 subnets, 6 masks                              <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.1.0/24 [110/2] via 10.255.1.27, 01:00:42, FastEthernet3/0                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[110/2] via 10.255.1.10, 01:00:42, GigabitEthernet2/0               <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.2.0/24 [110/2] via 10.255.1.27, 01:00:42, FastEthernet3/0                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[110/2] via 10.255.1.10, 01:00:42, GigabitEthernet2/0               <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.3.0/24 [110/2] via 10.255.1.27, 01:00:42, FastEthernet3/0                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[110/2] via 10.255.1.10, 01:00:42, GigabitEthernet2/0               <br />
O&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.1.4.0/24 [110/2] via 10.255.1.27, 01:00:42, FastEthernet3/0                  <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[110/2] via 10.255.1.10, 01:00:42, GigabitEthernet2/0               <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                    <br />
R2#<b>show ip ospf database external 0.0.0.0 </b>                                               <br />
&nbsp;&nbsp;                                                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (2.2.2.2) (Process ID 2)                                 <br />
&nbsp;&nbsp;                                                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type-5 AS External Link States                                           <br />
&nbsp;&nbsp;                                                                                       <br />
&nbsp;&nbsp;Routing Bit Set on this LSA in topology Base with MTID 0                               <br />
&nbsp;&nbsp;LS age: 38                                                                             <br />
&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)                                               <br />
&nbsp;&nbsp;LS Type: AS External Link                                                              <br />
&nbsp;&nbsp;Link State ID: 0.0.0.0 (External Network Number )                                      <br />
&nbsp;&nbsp;Advertising Router: 1.1.1.1                                                            <br />
&nbsp;&nbsp;LS Seq Number: 80000001                                                                <br />
&nbsp;&nbsp;Checksum: 0x1D91                                                                       <br />
&nbsp;&nbsp;Length: 36                                                                             <br />
&nbsp;&nbsp;Network Mask: /0                                                                       <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric Type: 2 (Larger than any link state path)                                 <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTID: 0                                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Metric: 1                                                                        <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forward Address: 0.0.0.0                                                         <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;External Route Tag: 1                                                        
&nbsp;&nbsp;                                                                                   
R2#                                                                                  
</code></div>
<p>
To modify characteristics of the default route;
</p>
<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1(config-router)#<b>default-information originate metric 50 metric-type 1</b>
</code> </div>
<p>
where 50 is the seed OSPF cost of the default route and the metric type is set to 
external type 1.
</p>

<p>
In the various stub area types, the default route is propagated as a Type 3 LSA 
by default by the ABR.

In NSSA areas, the default route is not generated by default. To generate the 
default route, use the command <code><b>area 10 nssa 
default-information-originate</b></code>. This command does not require a default 
route to exist. Also, this command is entered after the command <code><b>area 10 
nssa</b></code>. In a totally NSSA, deafult route is installed by default as a 
type 3 LSA.
</p>

<h1 id="OSPF_SECURITY">OSPF Security</h1>

<h2>Security Threat Vectors and Motivations</h2>
<p>
A threat vector is a method or mechanism used to attack a specific system. There 
are ways that OSPF is attacked.
</p>
<p>
OSPF is an interior gateway protocol and therefore not exposed to the insecure 
public Internet. In the design of an OSPF network, OSPF devices should not be 
allowed to communicate with devices in the public Internet. Because of this, a 
layer of security is created that protects the OSPF domain from the Internet.
Therefore for an attack on OSPF, some kind of internal access may be required. 
Multiple ways exist to achieve internal access:
<ul>
  <li>Gaining wired or wireless network access.</li>
  <li>Exploitation of an insecure system.</li>
</ul>

<p>
OSPF attacks involve listening to OSPF traffic. Listening to OSPF traffic 
provides the opportunity to modify how this traffic is forwarded. Listening to 
OSPF traffic can be carried out through packet capture. OSPFv2 traffic does not 
encrypt traffic. Based on packet captures, it is possible to determine the 
network design as it offers a comprehensive network view. Through the packet 
capture, it is possible to determine some of the security mechanisms used to 
secure OSPF.
</p>

<p>
The threats to unauthorized access to OSPF could result in the introduction of 
false link state information that could affect performance and network traffic 
in a number of different ways:
<ul>
  <li><b>Traffic re-routing</b> to overwhelm sections of the OSPF domain with link 
  congestion. Traffic re-routing could be done along a longer path to add 
  additional delay.</li>
  <li><b>Traffic to nowhere</b> to cause traffic to never reach its destination.</li>
  <li><b>Introduce constant recalculations</b> to reduce performance of the 
  routing devices themselves through constant changing of link state information
  being advertised.</li>
</ul>
</p>

<h2>OSPF Security Mechanisms</h2>
<p>
OSPF requires neighborship formation with multiple matching parameters. RFC 7474
introduced possibilities to lower risks of replay attacks. Some OSPF security 
mechanisms include passive interfaces and authentication.
</p>

<h2>Passive Interfaces</h2>
<p>
Passive interfaces can be configured on leaf-node OSPF routers and particularly
on interfaces that connect to end-user devices such as access points, printers. 
Configuring these interfaces as passive interfaces prevents the transmission of 
Hello packets and therefore adjacency formation. This measure also prevents 
threat actors from sniffing OSPF traffic and learning some information from the 
hello packets.
</p>
<p>
Another additional benefit from passive interfaces is that an OSPF device does 
not respond to hello packets transmitted to passive interfaces. This prevents 
the injection of unauthorised OSPF traffic into the OSPF domain.
</p>
<p>
Passive interfaces can be configured in two ways: 
<ul>
  <li><b>Passive interface:</b> an interface is configured as passive individually 
  using the command <code><b>passive-interface <i>interface-id</i></b></code> 
  where <code><b><i>interface-id</i></b></code> is the interface to be configured
  as passive.</li>
  <li><b>Passive interface default:</b> all interfaces are configured as 
  passive interfaces using the OSPF mode command <code><b>passive-interface 
  default</b></code>. 
  
  Each interface through which an adjacency is to be formed 
  should then be made an active interface using the OSPF command 
  <code><b>no passive-interface <i>interface-id</i></b></code> where 
  <code><b><i>interface-id</i></b></code> is the interface to be made active.
  </li> 
</ul>
</p>

<h2>OSPF Authentication</h2>
<p>
OSPF supports adjacency authentication to protect the control-plane from routing 
injection attacks. The OSPF packet header includes the authentication method and 
password for type 1 authentication and hash for type 2 authentication.
</p>
<p>
OSPF supports three types of authentication:
<ul>
 <li>Type 0 null: offers no authentication at all</li>
 <li>Type 1 - Simple password option uses cleartext password</li>
 <li>Type 2 - Cryptographic MD5 or SHA). RFC 5709 introduced SHA authentication 
 which uses SHA-1, SHA-256, SHA-384 and SHA-512.</li>
</ul>
</p>

<p>
 The OSPF authentication type can be configured in two different locations; 
 OSPF area and on the interface.:
<ul>
 <li><b>Area Authentication:</b> 
  area authentication can be configured so that all router interfaces in an area
  comply with the same type of authentication configured for that area. This is 
  done using the OSPF router mode command <code><b>area <i>area-id</i> 
  authentication </b></code>. When configuring area level authentication, it is 
  important to note the following:
  <ul>
    <li>The link level configuration overrides the process level authentication 
    configuration.</li>
    <li>The password is always configured on the link.</li>
    <li>Setting area authentication for area zero will require all virtual links
    to configure that type of authentication. A virtual-link is a member of area 
    zero.</li>
  </ul>
  
  </li>
 <li><b>Interface Authentication:</b>  this is configured at the interface using the 
 interface mode command<code><b>ip ospf authentication</b></code></li>. The adjacent 
 routers need to be configured with the same authentication type and password 
 for them to maintain the adjacency.
 </ul>
 
  <h3>Type 0 Authentication (Null)</h3>
   
 <p>
 Type 0 authentication is also referred to as null authentication. This is the 
 default type of authentication on all OSPF interfaces.
 </p>
 
 <h3>Type 1 Authentication (Plain-text)</h3>
 <p>
 Type 1 authentication sends the password in plain text in the OSPF header. 
 <ul>
   <li>Type 1 authentication can be configured for an OSPF area using the OSPF process command 
 <code><b>area <i>area-id</i> authentication</b></code>.</li> 
 <li>At the interface, type 1 authentication is configured using the interface 
 mode command <code><b>ip ospf authentication</b></code>. </li>
 </ul>
 The authentication key is always configured on the 
 interface regardless of whether type 1 authentication was enabled for the area.
 This is done using the interface mode command <code><b>ip ospf authentication-key 
 <i>key</i></b></code>. The following output is a Wireshark packet capture of 
 the header of an OSPF packet displaying type 1 authentication: 
 </p>
 
 <div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
 OSPF Header                                               <br />
 &nbsp;&nbsp;&nbsp;&nbsp;Version: 2                        <br />
 &nbsp;&nbsp;&nbsp;&nbsp;Message Type: Hello Packet (1)    <br />
 &nbsp;&nbsp;&nbsp;&nbsp;Packet Length: 48                 <br />
 &nbsp;&nbsp;&nbsp;&nbsp;Source OSPF Router: 2.2.2.2       <br />
 &nbsp;&nbsp;&nbsp;&nbsp;Area ID: 0.0.0.0 (Backbone)       <br />
 &nbsp;&nbsp;&nbsp;&nbsp;Checksum: 0xcd96 [correct]        <br />
 &nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color:gray;">Auth Type: Simple password (1)</span>    <br />
 &nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color:gray;">Auth Data (Simple): cisco</span>
</code></div>
 
 <h3>Type 2 Authentication</h3>
 <p>
 This uses MD5 for SHA for hashing the password. The hashed password is then 
 included in the OSPF header.
 <ul>
   <li><b>Area configuration:</b> to enable type 2 authentication for an OSPF area 
   use the OSPF process command <code><b> area <i>area-id</i> authentication 
   message-digest</b></code>.</li>
   <li><b>Interface configuration:</b> type 2 authentication is enabled at the 
   interface using the interface mode command <code><b>ip ospf authentication 
   message-digest</b></code></li>
 </ul>
 The MD5 key is then configured at the interface using the interface mode command 
 <code><b>ip ospf message-digest-key <i>key-id</i> md5 <i>password</i></b> </code>.
 The key ID and password must match.
 </p>
 <p>
 <p>
OSPF supports the following SHA algorithms: HMAC-SHA-1, HMAC-SHA-256, HMAC-SHA-384, 
HMAC-SHA-512. OSPF supports the use of key chains. When configuring the key chain,
the following features are configured for the keychain: the cryptographic 
algorithm, key ID, key string.
</p>
<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1(config)#<b>key chain OSPF_KEY</b>                                <br>
R1(config-keychain)#<b>key 1</b>                                    <br>
R1(config-keychain-key)#<b>key-string cisco</b>                     <br>
R1(config-keychain-key)#<b>cryptographic-algorithm HMAC-SHA-384</b> <br>
</code></div>
<p>
To configure the authentication key on the interface:
 </p>

 <div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1(config)#<b>interface g1/0</b><br>
R1(config)#<b>ip ospf authentication key-chain OSPF_KEY</b>
</code></div>
 
 <p>
 The following is the header of an OSPF packet after the configuration of type 2 
 authentication using MD5.
 </p>
 
  <div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
 OSPF Header                                             <br />    
 &nbsp;&nbsp;&nbsp;Version: 2                                           <br />
 &nbsp;&nbsp;&nbsp;Message Type: DB Description (2)                     <br />
 &nbsp;&nbsp;&nbsp;Packet Length: 32                                    <br />
 &nbsp;&nbsp;&nbsp;Source OSPF Router: 1.1.1.1                          <br />
 &nbsp;&nbsp;&nbsp;Area ID: 0.0.0.0 (Backbone)                          <br />
 &nbsp;&nbsp;&nbsp;Checksum: 0x0000 (None)                              <br />
 &nbsp;&nbsp;&nbsp;Auth Type: Cryptographic (2)                         <br />
 &nbsp;&nbsp;&nbsp;Auth Crypt Key id: 1                                 <br />
 &nbsp;&nbsp;&nbsp;Auth Crypt Data Length: 16                           <br />
 &nbsp;&nbsp;&nbsp;Auth Crypt Sequence Number: 1667856667               <br />
 &nbsp;&nbsp;&nbsp;Auth Crypt Data: a6df33177d1e6cdfc85153e69f1c3087    <br />
</code></div>
 
<p>
Type 2 authentication adds an additional TLV, the crypto authentication TLV:
</p>

<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
Crypto Authentication TLV                                             <br>
&nbsp;&nbsp;&nbsp;&nbsp;TLV Type: 2                                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;TLV Length: 20                                <br>
&nbsp;&nbsp;&nbsp;&nbsp;Sequence number: 0x636982a9                   <br>
&nbsp;&nbsp;&nbsp;&nbsp;Auth Data: 56650cbfc5a38d43dc18702f553ae0fb   <br>
</code></div>

<h2>Virtual-link Authentication</h2>
<p>
A virtual-link is an area 0 interface. It inherits area 0 authentication configurations.
The virtual-link is the interface, the key configuration goes at the interface. 
Type can be configured globally or at the interface.
</p>
<p>
Like any other OSPF interface, virtual-link interface authentication overrides the 
area 0 configured authentication type.
</p>
<p>
The virtual-link runs as a demand circuit. Always clear the virtual-link after 
configuring authentication.
</p>
<p>
<ul>
  <li><b>Type 2 authentication:</b> use the following commands:
<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R8(config)#<b>router ospf 8</b><br>
R8(config-router)#<b>area 7 virtual-link 1.1.1.1 authentication message-digest</b><br/>
R8(config-router)#<b>area 7 virtual-link 1.1.1.1 message-digest-key 1 md5 cisco</b><br />
</code></div>

</ul>
</p>
<h2>Verification</h2>
<p>
Authentication can be verified using the following commands:
</p>
<h3><code>show ip ospf</code></h3>
<p>
Command verifies if authentication has been configured for the area.
</p>

<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1#<b>show ip ospf</b>                                                                                     <br />
&nbsp;Routing Process "ospf 1" with ID 1.1.1.1                                                      <br />
&nbsp;Start time: 00:00:29.024, Time elapsed: 03:38:17.128                                          <br />
&nbsp;Supports only single TOS(TOS0) routes                                                         <br />
&nbsp;..                                                                                            <br />
&nbsp;Cisco NSF helper support enabled                                                              <br />
&nbsp;Reference bandwidth unit is 100 mbps                                                          <br />
&nbsp;&nbsp;&nbsp;&nbsp;Area BACKBONE(0.0.0.0)                                                      <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of interfaces in this area is 4              <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color:gray;">Area has message digest authentication</span>              <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPF algorithm last executed 00:26:30.208 ago        <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPF algorithm executed 17 times                     <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area ranges are                                     <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   10.1.32.0/22 Passive Advertise                   <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of LSA 17. Checksum Sum 0x097919             <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of opaque link LSA 0. Checksum Sum 0x000000  <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of DCbitless LSA 0                           <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of indication LSA 0                          <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of DoNotAge LSA 0                            <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flood list length 0                                 <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;Area 0.0.0.7                                                                <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of interfaces in this area is 1              <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area has no authentication                          <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPF algorithm last executed 00:13:57.260 ago        <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SPF algorithm executed 19 times                     <br />                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Area ranges are                                     <br />                   
</code></div>
<p>
From the above output, type 2 authentication has been configured for the backbone 
area. Area authentication has not been configured for area 0.0.0.7.
</p>
<h3><code>show ip ospf interface</code></h3>
<p>
This command verifies the authentication type configured at the interface:
</p>
<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1#<b>show ip ospf interface </b>                                                   <br>
OSPF_VL0 is up, line protocol is up                                          <br>
&nbsp;&nbsp;Internet Address 10.255.254.1/30, Area 0.0.0.0, Attached via Not Attached  <br>
&nbsp;&nbsp;Process ID 1, Router ID 1.1.1.1, Network Type VIRTUAL_LINK, Cost: 2        <br>
&nbsp;&nbsp;Topology-MTID&nbsp;&nbsp;&nbsp;&nbsp;Cost&nbsp;&nbsp;&nbsp;&nbsp;Disabled&nbsp;&nbsp;&nbsp;&nbsp;Shutdown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Topology Name           <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base                 <br>
&nbsp;&nbsp;Configured as demand circuit                                               <br>
&nbsp;&nbsp;Run as demand circuit                                                      <br>
&nbsp;&nbsp;DoNotAge LSA allowed                                                       <br>
&nbsp;&nbsp;Transmit Delay is 1 sec, State POINT_TO_POINT                              <br>
&nbsp;&nbsp;Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5       <br>
&nbsp;&nbsp;&nbsp;&nbsp;oob-resync timeout 40                                                    <br>
&nbsp;&nbsp;&nbsp;&nbsp;Hello due in 00:00:02                                                    <br>
&nbsp;&nbsp;Supports Link-local Signaling (LLS)                                        <br>
&nbsp;&nbsp;Cisco NSF helper support enabled                                           <br>
&nbsp;&nbsp;IETF NSF helper support enabled                                            <br>
&nbsp;&nbsp;Index 4/6, flood queue length 0                                            <br>
&nbsp;&nbsp;Next 0x0(0)/0x0(0)                                                         <br>
&nbsp;&nbsp;Last flood scan length is 1, maximum is 12                                 <br>
&nbsp;&nbsp;Last flood scan time is 0 msec, maximum is 4 msec                          <br>
&nbsp;&nbsp;Neighbor Count is 0, Adjacent neighbor count is 0                          <br>
&nbsp;&nbsp;Suppress hello for 0 neighbor(s)                                           <br>
&nbsp;&nbsp;<span style="background-color:gray;">Message digest authentication enabled</span>                                      <br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color:gray;">Youngest key id is 1</span>                                                     <br>
&nbsp;&nbsp;  .....                                                                    <br>
</code></div>

<h3><code>show ip ospf virtual-links</code></h3>
<p>
This command specifically verifies the operational state of the virtual links including 
any authentication that may have been configured.
</p>

<div style="background-color: #f4f0ec; border-color:#DCDCDC; border-style: solid; border-width:1px">
<code>
R1#<b>show ip ospf virtual-links</b> <br>
Virtual Link OSPF_VL0 to router 8.8.8.8 is up<br>
&nbsp;&nbsp;Run as demand circuit<br>
&nbsp;&nbsp;DoNotAge LSA allowed.<br>
&nbsp;&nbsp;Transit area 0.0.0.7, via interface GigabitEthernet1/0<br>
&nbsp;Topology-MTID&nbsp;&nbsp;&nbsp;&nbsp;Cost&nbsp;&nbsp;&nbsp;&nbsp;Disabled&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Shutdown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Topology Name<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base<br>
&nbsp;&nbsp;Transmit Delay is 1 sec, State POINT_TO_POINT,<br>
&nbsp;&nbsp;Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hello due in 00:00:03<br>
&nbsp;&nbsp;<span style="background-color:gray;">Message digest authentication enabled</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color:gray;">Youngest key id is 1</span><br>
R1#
</code></div>

<h2>Recommendations</h2>
<p>
It is recommended to implement the highest authentication level supportable on 
a device.

Best to use OSPFv3 to manage IPv4 networks. Though it uses IPv6 for security, it 
is more secure.

Implement the use of passive interfaces. This revents OSPF communications on an 
interface lowering the possibility of unwanted traffic injection. All interfaces 
can be configured as passive by default.
</p>


<h2>Verification and Troubleshooting of Authentication</h2>
<p>
During verification and troubleshooting of OSPF authentication configuration, 
take note of the following:
<ul>
  <li>Authentication type and password is the same between the OSPF neighbors.</li>
  <li>The interface mode authentication type overrides the area mode authentication.</li>
  <li>For type 2 authentication, the key ID must match on the OSPF neighbors.</li>
</ul>
</p>
<p>
The following commands can the used to verify OSPF authentication configuration:
  <ul>
    <li><code><b>show ip ospf</b></code></li>
    <li><code><b>show ip ospf interface</b></code></li>
    <li><code><b>show key chain</b></code></li>
  </ul>
</p>
<p>
With SHA/MD5 authentication, the packet is not encrypted. A digest of the key ID and password is embedded 
in the packet header.
</p>
<!-- 
<h1 id="TSHOOT">Troubleshooting</h1>
Common reasons for sub-optimal traffic flow;
<ul>
 <li>Auto-cost reference bandwidth is not configured the same throughout the OSPF domain.</li>
 <li>Summarization is not consistently applied on ABRs for inter-area summarization.</li>
 <li>Problems with route redistribution that do not address issues with route feedback.</li>
</ul>
-->